var juicebox_lib=juicebox_lib?juicebox_lib:{};(function(e,t){function u(e){var t=o[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++){t[e[n]]=true}return t}function c(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(l,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r==="string"){try{r=r==="true"?true:r==="false"?false:r==="null"?null:s.isNumeric(r)?parseFloat(r):f.test(r)?s.parseJSON(r):r}catch(o){}s.data(e,n,r)}else{r=t}}return r}function h(e){for(var t in e){if(t==="data"&&s.isEmptyObject(e[t])){continue}if(t!=="toJSON"){return false}}return true}function p(e,t,n){var r=t+"defer",i=t+"queue",o=t+"mark",u=s._data(e,r);if(u&&(n==="queue"||!s._data(e,i))&&(n==="mark"||!s._data(e,o))){setTimeout(function(){if(!s._data(e,i)&&!s._data(e,o)){s.removeData(e,r,true);u.fire()}},0)}}function D(){return false}function P(){return true}function U(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function z(e,t,n){t=t||0;if(s.isFunction(t)){return s.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n})}else{if(t.nodeType){return s.grep(e,function(e,r){return e===t===n})}else{if(typeof t==="string"){var r=s.grep(e,function(e){return e.nodeType===1});if(F.test(t)){return s.filter(t,r,!n)}else{t=s.filter(t,r)}}}}return s.grep(e,function(e,r){return s.inArray(e,t)>=0===n})}function W(e){var t=X.split(" "),n=e.createDocumentFragment();if(n.createElement){while(t.length){n.createElement(t.pop())}}return n}function ot(e,t){return s.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ut(e,t){if(t.nodeType!==1||!s.hasData(e)){return}var n,r,i,o=s._data(e),u=s._data(t,o),a=o.events;if(a){delete u.handle;u.events={};for(n in a){for(r=0,i=a[n].length;r<i;r++){s.event.add(t,n+(a[n][r].namespace?".":"")+a[n][r].namespace,a[n][r],a[n][r].data)}}}if(u.data){u.data=s.extend({},u.data)}}function at(e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName("*")}else{if(typeof e.querySelectorAll!=="undefined"){return e.querySelectorAll("*")}else{return[]}}}function ft(e){if(e.type==="checkbox"||e.type==="radio"){e.defaultChecked=e.checked}}function lt(e){var t=(e.nodeName||"").toLowerCase();if(t==="input"){ft(e)}else{if(t!=="script"&&typeof e.getElementsByTagName!=="undefined"){s.grep(e.getElementsByTagName("input"),ft)}}}function ct(e,t){if(t.src){s.ajax({url:t.src,async:false,dataType:"script"})}else{s.globalEval((t.text||t.textContent||t.innerHTML||"").replace(rt,"/*$0*/"))}if(t.parentNode){t.parentNode.removeChild(t)}}function Tt(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?bt:wt;if(r>0){if(n!=="border"){s.each(i,function(){if(!n){r-=parseFloat(s.css(e,"padding"+this))||0}if(n==="margin"){r+=parseFloat(s.css(e,n+this))||0}else{r-=parseFloat(s.css(e,"border"+this+"Width"))||0}})}return r+"px"}r=Et(e,t,t);if(r<0||r==null){r=e.style[t]||0}r=parseFloat(r)||0;if(n){s.each(i,function(){r+=parseFloat(s.css(e,"padding"+this))||0;if(n!=="padding"){r+=parseFloat(s.css(e,"border"+this+"Width"))||0}if(n==="margin"){r+=parseFloat(s.css(e,n+this))||0}})}return r+"px"}function $t(e){return function(t,n){if(typeof t!=="string"){n=t;t="*"}if(s.isFunction(n)){var r=t.toLowerCase().split(jt),i=0,o=r.length,u,a,f;for(;i<o;i++){u=r[i];f=/^\+/.test(u);if(f){u=u.substr(1)||"*"}a=e[u]=e[u]||[];a[f?"unshift":"push"](n)}}}}function Jt(e,n,r,i,s,o){s=s||n.dataTypes[0];o=o||{};o[s]=true;var u=e[s],a=0,f=u?u.length:0,l=e===Rt,c;for(;a<f&&(l||!c);a++){c=u[a](n,r,i);if(typeof c==="string"){if(!l||o[c]){c=t}else{n.dataTypes.unshift(c);c=Jt(e,n,r,i,c,o)}}}if((l||!c)&&!o["*"]){c=Jt(e,n,r,i,"*",o)}return c}function Kt(e,n){var r,i,o=s.ajaxSettings.flatOptions||{};for(r in n){if(n[r]!==t){(o[r]?e:i||(i={}))[r]=n[r]}}if(i){s.extend(true,e,i)}}function Qt(e,t,n,r){if(s.isArray(t)){s.each(t,function(t,i){if(n||Ct.test(e)){r(e,i)}else{Qt(e+"["+(typeof i==="object"||s.isArray(i)?t:"")+"]",i,n,r)}})}else{if(!n&&t!=null&&typeof t==="object"){for(var i in t){Qt(e+"["+i+"]",t[i],n,r)}}else{r(e,t)}}}function Gt(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o){if(a in r){n[o[a]]=r[a]}}while(s[0]==="*"){s.shift();if(u===t){u=e.mimeType||n.getResponseHeader("content-type")}}if(u){for(a in i){if(i[a]&&i[a].test(u)){s.unshift(a);break}}}if(s[0]in r){f=s[0]}else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}if(!l){l=a}}f=f||l}if(f){if(f!==s[0]){s.unshift(f)}return r[f]}}function Yt(e,n){if(e.dataFilter){n=e.dataFilter(n,e.dataType)}var r=e.dataTypes,i={},o,u,a=r.length,f,l=r[0],c,h,p,d,v;for(o=1;o<a;o++){if(o===1){for(u in e.converters){if(typeof u==="string"){i[u.toLowerCase()]=e.converters[u]}}}c=l;l=r[o];if(l==="*"){l=c}else{if(c!=="*"&&c!==l){h=c+" "+l;p=i[h]||i["* "+l];if(!p){v=t;for(d in i){f=d.split(" ");if(f[0]===c||f[0]==="*"){v=i[f[1]+" "+l];if(v){d=i[d];if(d===true){p=v}else{if(v===true){p=d}}break}}}}if(!(p||v)){s.error("No conversion from "+h.replace(" "," to "))}if(p!==true){n=p?p(n):v(d(n))}}}}return n}function sn(){try{return new e.XMLHttpRequest}catch(t){}}function on(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function vn(){setTimeout(mn,0);return dn=s.now()}function mn(){dn=t}function gn(e,t){var n={};s.each(pn.concat.apply([],pn.slice(0,t)),function(){n[this]=e});return n}function yn(e){if(!un[e]){var t=n.body,r=s("<"+e+">").appendTo(t),i=r.css("display");r.remove();if(i==="none"||i===""){if(!an){an=n.createElement("iframe");an.frameBorder=an.width=an.height=0}t.appendChild(an);if(!fn||!an.createElement){fn=(an.contentWindow||an.contentDocument).document;fn.write((n.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");fn.close()}r=fn.createElement(e);fn.body.appendChild(r);i=s.css(r,"display");t.removeChild(an)}un[e]=i}return un[e]}function En(e){return s.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}var n=e.document,r=e.navigator,i=e.location;var s=function(){function B(){if(i.isReady){return}try{n.documentElement.doScroll("left")}catch(e){setTimeout(B,1);return}i.ready()}var i=function(e,t){return new i.fn.init(e,t,u)},s=e.jQuery,o=e.$,u,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=/\S/,l=/^\s+/,c=/\s+$/,h=/\d/,p=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,d=/^[\],:{}\s]*$/,v=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,m=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,g=/(?:^|:|,)(?:\s*\[)+/g,y=/(webkit)[ \/]([\w.]+)/,b=/(opera)(?:.*version)?[ \/]([\w.]+)/,w=/(msie) ([\w.]+)/,E=/(mozilla)(?:.*? rv:([\w.]+))?/,S=/-([a-z]|[0-9])/ig,x=/^-ms-/,T=function(e,t){return(t+"").toUpperCase()},N=r.userAgent,C,k,L,A=Object.prototype.toString,O=Object.prototype.hasOwnProperty,M=Array.prototype.push,_=Array.prototype.slice,D=String.prototype.trim,P=Array.prototype.indexOf,H={};i.fn=i.prototype={constructor:i,init:function(e,r,s){var o,u,f,l;if(!e){return this}if(e.nodeType){this.context=this[0]=e;this.length=1;return this}if(e==="body"&&!r&&n.body){this.context=n;this[0]=n.body;this.selector=e;this.length=1;return this}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){o=[null,e,null]}else{o=a.exec(e)}if(o&&(o[1]||!r)){if(o[1]){r=r instanceof i?r[0]:r;l=r?r.ownerDocument||r:n;f=p.exec(e);if(f){if(i.isPlainObject(r)){e=[n.createElement(f[1])];i.fn.attr.call(e,r,true)}else{e=[l.createElement(f[1])]}}else{f=i.buildFragment([o[1]],[l]);e=(f.cacheable?i.clone(f.fragment):f.fragment).childNodes}return i.merge(this,e)}else{u=n.getElementById(o[2]);if(u&&u.parentNode){if(u.id!==o[2]){return s.find(e)}this.length=1;this[0]=u}this.context=n;this.selector=e;return this}}else{if(!r||r.jquery){return(r||s).find(e)}else{return this.constructor(r).find(e)}}}else{if(i.isFunction(e)){return s.ready(e)}}if(e.selector!==t){this.selector=e.selector;this.context=e.context}return i.makeArray(e,this)},selector:"",jquery:"1.7",length:0,size:function(){return this.length},toArray:function(){return _.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=this.constructor();if(i.isArray(e)){M.apply(r,e)}else{i.merge(r,e)}r.prevObject=this;r.context=this.context;if(t==="find"){r.selector=this.selector+(this.selector?" ":"")+n}else{if(t){r.selector=this.selector+"."+t+"("+n+")"}}return r},each:function(e,t){return i.each(this,e,t)},ready:function(e){i.bindReady();k.add(e);return this},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(_.apply(this,arguments),"slice",_.call(arguments).join(","))},map:function(e){return this.pushStack(i.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:M,sort:[].sort,splice:[].splice};i.fn.init.prototype=i.fn;i.extend=i.fn.extend=function(){var e,n,r,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=false;if(typeof a==="boolean"){c=a;a=arguments[1]||{};f=2}if(typeof a!=="object"&&!i.isFunction(a)){a={}}if(l===f){a=this;--f}for(;f<l;f++){if((e=arguments[f])!=null){for(n in e){r=a[n];s=e[n];if(a===s){continue}if(c&&s&&(i.isPlainObject(s)||(o=i.isArray(s)))){if(o){o=false;u=r&&i.isArray(r)?r:[]}else{u=r&&i.isPlainObject(r)?r:{}}a[n]=i.extend(c,u,s)}else{if(s!==t){a[n]=s}}}}}return a};i.extend({noConflict:function(t){if(e.$===i){e.$=o}if(t&&e.jQuery===i){e.jQuery=s}return i},isReady:false,readyWait:1,holdReady:function(e){if(e){i.readyWait++}else{i.ready(true)}},ready:function(e){if(e===true&&!--i.readyWait||e!==true&&!i.isReady){if(!n.body){return setTimeout(i.ready,1)}i.isReady=true;if(e!==true&&--i.readyWait>0){return}k.fireWith(n,[i]);if(i.fn.trigger){i(n).trigger("ready").unbind("ready")}}},bindReady:function(){if(k){return}k=i.Callbacks("once memory");if(n.readyState==="complete"){return setTimeout(i.ready,1)}if(n.addEventListener){n.addEventListener("DOMContentLoaded",L,false);e.addEventListener("load",i.ready,false)}else{if(n.attachEvent){n.attachEvent("onreadystatechange",L);e.attachEvent("onload",i.ready);var t=false;try{t=e.frameElement==null}catch(r){}if(n.documentElement.doScroll&&t){B()}}}},isFunction:function(e){return i.type(e)==="function"},isArray:Array.isArray||function(e){return i.type(e)==="array"},isWindow:function(e){return e&&typeof e==="object"&&"setInterval"in e},isNumeric:function(e){return e!=null&&h.test(e)&&!isNaN(e)},type:function(e){return e==null?String(e):H[A.call(e)]||"object"},isPlainObject:function(e){if(!e||i.type(e)!=="object"||e.nodeType||i.isWindow(e)){return false}try{if(e.constructor&&!O.call(e,"constructor")&&!O.call(e.constructor.prototype,"isPrototypeOf")){return false}}catch(n){return false}var r;for(r in e){}return r===t||O.call(e,r)},isEmptyObject:function(e){for(var t in e){return false}return true},error:function(e){throw e},parseJSON:function(t){if(typeof t!=="string"||!t){return null}t=i.trim(t);if(e.JSON&&e.JSON.parse){return e.JSON.parse(t)}if(d.test(t.replace(v,"@").replace(m,"]").replace(g,""))){return(new Function("return "+t))()}i.error("Invalid JSON: "+t)},noop:function(){},globalEval:function(t){if(t&&f.test(t)){(e.execScript||function(t){e["eval"].call(e,t)})(t)}},camelCase:function(e){return e.replace(x,"ms-").replace(S,T)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var s,o=0,u=e.length,a=u===t||i.isFunction(e);if(r){if(a){for(s in e){if(n.apply(e[s],r)===false){break}}}else{for(;o<u;){if(n.apply(e[o++],r)===false){break}}}}else{if(a){for(s in e){if(n.call(e[s],s,e[s])===false){break}}}else{for(;o<u;){if(n.call(e[o],o,e[o++])===false){break}}}}return e},trim:D?function(e){return e==null?"":D.call(e)}:function(e){return e==null?"":e.toString().replace(l,"").replace(c,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var r=i.type(e);if(e.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(e)){M.call(n,e)}else{i.merge(n,e)}}return n},inArray:function(e,t,n){var r;if(t){if(P){return P.call(t,e,n)}r=t.length;n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++){if(n in t&&t[n]===e){return n}}}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length==="number"){for(var s=n.length;i<s;i++){e[r++]=n[i]}}else{while(n[i]!==t){e[r++]=n[i++]}}e.length=r;return e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++){i=!!t(e[s],s);if(n!==i){r.push(e[s])}}return r},map:function(e,n,r){var s,o,u=[],a=0,f=e.length,l=e instanceof i||f!==t&&typeof f==="number"&&(f>0&&e[0]&&e[f-1]||f===0||i.isArray(e));if(l){for(;a<f;a++){s=n(e[a],a,r);if(s!=null){u[u.length]=s}}}else{for(o in e){s=n(e[o],o,r);if(s!=null){u[u.length]=s}}}return u.concat.apply([],u)},guid:1,access:function(e,n,r,s,o,u){var a=e.length;if(typeof n==="object"){for(var f in n){i.access(e,f,n[f],s,o,r)}return e}if(r!==t){s=!u&&s&&i.isFunction(r);for(var l=0;l<a;l++){o(e[l],n,s?r.call(e[l],l,o(e[l],n)):r,u)}return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=y.exec(e)||b.exec(e)||w.exec(e)||e.indexOf("compatible")<0&&E.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}i.extend(true,e,this);e.superclass=this;e.fn=e.prototype=this();e.fn.constructor=e;e.sub=this.sub;e.fn.init=function(r,s){if(s&&s instanceof i&&!(s instanceof e)){s=e(s)}return i.fn.init.call(this,r,s,t)};e.fn.init.prototype=e.fn;var t=e(n);return e},browser:{}});i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){H["[object "+t+"]"]=t.toLowerCase()});C=i.uaMatch(N);if(C.browser){i.browser[C.browser]=true;i.browser.version=C.version}if(i.browser.webkit){i.browser.safari=true}if(f.test(" ")){l=/^[\s\xA0]+/;c=/[\s\xA0]+$/}u=i(n);if(n.addEventListener){L=function(){n.removeEventListener("DOMContentLoaded",L,false);i.ready()}}else{if(n.attachEvent){L=function(){if(n.readyState==="complete"){n.detachEvent("onreadystatechange",L);i.ready()}}}}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return i})}return i}();var o={};s.Callbacks=function(e){e=e?o[e]||u(e):{};var n=[],r=[],i,a,f,l,c,h=function(t){var r,i,o,u,a;for(r=0,i=t.length;r<i;r++){o=t[r];u=s.type(o);if(u==="array"){h(o)}else{if(u==="function"){if(!e.unique||!d.has(o)){n.push(o)}}}}},p=function(t,s){s=s||[];i=!e.memory||[t,s];a=true;c=f||0;f=0;l=n.length;for(;n&&c<l;c++){if(n[c].apply(t,s)===false&&e.stopOnFalse){i=true;break}}a=false;if(n){if(!e.once){if(r&&r.length){i=r.shift();d.fireWith(i[0],i[1])}}else{if(i===true){d.disable()}else{n=[]}}}},d={add:function(){if(n){var e=n.length;h(arguments);if(a){l=n.length}else{if(i&&i!==true){f=e;p(i[0],i[1])}}}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++){for(var s=0;s<n.length;s++){if(t[r]===n[s]){if(a){if(s<=l){l--;if(s<=c){c--}}}n.splice(s--,1);if(e.unique){break}}}}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++){if(e===n[t]){return true}}}return false},empty:function(){n=[];return this},disable:function(){n=r=i=t;return this},disabled:function(){return!n},lock:function(){r=t;if(!i||i===true){d.disable()}return this},locked:function(){return!r},fireWith:function(t,n){if(r){if(a){if(!e.once){r.push([t,n])}}else{if(!(e.once&&i)){p(t,n)}}}return this},fire:function(){d.fireWith(this,arguments);return this},fired:function(){return!!i}};return d};var a=[].slice;s.extend({Deferred:function(e){var t=s.Callbacks("once memory"),n=s.Callbacks("once memory"),r=s.Callbacks("memory"),i="pending",o={resolve:t,reject:n,notify:r},u={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){a.done(e).fail(t).progress(n);return this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments)},pipe:function(e,t,n){return s.Deferred(function(r){s.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],o;if(s.isFunction(n)){a[e](function(){o=n.apply(this,arguments);if(o&&s.isFunction(o.promise)){o.promise().then(r.resolve,r.reject,r.notify)}else{r[i+"With"](this===a?r:this,[o])}})}else{a[e](r[i])}})}).promise()},promise:function(e){if(e==null){e=u}else{for(var t in u){e[t]=u[t]}}return e}},a=u.promise({}),f;for(f in o){a[f]=o[f].fire;a[f+"With"]=o[f].fireWith}a.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock);if(e){e.call(a,a)}return a}});s.support=function(){var e=n.createElement("div"),t=n.documentElement,r,i,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;e.setAttribute("className","t");e.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/><nav></nav>";r=e.getElementsByTagName("*");i=e.getElementsByTagName("a")[0];if(!r||!r.length||!i){return{}}o=n.createElement("select");u=o.appendChild(n.createElement("option"));a=e.getElementsByTagName("input")[0];l={leadingWhitespace:e.firstChild.nodeType===3,tbody:!e.getElementsByTagName("tbody").length,htmlSerialize:!!e.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,unknownElems:!!e.getElementsByTagName("nav").length,checkOn:a.value==="on",optSelected:u.selected,getSetAttribute:e.className!=="t",enctype:!!n.createElement("form").enctype,submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};a.checked=true;l.noCloneChecked=a.cloneNode(true).checked;o.disabled=true;l.optDisabled=!u.disabled;try{delete e.test}catch(E){l.deleteExpando=false}if(!e.addEventListener&&e.attachEvent&&e.fireEvent){e.attachEvent("onclick",function(){l.noCloneEvent=false});e.cloneNode(true).fireEvent("onclick")}a=n.createElement("input");a.value="t";a.setAttribute("type","radio");l.radioValue=a.value==="t";a.setAttribute("checked","checked");e.appendChild(a);c=n.createDocumentFragment();c.appendChild(e.lastChild);l.checkClone=c.cloneNode(true).cloneNode(true).lastChild.checked;e.innerHTML="";e.style.width=e.style.paddingLeft="1px";h=n.getElementsByTagName("body")[0];d=n.createElement(h?"div":"body");v={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(h){s.extend(v,{position:"absolute",left:"-999px",top:"-999px"})}for(b in v){d.style[b]=v[b]}d.appendChild(e);p=h||t;p.insertBefore(d,p.firstChild);l.appendChecked=a.checked;l.boxModel=e.offsetWidth===2;if("zoom"in e.style){e.style.display="inline";e.style.zoom=1;l.inlineBlockNeedsLayout=e.offsetWidth===2;e.style.display="";e.innerHTML="<div style='width:4px;'></div>";l.shrinkWrapBlocks=e.offsetWidth!==2}e.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";m=e.getElementsByTagName("td");w=m[0].offsetHeight===0;m[0].style.display="";m[1].style.display="none";l.reliableHiddenOffsets=w&&m[0].offsetHeight===0;e.innerHTML="";if(n.defaultView&&n.defaultView.getComputedStyle){f=n.createElement("div");f.style.width="0";f.style.marginRight="0";e.appendChild(f);l.reliableMarginRight=(parseInt((n.defaultView.getComputedStyle(f,null)||{marginRight:0}).marginRight,10)||0)===0}if(e.attachEvent){for(b in{submit:1,change:1,focusin:1}){y="on"+b;w=y in e;if(!w){e.setAttribute(y,"return;");w=typeof e[y]==="function"}l[b+"Bubbles"]=w}}s(function(){var e,t,r,i,o,u,a=1,f="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",c="visibility:hidden;border:0;",p="style='"+f+"border:5px solid #000;padding:0;'",v="<div "+p+"><div></div></div><table "+p+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";h=n.getElementsByTagName("body")[0];if(!h){return}e=n.createElement("div");e.style.cssText=c+"width:0;height:0;position:static;top:0;margin-top:"+a+"px";h.insertBefore(e,h.firstChild);d=n.createElement("div");d.style.cssText=f+c;d.innerHTML=v;e.appendChild(d);t=d.firstChild;r=t.firstChild;o=t.nextSibling.firstChild.firstChild;u={doesNotAddBorder:r.offsetTop!==5,doesAddBorderForTableAndCells:o.offsetTop===5};r.style.position="fixed";r.style.top="20px";u.fixedPosition=r.offsetTop===20||r.offsetTop===15;r.style.position=r.style.top="";t.style.overflow="hidden";t.style.position="relative";u.subtractsBorderForOverflowNotVisible=r.offsetTop===-5;u.doesNotIncludeMarginInBodyOffset=h.offsetTop!==a;h.removeChild(e);d=e=null;s.extend(l,u)});d.innerHTML="";p.removeChild(d);d=c=o=u=h=f=e=a=null;return l}();s.boxModel=s.support.boxModel;var f=/^(?:\{.*\}|\[.*\])$/,l=/([A-Z])/g;s.extend({cache:{},uuid:0,expando:"jQuery"+(s.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?s.cache[e[s.expando]]:e[s.expando];return!!e&&!h(e)},data:function(e,n,r,i){if(!s.acceptData(e)){return}var o,u,a,f=s.expando,l=typeof n==="string",c=e.nodeType,h=c?s.cache:e,p=c?e[s.expando]:e[s.expando]&&s.expando,d=n==="events";if((!p||!h[p]||!d&&!i&&!h[p].data)&&l&&r===t){return}if(!p){if(c){e[s.expando]=p=++s.uuid}else{p=s.expando}}if(!h[p]){h[p]={};if(!c){h[p].toJSON=s.noop}}if(typeof n==="object"||typeof n==="function"){if(i){h[p]=s.extend(h[p],n)}else{h[p].data=s.extend(h[p].data,n)}}o=u=h[p];if(!i){if(!u.data){u.data={}}u=u.data}if(r!==t){u[s.camelCase(n)]=r}if(d&&!u[n]){return o.events}if(l){a=u[n];if(a==null){a=u[s.camelCase(n)]}}else{a=u}return a},removeData:function(e,t,n){if(!s.acceptData(e)){return}var r,i,o,u=s.expando,a=e.nodeType,f=a?s.cache:e,l=a?e[s.expando]:s.expando;if(!f[l]){return}if(t){r=n?f[l]:f[l].data;if(r){if(s.isArray(t)){t=t}else{if(t in r){t=[t]}else{t=s.camelCase(t);if(t in r){t=[t]}else{t=t.split(" ")}}}for(i=0,o=t.length;i<o;i++){delete r[t[i]]}if(!(n?h:s.isEmptyObject)(r)){return}}}if(!n){delete f[l].data;if(!h(f[l])){return}}if(s.support.deleteExpando||!f.setInterval){delete f[l]}else{f[l]=null}if(a){if(s.support.deleteExpando){delete e[s.expando]}else{if(e.removeAttribute){e.removeAttribute(s.expando)}else{e[s.expando]=null}}}},_data:function(e,t,n){return s.data(e,t,n,true)},acceptData:function(e){if(e.nodeName){var t=s.noData[e.nodeName.toLowerCase()];if(t){return!(t===true||e.getAttribute("classid")!==t)}}return true}});s.fn.extend({data:function(e,n){var r,i,o,u=null;if(typeof e==="undefined"){if(this.length){u=s.data(this[0]);if(this[0].nodeType===1&&!s._data(this[0],"parsedAttrs")){i=this[0].attributes;for(var a=0,f=i.length;a<f;a++){o=i[a].name;if(o.indexOf("data-")===0){o=s.camelCase(o.substring(5));c(this[0],o,u[o])}}s._data(this[0],"parsedAttrs",true)}}return u}else{if(typeof e==="object"){return this.each(function(){s.data(this,e)})}}r=e.split(".");r[1]=r[1]?"."+r[1]:"";if(n===t){u=this.triggerHandler("getData"+r[1]+"!",[r[0]]);if(u===t&&this.length){u=s.data(this[0],e);u=c(this[0],e,u)}return u===t&&r[1]?this.data(r[0]):u}else{return this.each(function(){var t=s(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i);s.data(this,e,n);t.triggerHandler("changeData"+r[1]+"!",i)})}},removeData:function(e){return this.each(function(){s.removeData(this,e)})}});s.extend({_mark:function(e,t){if(e){t=(t||"fx")+"mark";s._data(e,t,(s._data(e,t)||0)+1)}},_unmark:function(e,t,n){if(e!==true){n=t;t=e;e=false}if(t){n=n||"fx";var r=n+"mark",i=e?0:(s._data(t,r)||1)-1;if(i){s._data(t,r,i)}else{s.removeData(t,r,true);p(t,n,"mark")}}},queue:function(e,t,n){var r;if(e){t=(t||"fx")+"queue";r=s._data(e,t);if(n){if(!r||s.isArray(n)){r=s._data(e,t,s.makeArray(n))}else{r.push(n)}}return r||[]}},dequeue:function(e,t){t=t||"fx";var n=s.queue(e,t),r=n.shift(),i={};if(r==="inprogress"){r=n.shift()}if(r){if(t==="fx"){n.unshift("inprogress")}s._data(e,t+".run",i);r.call(e,function(){s.dequeue(e,t)},i)}if(!n.length){s.removeData(e,t+"queue "+t+".run",true);p(e,t,"queue")}}});s.fn.extend({queue:function(e,n){if(typeof e!=="string"){n=e;e="fx"}if(n===t){return s.queue(this[0],e)}return this.each(function(){var t=s.queue(this,e,n);if(e==="fx"&&t[0]!=="inprogress"){s.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){s.dequeue(this,e)})},delay:function(e,t){e=s.fx?s.fx.speeds[e]||e:e;t=t||"fx";return this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])}});var d=/[\n\t\r]/g,v=/\s+/,m=/\r/g,g=/^(?:button|input)$/i,y=/^(?:button|input|object|select|textarea)$/i,b=/^a(?:rea)?$/i,w=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,E=s.support.getSetAttribute,S,x,T;s.fn.extend({attr:function(e,t){return s.access(this,e,t,true,s.attr)},removeAttr:function(e){return this.each(function(){s.removeAttr(this,e)})},addClass:function(e){var t,n,r,i,o,u,a;if(s.isFunction(e)){return this.each(function(t){s(this).addClass(e.call(this,t,this.className))})}if(e&&typeof e==="string"){t=e.split(v);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1){if(!i.className&&t.length===1){i.className=e}else{o=" "+i.className+" ";for(u=0,a=t.length;u<a;u++){if(!~o.indexOf(" "+t[u]+" ")){o+=t[u]+" "}}i.className=s.trim(o)}}}}return this},removeClass:function(e){var n,r,i,o,u,a,f;if(s.isFunction(e)){return this.each(function(t){s(this).removeClass(e.call(this,t,this.className))})}if(e&&typeof e==="string"||e===t){n=(e||"").split(v);for(r=0,i=this.length;r<i;r++){o=this[r];if(o.nodeType===1&&o.className){if(e){u=(" "+o.className+" ").replace(d," ");for(a=0,f=n.length;a<f;a++){u=u.replace(" "+n[a]+" "," ")}o.className=s.trim(u)}else{o.className=""}}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t==="boolean";if(s.isFunction(e)){return this.each(function(n){s(this).toggleClass(e.call(this,n,this.className,t),t)})}return this.each(function(){if(n==="string"){var i,o=0,u=s(this),a=t,f=e.split(v);while(i=f[o++]){a=r?a:!u.hasClass(i);u[a?"addClass":"removeClass"](i)}}else{if(n==="undefined"||n==="boolean"){if(this.className){s._data(this,"__className__",this.className)}this.className=this.className||e===false?"":s._data(this,"__className__")||""}}})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++){if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(d," ").indexOf(t)>-1){return true}}return false},val:function(e){var n,r,i,o=this[0];if(!arguments.length){if(o){n=s.valHooks[o.nodeName.toLowerCase()]||s.valHooks[o.type];if(n&&"get"in n&&(r=n.get(o,"value"))!==t){return r}r=o.value;return typeof r==="string"?r.replace(m,""):r==null?"":r}return t}i=s.isFunction(e);return this.each(function(r){var o=s(this),u;if(this.nodeType!==1){return}if(i){u=e.call(this,r,o.val())}else{u=e}if(u==null){u=""}else{if(typeof u==="number"){u+=""}else{if(s.isArray(u)){u=s.map(u,function(e){return e==null?"":e+""})}}}n=s.valHooks[this.nodeName.toLowerCase()]||s.valHooks[this.type];if(!n||!("set"in n)||n.set(this,u,"value")===t){this.value=u}})}});s.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,u=[],a=e.options,f=e.type==="select-one";if(o<0){return null}n=f?o:0;r=f?o+1:a.length;for(;n<r;n++){i=a[n];if(i.selected&&(s.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!s.nodeName(i.parentNode,"optgroup"))){t=s(i).val();if(f){return t}u.push(t)}}if(f&&!u.length&&a.length){return s(a[o]).val()}return u},set:function(e,t){var n=s.makeArray(t);s(e).find("option").each(function(){this.selected=s.inArray(s(this).val(),n)>=0});if(!n.length){e.selectedIndex=-1}return n}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(e,n,r,i){var o,u,a,f=e.nodeType;if(!e||f===3||f===8||f===2){return t}if(i&&n in s.attrFn){return s(e)[n](r)}if(!("getAttribute"in e)){return s.prop(e,n,r)}a=f!==1||!s.isXMLDoc(e);if(a){n=n.toLowerCase();u=s.attrHooks[n]||(w.test(n)?x:S)}if(r!==t){if(r===null){s.removeAttr(e,n);return t}else{if(u&&"set"in u&&a&&(o=u.set(e,r,n))!==t){return o}else{e.setAttribute(n,""+r);return r}}}else{if(u&&"get"in u&&a&&(o=u.get(e,n))!==null){return o}else{o=e.getAttribute(n);return o===null?t:o}}},removeAttr:function(e,t){var n,r,i,o,u=0;if(e.nodeType===1){r=(t||"").split(v);o=r.length;for(;u<o;u++){i=r[u].toLowerCase();n=s.propFix[i]||i;s.attr(e,i,"");e.removeAttribute(E?i:n);if(w.test(i)&&n in e){e[n]=false}}}},attrHooks:{type:{set:function(e,t){if(g.test(e.nodeName)&&e.parentNode){s.error("type property can't be changed")}else{if(!s.support.radioValue&&t==="radio"&&s.nodeName(e,"input")){var n=e.value;e.setAttribute("type",t);if(n){e.value=n}return t}}}},value:{get:function(e,t){if(S&&s.nodeName(e,"button")){return S.get(e,t)}return t in e?e.value:null},set:function(e,t,n){if(S&&s.nodeName(e,"button")){return S.set(e,t,n)}e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2){return t}u=a!==1||!s.isXMLDoc(e);if(u){n=s.propFix[n]||n;o=s.propHooks[n]}if(r!==t){if(o&&"set"in o&&(i=o.set(e,r,n))!==t){return i}else{return e[n]=r}}else{if(o&&"get"in o&&(i=o.get(e,n))!==null){return i}else{return e[n]}}},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):y.test(e.nodeName)||b.test(e.nodeName)&&e.href?0:t}}}});s.attrHooks.tabindex=s.propHooks.tabIndex;x={get:function(e,n){var r,i=s.prop(e,n);return i===true||typeof i!=="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==false?n.toLowerCase():t},set:function(e,t,n){var r;if(t===false){s.removeAttr(e,n)}else{r=s.propFix[n]||n;if(r in e){e[r]=true}e.setAttribute(n,n.toLowerCase())}return n}};if(!E){T={name:true,id:true};S=s.valHooks.button={get:function(e,n){var r;r=e.getAttributeNode(n);return r&&(T[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,r){var i=e.getAttributeNode(r);if(!i){i=n.createAttribute(r);e.setAttributeNode(i)}return i.nodeValue=t+""}};s.attrHooks.tabindex.set=S.set;s.each(["width","height"],function(e,t){s.attrHooks[t]=s.extend(s.attrHooks[t],{set:function(e,n){if(n===""){e.setAttribute(t,"auto");return n}}})});s.attrHooks.contenteditable={get:S.get,set:function(e,t,n){if(t===""){t="false"}S.set(e,t,n)}}}if(!s.support.hrefNormalized){s.each(["href","src","width","height"],function(e,n){s.attrHooks[n]=s.extend(s.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})})}if(!s.support.style){s.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}}if(!s.support.optSelected){s.propHooks.selected=s.extend(s.propHooks.selected,{get:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}return null}})}if(!s.support.enctype){s.propFix.enctype="encoding"}if(!s.support.checkOn){s.each(["radio","checkbox"],function(){s.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}s.each(["radio","checkbox"],function(){s.valHooks[this]=s.extend(s.valHooks[this],{set:function(e,t){if(s.isArray(t)){return e.checked=s.inArray(s(e).val(),t)>=0}}})});var N=/^([^\.]*)?(?:\.(.+))?$/,C=/\bhover(\.\S+)?/,k=/^key/,L=/^(?:mouse|contextmenu)|click/,A=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,O=function(e){var t=A.exec(e);if(t){t[1]=(t[1]||"").toLowerCase();t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")}return t},M=function(e,t){return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||e.id===t[2])&&(!t[3]||t[3].test(e.className))},_=function(e){return s.event.special.hover?e:e.replace(C,"mouseenter$1 mouseleave$1")};s.event={add:function(e,n,r,i,o){var u,a,f,l,c,h,p,d,v,m,g,y;if(e.nodeType===3||e.nodeType===8||!n||!r||!(u=s._data(e))){return}if(r.handler){v=r;r=v.handler}if(!r.guid){r.guid=s.guid++}f=u.events;if(!f){u.events=f={}}a=u.handle;if(!a){u.handle=a=function(e){return typeof s!=="undefined"&&(!e||s.event.triggered!==e.type)?s.event.dispatch.apply(a.elem,arguments):t};a.elem=e}n=_(n).split(" ");for(l=0;l<n.length;l++){c=N.exec(n[l])||[];h=c[1];p=(c[2]||"").split(".").sort();y=s.event.special[h]||{};h=(o?y.delegateType:y.bindType)||h;y=s.event.special[h]||{};d=s.extend({type:h,origType:c[1],data:i,handler:r,guid:r.guid,selector:o,namespace:p.join(".")},v);if(o){d.quick=O(o);if(!d.quick&&s.expr.match.POS.test(o)){d.isPositional=true}}g=f[h];if(!g){g=f[h]=[];g.delegateCount=0;if(!y.setup||y.setup.call(e,i,p,a)===false){if(e.addEventListener){e.addEventListener(h,a,false)}else{if(e.attachEvent){e.attachEvent("on"+h,a)}}}}if(y.add){y.add.call(e,d);if(!d.handler.guid){d.handler.guid=r.guid}}if(o){g.splice(g.delegateCount++,0,d)}else{g.push(d)}s.event.global[h]=true}e=null},global:{},remove:function(e,t,n,r){var i=s.hasData(e)&&s._data(e),o,u,a,f,l,c,h,p,d,v,m;if(!i||!(h=i.events)){return}t=_(t||"").split(" ");for(o=0;o<t.length;o++){u=N.exec(t[o])||[];a=u[1];f=u[2];if(!a){f=f?"."+f:"";for(c in h){s.event.remove(e,c+f,n,r)}return}p=s.event.special[a]||{};a=(r?p.delegateType:p.bindType)||a;v=h[a]||[];l=v.length;f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;if(n||f||r||p.remove){for(c=0;c<v.length;c++){m=v[c];if(!n||n.guid===m.guid){if(!f||f.test(m.namespace)){if(!r||r===m.selector||r==="**"&&m.selector){v.splice(c--,1);if(m.selector){v.delegateCount--}if(p.remove){p.remove.call(e,m)}}}}}}else{v.length=0}if(v.length===0&&l!==v.length){if(!p.teardown||p.teardown.call(e,f)===false){s.removeEvent(e,a,i.handle)}delete h[a]}}if(s.isEmptyObject(h)){d=i.handle;if(d){d.elem=null}s.removeData(e,["events","handle"],true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(n,r,i,o){if(i&&(i.nodeType===3||i.nodeType===8)){return}var u=n.type||n,a=[],f,l,c,h,p,d,v,m,g,y;if(u.indexOf("!")>=0){u=u.slice(0,-1);l=true}if(u.indexOf(".")>=0){a=u.split(".");u=a.shift();a.sort()}if((!i||s.event.customEvent[u])&&!s.event.global[u]){return}n=typeof n==="object"?n[s.expando]?n:new s.Event(u,n):new s.Event(u);n.type=u;n.isTrigger=true;n.exclusive=l;n.namespace=a.join(".");n.namespace_re=n.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;d=u.indexOf(":")<0?"on"+u:"";if(o||!i){n.preventDefault()}if(!i){f=s.cache;for(c in f){if(f[c].events&&f[c].events[u]){s.event.trigger(n,r,f[c].handle.elem,true)}}return}n.result=t;if(!n.target){n.target=i}r=r!=null?s.makeArray(r):[];r.unshift(n);v=s.event.special[u]||{};if(v.trigger&&v.trigger.apply(i,r)===false){return}g=[[i,v.bindType||u]];if(!o&&!v.noBubble&&!s.isWindow(i)){y=v.delegateType||u;p=null;for(h=i.parentNode;h;h=h.parentNode){g.push([h,y]);p=h}if(p&&p===i.ownerDocument){g.push([p.defaultView||p.parentWindow||e,y])}}for(c=0;c<g.length;c++){h=g[c][0];n.type=g[c][1];m=(s._data(h,"events")||{})[n.type]&&s._data(h,"handle");if(m){m.apply(h,r)}m=d&&h[d];if(m&&s.acceptData(h)){m.apply(h,r)}if(n.isPropagationStopped()){break}}n.type=u;if(!n.isDefaultPrevented()){if((!v._default||v._default.apply(i.ownerDocument,r)===false)&&!(u==="click"&&s.nodeName(i,"a"))&&s.acceptData(i)){if(d&&i[u]&&(u!=="focus"&&u!=="blur"||n.target.offsetWidth!==0)&&!s.isWindow(i)){p=i[d];if(p){i[d]=null}s.event.triggered=u;i[u]();s.event.triggered=t;if(p){i[d]=p}}}}return n.result},dispatch:function(n){n=s.event.fix(n||e.event);var r=(s._data(this,"events")||{})[n.type]||[],i=r.delegateCount,o=[].slice.call(arguments,0),u=!n.exclusive&&!n.namespace,a=(s.event.special[n.type]||{}).handle,f=[],l,c,h,p,d,v,m,g,y,b,w;o[0]=n;n.delegateTarget=this;if(i&&!n.target.disabled&&!(n.button&&n.type==="click")){for(h=n.target;h!=this;h=h.parentNode||this){d={};m=[];for(l=0;l<i;l++){g=r[l];y=g.selector;b=d[y];if(g.isPositional){b=(b||(d[y]=s(y))).index(h)>=0}else{if(b===t){b=d[y]=g.quick?M(h,g.quick):s(h).is(y)}}if(b){m.push(g)}}if(m.length){f.push({elem:h,matches:m})}}}if(r.length>i){f.push({elem:this,matches:r.slice(i)})}for(l=0;l<f.length&&!n.isPropagationStopped();l++){v=f[l];n.currentTarget=v.elem;for(c=0;c<v.matches.length&&!n.isImmediatePropagationStopped();c++){g=v.matches[c];if(u||!n.namespace&&!g.namespace||n.namespace_re&&n.namespace_re.test(g.namespace)){n.data=g.data;n.handleObj=g;p=(a||g.handler).apply(v.elem,o);if(p!==t){n.result=p;if(p===false){n.preventDefault();n.stopPropagation()}}}}}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){if(e.which==null){e.which=t.charCode!=null?t.charCode:t.keyCode}return e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement wheelDelta".split(" "),filter:function(e,r){var i,s,o,u=r.button,a=r.fromElement;if(e.pageX==null&&r.clientX!=null){i=e.target.ownerDocument||n;s=i.documentElement;o=i.body;e.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0);e.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)}if(!e.relatedTarget&&a){e.relatedTarget=a===e.target?r.toElement:a}if(!e.which&&u!==t){e.which=u&1?1:u&2?3:u&4?2:0}return e}},fix:function(e){if(e[s.expando]){return e}var r,i,o=e,u=s.event.fixHooks[e.type]||{},a=u.props?this.props.concat(u.props):this.props;e=s.Event(o);for(r=a.length;r;){i=a[--r];e[i]=o[i]}if(!e.target){e.target=o.srcElement||n}if(e.target.nodeType===3){e.target=e.target.parentNode}if(e.metaKey===t){e.metaKey=e.ctrlKey}return u.filter?u.filter(e,o):e},special:{ready:{setup:s.bindReady},focus:{delegateType:"focusin",noBubble:true},blur:{delegateType:"focusout",noBubble:true},beforeunload:{setup:function(e,t,n){if(s.isWindow(this)){this.onbeforeunload=n}},teardown:function(e,t){if(this.onbeforeunload===t){this.onbeforeunload=null}}}}};s.event.handle=s.event.dispatch;s.removeEvent=n.removeEventListener?function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}}:function(e,t,n){if(e.detachEvent){e.detachEvent("on"+t,n)}};s.Event=function(e,t){if(!(this instanceof s.Event)){return new s.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.returnValue===false||e.defaultPrevented&&e.defaultPrevented()?P:D}else{this.type=e}if(t){s.extend(this,t)}this.timeStamp=e&&e.timeStamp||s.now();this[s.expando]=true};s.Event.prototype={preventDefault:function(){this.isDefaultPrevented=P;var e=this.originalEvent;if(!e){return}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=P;var e=this.originalEvent;if(!e){return}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true},isDefaultPrevented:D,isPropagationStopped:D,isImmediatePropagationStopped:D};s.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){s.event.special[e]=s.event.special[t]={delegateType:t,bindType:t,handle:function(e){var t=this,n=e.relatedTarget,r=e.handleObj,i=r.selector,o,u;if(!n||r.origType===e.type||n!==t&&!s.contains(t,n)){o=e.type;e.type=r.origType;u=r.handler.apply(this,arguments);e.type=o}return u}}});s.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e==="object"){if(typeof n!=="string"){r=n;n=t}for(a in e){this.on(a,n,r,e[a],o)}return this}if(r==null&&i==null){i=n;r=n=t}else{if(i==null){if(typeof n==="string"){i=r;r=t}else{i=r;r=n;n=t}}}if(i===false){i=D}else{if(!i){return this}}if(o===1){u=i;i=function(e){s().off(e);return u.apply(this,arguments)};i.guid=u.guid||(u.guid=s.guid++)}return this.each(function(){s.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;s(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler);return this}if(typeof e==="object"){for(var o in e){this.off(o,n,e[o])}return this}if(n===false||typeof n==="function"){r=n;n=t}if(r===false){r=D}return this.each(function(){s.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){s(this.context).on(e,this.selector,t,n);return this},die:function(e,t){s(this.context).off(e,this.selector||"**",t);return this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){s.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0]){return s.event.trigger(e,t,this[0],true)}},toggle:function(e){var t=arguments,n=e.guid||s.guid++,r=0,i=function(n){var i=(s._data(this,"lastToggle"+e.guid)||0)%r;s._data(this,"lastToggle"+e.guid,i+1);n.preventDefault();return t[i].apply(this,arguments)||false};i.guid=n;while(r<t.length){t[r++].guid=n}return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){s.fn[t]=function(e,n){if(n==null){n=e;e=null}return arguments.length>0?this.bind(t,e,n):this.trigger(t)};if(s.attrFn){s.attrFn[t]=true}if(k.test(t)){s.event.fixHooks[t]=s.event.keyHooks}if(L.test(t)){s.event.fixHooks[t]=s.event.mouseHooks}});(function(){function S(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=false;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}if(f.nodeType===1&&!o){f[r]=n;f.sizset=u}if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}i[u]=l}}}function x(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=false;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}if(f.nodeType===1){if(!o){f[r]=n;f.sizset=u}if(typeof t!=="string"){if(f===t){l=true;break}}else{if(h.filter(t,[f]).length>0){l=f;break}}}f=f[e]}i[u]=l}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),i=0,o=Object.prototype.toString,u=false,a=true,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){a=false;return 0});var h=function(t,r,i,s){i=i||[];r=r||n;var u=r;if(r.nodeType!==1&&r.nodeType!==9){return[]}if(!t||typeof t!=="string"){return i}var a,f,l,c,p,m,g,b,w=true,E=h.isXML(r),S=[],x=t;do{e.exec("");a=e.exec(x);if(a){x=a[3];S.push(a[1]);if(a[2]){c=a[3];break}}}while(a);if(S.length>1&&v.exec(t)){if(S.length===2&&d.relative[S[0]]){f=T(S[0]+S[1],r,s)}else{f=d.relative[S[0]]?[r]:h(S.shift(),r);while(S.length){t=S.shift();if(d.relative[t]){t+=S.shift()}f=T(t,f,s)}}}else{if(!s&&S.length>1&&r.nodeType===9&&!E&&d.match.ID.test(S[0])&&!d.match.ID.test(S[S.length-1])){p=h.find(S.shift(),r,E);r=p.expr?h.filter(p.expr,p.set)[0]:p.set[0]}if(r){p=s?{expr:S.pop(),set:y(s)}:h.find(S.pop(),S.length===1&&(S[0]==="~"||S[0]==="+")&&r.parentNode?r.parentNode:r,E);f=p.expr?h.filter(p.expr,p.set):p.set;if(S.length>0){l=y(f)}else{w=false}while(S.length){m=S.pop();g=m;if(!d.relative[m]){m=""}else{g=S.pop()}if(g==null){g=r}d.relative[m](l,g,E)}}else{l=S=[]}}if(!l){l=f}if(!l){h.error(m||t)}if(o.call(l)==="[object Array]"){if(!w){i.push.apply(i,l)}else{if(r&&r.nodeType===1){for(b=0;l[b]!=null;b++){if(l[b]&&(l[b]===true||l[b].nodeType===1&&h.contains(r,l[b]))){i.push(f[b])}}}else{for(b=0;l[b]!=null;b++){if(l[b]&&l[b].nodeType===1){i.push(f[b])}}}}}else{y(l,i)}if(c){h(c,u,i,s);h.uniqueSort(i)}return i};h.uniqueSort=function(e){if(w){u=a;e.sort(w);if(u){for(var t=1;t<e.length;t++){if(e[t]===e[t-1]){e.splice(t--,1)}}}}return e};h.matches=function(e,t){return h(e,null,null,t)};h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0};h.find=function(e,t,n){var r,i,s,o,u,a;if(!e){return[]}for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1];o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,"");r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}if(!r){r=typeof t.getElementsByTagName!=="undefined"?t.getElementsByTagName("*"):[]}return{set:r,expr:e}};h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter){if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u];c=s[1];o=false;s.splice(1,1);if(c.substr(c.length-1)==="\\"){continue}if(y===g){g=[]}if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s){o=a=true}else{if(s===true){continue}}}if(s){for(p=0;(f=y[p])!=null;p++){if(f){a=l(f,s,p,y);v=i^a;if(r&&a!=null){if(v){o=true}else{y[p]=false}}else{if(v){g.push(f);o=true}}}}}if(a!==t){if(!r){y=g}e=e.replace(d.match[u],"");if(!o){return[]}break}}}if(e===m){if(o==null){h.error(e)}else{break}}m=e}return y};h.error=function(e){throw"Syntax error, unrecognized expression: "+e};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1){if(typeof e.textContent==="string"){return e.textContent}else{if(typeof e.innerText==="string"){return e.innerText.replace(l,"")}else{for(e=e.firstChild;e;e=e.nextSibling){i+=p(e)}}}}else{if(r===3||r===4){return e.nodeValue}}}else{for(t=0;n=e[t];t++){if(n.nodeType!==8){i+=p(n)}}}return i};var d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t==="string",r=n&&!c.test(t),i=n&&!r;if(r){t=t.toLowerCase()}for(var s=0,o=e.length,u;s<o;s++){if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1){}e[s]=i||u&&u.nodeName.toLowerCase()===t?u||false:u===t}}if(i){h.filter(t,e,true)}},">":function(e,t){var n,r=typeof t==="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:false}}}else{for(;i<s;i++){n=e[i];if(n){e[i]=r?n.parentNode:n.parentNode===t}}if(r){h.filter(t,e,true)}}},"":function(e,t,n){var r,s=i++,o=x;if(typeof t==="string"&&!c.test(t)){t=t.toLowerCase();r=t;o=S}o("parentNode",t,s,e,r,n)},"~":function(e,t,n){var r,s=i++,o=x;if(typeof t==="string"&&!c.test(t)){t=t.toLowerCase();r=t;o=S}o("previousSibling",t,s,e,r,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!=="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!=="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++){if(r[i].getAttribute("name")===e[1]){n.push(r[i])}}return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s){return e}for(var o=0,u;(u=t[o])!=null;o++){if(u){if(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)){if(!n){r.push(u)}}else{if(n){t[o]=false}}}}return false},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){h.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0;e[3]=t[3]-0}else{if(e[2]){h.error(e[0])}}e[0]=i++;return e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");if(!s&&d.attrMap[o]){e[1]=d.attrMap[o]}e[4]=(e[4]||e[5]||"").replace(f,"");if(e[2]==="~="){e[4]=" "+e[4]+" "}return e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if((e.exec(t[3])||"").length>1||/^\w/.test(t[3])){t[3]=h(t[3],null,null,n)}else{var o=h.filter(t[3],n,r,true^s);if(!r){i.push.apply(i,o)}return false}}else{if(d.match.POS.test(t[0])||d.match.CHILD.test(t[0])){return true}}return t},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s){return s(e,n,t,r)}else{if(i==="contains"){return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0}else{if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++){if(o[u]===e){return false}}return true}else{h.error(i)}}}},CHILD:function(e,t){var n,i,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling){if(c.nodeType===1){return false}}if(l==="first"){return true}c=e;case"last":while(c=c.nextSibling){if(c.nodeType===1){return false}}return true;case"nth":n=t[2];i=t[3];if(n===1&&i===0){return true}s=t[0];o=e.parentNode;if(o&&(o[r]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling){if(c.nodeType===1){c.nodeIndex=++a}}o[r]=s}f=e.nodeIndex-i;if(n===0){return f===0}else{return f%n===0&&f/n>=0}}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:!o?i&&r!==false:s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":false},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s){return s(e,n,t,r)}}}};var v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match){d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source);d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m))}var y=function(e,t){e=Array.prototype.slice.call(e,0);if(t){t.push.apply(t,e);return t}return e};try{Array.prototype.slice.call(n.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]"){Array.prototype.push.apply(r,e)}else{if(typeof e.length==="number"){for(var i=e.length;n<i;n++){r.push(e[n])}}else{for(;e[n];n++){r.push(e[n])}}}return r}}var w,E;if(n.documentElement.compareDocumentPosition){w=function(e,t){if(e===t){u=true;return 0}if(!e.compareDocumentPosition||!t.compareDocumentPosition){return e.compareDocumentPosition?-1:1}return e.compareDocumentPosition(t)&4?-1:1}}else{w=function(e,t){if(e===t){u=true;return 0}else{if(e.sourceIndex&&t.sourceIndex){return e.sourceIndex-t.sourceIndex}}var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a){return E(e,t)}else{if(!o){return-1}else{if(!a){return 1}}}while(f){i.unshift(f);f=f.parentNode}f=a;while(f){s.unshift(f);f=f.parentNode}n=i.length;r=s.length;for(var l=0;l<n&&l<r;l++){if(i[l]!==s[l]){return E(i[l],s[l])}}return l===n?E(e,s[l],-1):E(i[l],t,1)};E=function(e,t,n){if(e===t){return n}var r=e.nextSibling;while(r){if(r===t){return-1}r=r.nextSibling}return 1}}(function(){var e=n.createElement("div"),r="script"+(new Date).getTime(),i=n.documentElement;e.innerHTML="<a name='"+r+"'/>";i.insertBefore(e,i.firstChild);if(n.getElementById(r)){d.find.ID=function(e,n,r){if(typeof n.getElementById!=="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!=="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}};d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}}i.removeChild(e);i=e=null})();(function(){var e=n.createElement("div");e.appendChild(n.createComment(""));if(e.getElementsByTagName("*").length>0){d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++){if(n[i].nodeType===1){r.push(n[i])}}n=r}return n}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){d.attrHandle.href=function(e){return e.getAttribute("href",2)}}e=null})();if(n.querySelectorAll){(function(){var e=h,t=n.createElement("div"),r="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0){return}h=function(t,i,s,o){i=i||n;if(!o&&!h.isXML(i)){var u=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(u&&(i.nodeType===1||i.nodeType===9)){if(u[1]){return y(i.getElementsByTagName(t),s)}else{if(u[2]&&d.find.CLASS&&i.getElementsByClassName){return y(i.getElementsByClassName(u[2]),s)}}}if(i.nodeType===9){if(t==="body"&&i.body){return y([i.body],s)}else{if(u&&u[3]){var a=i.getElementById(u[3]);if(a&&a.parentNode){if(a.id===u[3]){return y([a],s)}}else{return y([],s)}}}try{return y(i.querySelectorAll(t),s)}catch(f){}}else{if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var l=i,c=i.getAttribute("id"),p=c||r,v=i.parentNode,m=/^\s*[+~]/.test(t);if(!c){i.setAttribute("id",p)}else{p=p.replace(/'/g,"\\$&")}if(m&&v){i=i.parentNode}try{if(!m||v){return y(i.querySelectorAll("[id='"+p+"'] "+t),s)}}catch(g){}finally{if(!c){l.removeAttribute("id")}}}}}return e(t,i,s,o)};for(var i in e){h[i]=e[i]}t=null})()}(function(){var e=n.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var r=!t.call(n.createElement("div"),"div"),i=false;try{t.call(n.documentElement,"[test!='']:sizzle")}catch(s){i=true}h.matchesSelector=function(e,n){n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e)){try{if(i||!d.match.PSEUDO.test(n)&&!/!=/.test(n)){var s=t.call(e,n);if(s||!r||e.document&&e.document.nodeType!==11){return s}}}catch(o){}}return h(n,null,null,[e]).length>0}}})();(function(){var e=n.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}d.order.splice(1,0,"CLASS");d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!=="undefined"&&!n){return t.getElementsByClassName(e[1])}};e=null})();if(n.documentElement.contains){h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):true)}}else{if(n.documentElement.compareDocumentPosition){h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}}else{h.contains=function(){return false}}}h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":false};var T=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e)){s+=r[0];e=e.replace(d.match.PSEUDO,"")}e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++){h(e,o[u],i,n)}return h.filter(s,i)};h.attr=s.attr;h.selectors.attrMap={};s.find=h;s.expr=h.selectors;s.expr[":"]=s.expr.filters;s.unique=h.uniqueSort;s.text=h.getText;s.isXMLDoc=h.isXML;s.contains=h.contains})();var H=/Until$/,B=/^(?:parents|prevUntil|prevAll)/,j=/,/,F=/^.[^:#\[\.,]*$/,I=Array.prototype.slice,q=s.expr.match.POS,R={children:true,contents:true,next:true,prev:true};s.fn.extend({find:function(e){var t=this,n,r;if(typeof e!=="string"){return s(e).filter(function(){for(n=0,r=t.length;n<r;n++){if(s.contains(t[n],this)){return true}}})}var i=this.pushStack("","find",e),o,u,a;for(n=0,r=this.length;n<r;n++){o=i.length;s.find(e,this[n],i);if(n>0){for(u=o;u<i.length;u++){for(a=0;a<o;a++){if(i[a]===i[u]){i.splice(u--,1);break}}}}}return i},has:function(e){var t=s(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++){if(s.contains(this,t[e])){return true}}})},not:function(e){return this.pushStack(z(this,e,false),"not",e)},filter:function(e){return this.pushStack(z(this,e,true),"filter",e)},is:function(e){return!!e&&(typeof e==="string"?q.test(e)?s(e,this.context).index(this[0])>=0:s.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,o=this[0];if(s.isArray(e)){var u=1;while(o&&o.ownerDocument&&o!==t){for(r=0;r<e.length;r++){if(s(o).is(e[r])){n.push({selector:e[r],elem:o,level:u})}}o=o.parentNode;u++}return n}var a=q.test(e)||typeof e!=="string"?s(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){o=this[r];while(o){if(a?a.index(o)>-1:s.find.matchesSelector(o,e)){n.push(o);break}else{o=o.parentNode;if(!o||!o.ownerDocument||o===t||o.nodeType===11){break}}}}n=n.length>1?s.unique(n):n;return this.pushStack(n,"closest",e)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof e==="string"){return s.inArray(this[0],s(e))}return s.inArray(e.jquery?e[0]:e,this)},add:function(e,t){var n=typeof e==="string"?s(e,t):s.makeArray(e&&e.nodeType?[e]:e),r=s.merge(this.get(),n);return this.pushStack(U(n[0])||U(r[0])?r:s.unique(r))},andSelf:function(){return this.add(this.prevObject)}});s.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return s.dir(e,"parentNode")},parentsUntil:function(e,t,n){return s.dir(e,"parentNode",n)},next:function(e){return s.nth(e,2,"nextSibling")},prev:function(e){return s.nth(e,2,"previousSibling")},nextAll:function(e){return s.dir(e,"nextSibling")},prevAll:function(e){return s.dir(e,"previousSibling")},nextUntil:function(e,t,n){return s.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return s.dir(e,"previousSibling",n)},siblings:function(e){return s.sibling(e.parentNode.firstChild,e)},children:function(e){return s.sibling(e.firstChild)},contents:function(e){return s.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:s.makeArray(e.childNodes)}},function(e,t){s.fn[e]=function(n,r){var i=s.map(this,t,n),o=I.call(arguments);if(!H.test(e)){r=n}if(r&&typeof r==="string"){i=s.filter(r,i)}i=this.length>1&&!R[e]?s.unique(i):i;if((this.length>1||j.test(r))&&B.test(e)){i=i.reverse()}return this.pushStack(i,e,o.join(","))}});s.extend({filter:function(e,t,n){if(n){e=":not("+e+")"}return t.length===1?s.find.matchesSelector(t[0],e)?[t[0]]:[]:s.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&o.nodeType!==9&&(r===t||o.nodeType!==1||!s(o).is(r))){if(o.nodeType===1){i.push(o)}o=o[n]}return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n]){if(e.nodeType===1&&++i===t){break}}return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){n.push(e)}}return n}});var X="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",V=/ jQuery\d+="(?:\d+|null)"/g,$=/^\s+/,J=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,K=/<([\w:]+)/,Q=/<tbody/i,G=/<|&#?\w+;/,Y=/<(?:script|style)/i,Z=/<(?:script|object|embed|option|style)/i,et=new RegExp("<(?:"+X.replace(" ","|")+")","i"),tt=/checked\s*(?:[^=]|=\s*.checked.)/i,nt=/\/(java|ecma)script/i,rt=/^\s*<!(?:\[CDATA\[|\-\-)/,it={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},st=W(n);it.optgroup=it.option;it.tbody=it.tfoot=it.colgroup=it.caption=it.thead;it.th=it.td;if(!s.support.htmlSerialize){it._default=[1,"div<div>","</div>"]}s.fn.extend({text:function(e){if(s.isFunction(e)){return this.each(function(t){var n=s(this);n.text(e.call(this,t,n.text()))})}if(typeof e!=="object"&&e!==t){return this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(e))}return s.text(this)},wrapAll:function(e){if(s.isFunction(e)){return this.each(function(t){s(this).wrapAll(e.call(this,t))})}if(this[0]){var t=s(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1){e=e.firstChild}return e}).append(this)}return this},wrapInner:function(e){if(s.isFunction(e)){return this.each(function(t){s(this).wrapInner(e.call(this,t))})}return this.each(function(){var t=s(this),n=t.contents();if(n.length){n.wrapAll(e)}else{t.append(e)}})},wrap:function(e){return this.each(function(){s(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){if(!s.nodeName(this,"body")){s(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.insertBefore(e,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(e){this.parentNode.insertBefore(e,this)})}else{if(arguments.length){var e=s(arguments[0]);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(e){this.parentNode.insertBefore(e,this.nextSibling)})}else{if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,s(arguments[0]).toArray());return e}}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++){if(!e||s.filter(e,[r]).length){if(!t&&r.nodeType===1){s.cleanData(r.getElementsByTagName("*"));s.cleanData([r])}if(r.parentNode){r.parentNode.removeChild(r)}}}return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){if(t.nodeType===1){s.cleanData(t.getElementsByTagName("*"))}while(t.firstChild){t.removeChild(t.firstChild)}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return s.clone(this,e,t)})},html:function(e){if(e===t){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(V,""):null}else{if(typeof e==="string"&&!Y.test(e)&&(s.support.leadingWhitespace||!$.test(e))&&!it[(K.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(J,"<$1></$2>");try{for(var n=0,r=this.length;n<r;n++){if(this[n].nodeType===1){s.cleanData(this[n].getElementsByTagName("*"));this[n].innerHTML=e}}}catch(i){this.empty().append(e)}}else{if(s.isFunction(e)){this.each(function(t){var n=s(this);n.html(e.call(this,t,n.html()))})}else{this.empty().append(e)}}}return this},detach:function(e){return this.remove(e,true)},domManip:function(e,n,r){var i,o,u,a,f=e[0],l=[];if(!s.support.checkClone&&arguments.length===3&&typeof f==="string"&&tt.test(f)){return this.each(function(){s(this).domManip(e,n,r,true)})}if(s.isFunction(f)){return this.each(function(i){var o=s(this);e[0]=f.call(this,i,n?o.html():t);o.domManip(e,n,r)})}if(this[0]){a=f&&f.parentNode;if(s.support.parentNode&&a&&a.nodeType===11&&a.childNodes.length===this.length){i={fragment:a}}else{i=s.buildFragment(e,this,l)}u=i.fragment;if(u.childNodes.length===1){o=u=u.firstChild}else{o=u.firstChild}if(o){n=n&&s.nodeName(o,"tr");for(var c=0,h=this.length,p=h-1;c<h;c++){r.call(n?ot(this[c],o):this[c],i.cacheable||h>1&&c<p?s.clone(u,true,true):u)}}if(l.length){s.each(l,ct)}}return this}});s.buildFragment=function(e,t,r){var i,o,u,a,f=e[0];if(t&&t[0]){a=t[0].ownerDocument||t[0]}if(!a.createDocumentFragment){a=n}if(e.length===1&&typeof f==="string"&&f.length<512&&a===n&&f.charAt(0)==="<"&&!Z.test(f)&&(s.support.checkClone||!tt.test(f))&&!s.support.unknownElems&&et.test(f)){o=true;u=s.fragments[f];if(u&&u!==1){i=u}}if(!i){i=a.createDocumentFragment();s.clean(e,a,i,r)}if(o){s.fragments[f]=u?i:1}return{fragment:i,cacheable:o}};s.fragments={};s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){s.fn[e]=function(n){var r=[],i=s(n),o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&i.length===1){i[t](this[0]);return this}else{for(var u=0,a=i.length;u<a;u++){var f=(u>0?this.clone(true):this).get();s(i[u])[t](f);r=r.concat(f)}return this.pushStack(r,e,i.selector)}}});s.extend({clean:function(e,t,r,i){var o;t=t||n;if(typeof t.createElement==="undefined"){t=t.ownerDocument||t[0]&&t[0].ownerDocument||n}var u=[],a;for(var f=0,l;(l=e[f])!=null;f++){if(typeof l==="number"){l+=""}if(!l){continue}if(typeof l==="string"){if(!G.test(l)){l=t.createTextNode(l)}else{l=l.replace(J,"<$1></$2>");var c=(K.exec(l)||["",""])[1].toLowerCase(),h=it[c]||it._default,p=h[0],d=t.createElement("div");if(t===n){st.appendChild(d)}else{W(t).appendChild(d)}d.innerHTML=h[1]+l+h[2];while(p--){d=d.lastChild}if(!s.support.tbody){var v=Q.test(l),m=c==="table"&&!v?d.firstChild&&d.firstChild.childNodes:h[1]==="<table>"&&!v?d.childNodes:[];for(a=m.length-1;a>=0;--a){if(s.nodeName(m[a],"tbody")&&!m[a].childNodes.length){m[a].parentNode.removeChild(m[a])}}}if(!s.support.leadingWhitespace&&$.test(l)){d.insertBefore(t.createTextNode($.exec(l)[0]),d.firstChild)}l=d.childNodes}}var g;if(!s.support.appendChecked){if(l[0]&&typeof (g=l.length)==="number"){for(a=0;a<g;a++){lt(l[a])}}else{lt(l)}}if(l.nodeType){u.push(l)}else{u=s.merge(u,l)}}if(r){o=function(e){return!e.type||nt.test(e.type)};for(f=0;u[f];f++){if(i&&s.nodeName(u[f],"script")&&(!u[f].type||u[f].type.toLowerCase()==="text/javascript")){i.push(u[f].parentNode?u[f].parentNode.removeChild(u[f]):u[f])}else{if(u[f].nodeType===1){var y=s.grep(u[f].getElementsByTagName("script"),o);u.splice.apply(u,[f+1,0].concat(y))}r.appendChild(u[f])}}}return u},cleanData:function(e){var t,n,r=s.cache,i=s.event.special,o=s.support.deleteExpando;for(var u=0,a;(a=e[u])!=null;u++){if(a.nodeName&&s.noData[a.nodeName.toLowerCase()]){continue}n=a[s.expando];if(n){t=r[n];if(t&&t.events){for(var f in t.events){if(i[f]){s.event.remove(a,f)}else{s.removeEvent(a,f,t.handle)}}if(t.handle){t.handle.elem=null}}if(o){delete a[s.expando]}else{if(a.removeAttribute){a.removeAttribute(s.expando)}}delete r[n]}}}});var ht=/alpha\([^)]*\)/i,pt=/opacity=([^)]*)/,dt=/([A-Z]|^ms)/g,vt=/^-?\d+(?:px)?$/i,mt=/^-?\d/,gt=/^([\-+])=([\-+.\de]+)/,yt={position:"absolute",visibility:"hidden",display:"block"},bt=["Left","Right"],wt=["Top","Bottom"],Et,St,xt;s.fn.css=function(e,n){if(arguments.length===2&&n===t){return this}return s.access(this,e,n,true,function(e,n,r){return r!==t?s.style(e,n,r):s.css(e,n)})};s.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Et(e,"opacity","opacity");return n===""?"1":n}else{return e.style.opacity}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":s.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var o,u,a=s.camelCase(n),f=e.style,l=s.cssHooks[a];n=s.cssProps[a]||a;if(r!==t){u=typeof r;if(u==="string"&&(o=gt.exec(r))){r=+(o[1]+1)*+o[2]+parseFloat(s.css(e,n));u="number"}if(r==null||u==="number"&&isNaN(r)){return}if(u==="number"&&!s.cssNumber[a]){r+="px"}if(!l||!("set"in l)||(r=l.set(e,r))!==t){try{f[n]=r}catch(c){}}}else{if(l&&"get"in l&&(o=l.get(e,false,i))!==t){return o}return f[n]}},css:function(e,n,r){var i,o;n=s.camelCase(n);o=s.cssHooks[n];n=s.cssProps[n]||n;if(n==="cssFloat"){n="float"}if(o&&"get"in o&&(i=o.get(e,true,r))!==t){return i}else{if(Et){return Et(e,n)}}},swap:function(e,t,n){var r={};for(var i in t){r[i]=e.style[i];e.style[i]=t[i]}n.call(e);for(i in t){e.style[i]=r[i]}}});s.curCSS=s.css;s.each(["height","width"],function(e,t){s.cssHooks[t]={get:function(e,n,r){var i;if(n){if(e.offsetWidth!==0){return Tt(e,t,r)}else{s.swap(e,yt,function(){i=Tt(e,t,r)})}return i}},set:function(e,t){if(vt.test(t)){t=parseFloat(t);if(t>=0){return t+"px"}}else{return t}}}});if(!s.support.opacity){s.cssHooks.opacity={get:function(e,t){return pt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=s.isNumeric(t)?"alpha(opacity="+t*100+")":"",o=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&s.trim(o.replace(ht,""))===""){n.removeAttribute("filter");if(r&&!r.filter){return}}n.filter=ht.test(o)?o.replace(ht,i):o+" "+i}}}s(function(){if(!s.support.reliableMarginRight){s.cssHooks.marginRight={get:function(e,t){var n;s.swap(e,{display:"inline-block"},function(){if(t){n=Et(e,"margin-right","marginRight")}else{n=e.style.marginRight}});return n}}}});if(n.defaultView&&n.defaultView.getComputedStyle){St=function(e,n){var r,i,o;n=n.replace(dt,"-$1").toLowerCase();if(!(i=e.ownerDocument.defaultView)){return t}if(o=i.getComputedStyle(e,null)){r=o.getPropertyValue(n);if(r===""&&!s.contains(e.ownerDocument.documentElement,e)){r=s.style(e,n)}}return r}}if(n.documentElement.currentStyle){xt=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;if(s===null&&o&&(i=o[t])){s=i}if(!vt.test(s)&&mt.test(s)){n=o.left;r=e.runtimeStyle&&e.runtimeStyle.left;if(r){e.runtimeStyle.left=e.currentStyle.left}o.left=t==="fontSize"?"1em":s||0;s=o.pixelLeft+"px";o.left=n;if(r){e.runtimeStyle.left=r}}return s===""?"auto":s}}Et=St||xt;if(s.expr&&s.expr.filters){s.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!s.support.reliableHiddenOffsets&&(e.style&&e.style.display||s.css(e,"display"))==="none"};s.expr.filters.visible=function(e){return!s.expr.filters.hidden(e)}}var Nt=/%20/g,Ct=/\[\]$/,kt=/\r?\n/g,Lt=/#.*$/,At=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Ot=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Mt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,_t=/^(?:GET|HEAD)$/,Dt=/^\/\//,Pt=/\?/,Ht=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Bt=/^(?:select|textarea)/i,jt=/\s+/,Ft=/([?&])_=[^&]*/,It=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,qt=s.fn.load,Rt={},Ut={},zt,Wt,Xt=["*/"]+["*"];try{zt=i.href}catch(Vt){zt=n.createElement("a");zt.href="";zt=zt.href}Wt=It.exec(zt.toLowerCase())||[];s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){s.fn[t]=function(e){return this.bind(t,e)}});s.each(["get","post"],function(e,n){s[n]=function(e,r,i,o){if(s.isFunction(r)){o=o||i;i=r;r=t}return s.ajax({type:n,url:e,data:r,success:i,dataType:o})}});s.extend({getScript:function(e,n){return s.get(e,t,n,"script")},getJSON:function(e,t,n){return s.get(e,t,n,"json")},ajaxSetup:function(e,t){if(t){Kt(e,s.ajaxSettings)}else{t=e;e=s.ajaxSettings}Kt(e,t);return e},ajaxSettings:{url:zt,isLocal:Mt.test(Wt[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Xt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":true,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:$t(Rt),ajaxTransport:$t(Ut),ajax:function(e,n){function S(e,n,c,h){if(y===2){return}y=2;if(m){clearTimeout(m)}v=t;p=h||"";E.readyState=e>0?4:0;var d,g,w,S=n,x=c?Gt(r,E,c):t,T,N;if(e>=200&&e<300||e===304){if(r.ifModified){if(T=E.getResponseHeader("Last-Modified")){s.lastModified[l]=T}if(N=E.getResponseHeader("Etag")){s.etag[l]=N}}if(e===304){S="notmodified";d=true}else{try{g=Yt(r,x);S="success";d=true}catch(C){S="parsererror";w=C}}}else{w=S;if(!S||e){S="error";if(e<0){e=0}}}E.status=e;E.statusText=""+(n||S);if(d){u.resolveWith(i,[g,S,E])}else{u.rejectWith(i,[E,S,w])}E.statusCode(f);f=t;if(b){o.trigger("ajax"+(d?"Success":"Error"),[E,r,d?g:w])}a.fireWith(i,[E,S]);if(b){o.trigger("ajaxComplete",[E,r]);if(!--s.active){s.event.trigger("ajaxStop")}}}if(typeof e==="object"){n=e;e=t}n=n||{};var r=s.ajaxSetup({},n),i=r.context||r,o=i!==r&&(i.nodeType||i instanceof s)?s(i):s.event,u=s.Deferred(),a=s.Callbacks("once memory"),f=r.statusCode||{},l,c={},h={},p,d,v,m,g,y=0,b,w,E={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=h[n]=h[n]||e;c[e]=t}return this},getAllResponseHeaders:function(){return y===2?p:null},getResponseHeader:function(e){var n;if(y===2){if(!d){d={};while(n=At.exec(p)){d[n[1].toLowerCase()]=n[2]}}n=d[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){if(!y){r.mimeType=e}return this},abort:function(e){e=e||"abort";if(v){v.abort(e)}S(0,e);return this}};u.promise(E);E.success=E.done;E.error=E.fail;E.complete=a.add;E.statusCode=function(e){if(e){var t;if(y<2){for(t in e){f[t]=[f[t],e[t]]}}else{t=e[E.status];E.then(t,t)}}return this};r.url=((e||r.url)+"").replace(Lt,"").replace(Dt,Wt[1]+"//");r.dataTypes=s.trim(r.dataType||"*").toLowerCase().split(jt);if(r.crossDomain==null){g=It.exec(r.url.toLowerCase());r.crossDomain=!!(g&&(g[1]!=Wt[1]||g[2]!=Wt[2]||(g[3]||(g[1]==="http:"?80:443))!=(Wt[3]||(Wt[1]==="http:"?80:443))))}if(r.data&&r.processData&&typeof r.data!=="string"){r.data=s.param(r.data,r.traditional)}Jt(Rt,r,n,E);if(y===2){return false}b=r.global;r.type=r.type.toUpperCase();r.hasContent=!_t.test(r.type);if(b&&s.active++===0){s.event.trigger("ajaxStart")}if(!r.hasContent){if(r.data){r.url+=(Pt.test(r.url)?"&":"?")+r.data;delete r.data}l=r.url;if(r.cache===false){var x=s.now(),T=r.url.replace(Ft,"$1_="+x);r.url=T+(T===r.url?(Pt.test(r.url)?"&":"?")+"_="+x:"")}}if(r.data&&r.hasContent&&r.contentType!==false||n.contentType){E.setRequestHeader("Content-Type",r.contentType)}if(r.ifModified){l=l||r.url;if(s.lastModified[l]){E.setRequestHeader("If-Modified-Since",s.lastModified[l])}if(s.etag[l]){E.setRequestHeader("If-None-Match",s.etag[l])}}E.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+Xt+"; q=0.01":""):r.accepts["*"]);for(w in r.headers){E.setRequestHeader(w,r.headers[w])}if(r.beforeSend&&(r.beforeSend.call(i,E,r)===false||y===2)){E.abort();return false}for(w in{success:1,error:1,complete:1}){E[w](r[w])}v=Jt(Ut,r,n,E);if(!v){S(-1,"No Transport")}else{E.readyState=1;if(b){o.trigger("ajaxSend",[E,r])}if(r.async&&r.timeout>0){m=setTimeout(function(){E.abort("timeout")},r.timeout)}try{y=1;v.send(c,S)}catch(N){if(y<2){S(-1,N)}else{s.error(N)}}}return E},param:function(e,n){var r=[],i=function(e,t){t=s.isFunction(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t){n=s.ajaxSettings.traditional}if(s.isArray(e)||e.jquery&&!s.isPlainObject(e)){s.each(e,function(){i(this.name,this.value)})}else{for(var o in e){Qt(o,e[o],n,i)}}return r.join("&").replace(Nt,"+")}});s.extend({active:0,lastModified:{},etag:{}});var Zt=s.now(),en=/(\=)\?(&|$)|\?\?/i;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return s.expando+"_"+Zt++}});s.ajaxPrefilter("json jsonp",function(t,n,r){var i=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data==="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==false&&(en.test(t.url)||i&&en.test(t.data))){var o,u=t.jsonpCallback=s.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[u],f=t.url,l=t.data,c="$1"+u+"$2";if(t.jsonp!==false){f=f.replace(en,c);if(t.url===f){if(i){l=l.replace(en,c)}if(t.data===l){f+=(/\?/.test(f)?"&":"?")+t.jsonp+"="+u}}}t.url=f;t.data=l;e[u]=function(e){o=[e]};r.always(function(){e[u]=a;if(o&&s.isFunction(a)){e[u](o[0])}});t.converters["script json"]=function(){if(!o){s.error(u+" was not called")}return o[0]};t.dataTypes[0]="json";return"script"}});s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){s.globalEval(e);return e}}});s.ajaxPrefilter("script",function(e){if(e.cache===t){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});s.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(s,o){r=n.createElement("script");r.async="async";if(e.scriptCharset){r.charset=e.scriptCharset}r.src=e.url;r.onload=r.onreadystatechange=function(e,n){if(n||!r.readyState||/loaded|complete/.test(r.readyState)){r.onload=r.onreadystatechange=null;if(i&&r.parentNode){i.removeChild(r)}r=t;if(!n){o(200,"success")}}};i.insertBefore(r,i.firstChild)},abort:function(){if(r){r.onload(0,1)}}}}});var tn=e.ActiveXObject?function(){for(var e in rn){rn[e](0,1)}}:false,nn=0,rn;s.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&sn()||on()}:sn;(function(e){s.extend(s.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})})(s.ajaxSettings.xhr());if(s.support.ajax){s.ajaxTransport(function(n){if(!n.crossDomain||s.support.cors){var r;return{send:function(i,o){var u=n.xhr(),a,f;if(n.username){u.open(n.type,n.url,n.async,n.username,n.password)}else{u.open(n.type,n.url,n.async)}if(n.xhrFields){for(f in n.xhrFields){u[f]=n.xhrFields[f]}}if(n.mimeType&&u.overrideMimeType){u.overrideMimeType(n.mimeType)}if(!n.crossDomain&&!i["X-Requested-With"]){i["X-Requested-With"]="XMLHttpRequest"}try{for(f in i){u.setRequestHeader(f,i[f])}}catch(l){}u.send(n.hasContent&&n.data||null);r=function(e,i){var f,l,c,h,p;try{if(r&&(i||u.readyState===4)){r=t;if(a){u.onreadystatechange=s.noop;if(tn){delete rn[a]}}if(i){if(u.readyState!==4){u.abort()}}else{f=u.status;c=u.getAllResponseHeaders();h={};p=u.responseXML;if(p&&p.documentElement){h.xml=p}h.text=u.responseText;try{l=u.statusText}catch(d){l=""}if(!f&&n.isLocal&&!n.crossDomain){f=h.text?200:404}else{if(f===1223){f=204}}}}}catch(v){if(!i){o(-1,v)}}if(h){o(f,l,h,c)}};if(!n.async||u.readyState===4){r()}else{a=++nn;if(tn){if(!rn){rn={};s(e).unload(tn)}rn[a]=r}u.onreadystatechange=r}},abort:function(){if(r){r(0,1)}}}}})}var un={},an,fn,ln=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,hn,pn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],dn;s.fn.extend({show:function(e,t,n){var r,i;if(e||e===0){return this.animate(gn("show",3),e,t,n)}else{for(var o=0,u=this.length;o<u;o++){r=this[o];if(r.style){i=r.style.display;if(!s._data(r,"olddisplay")&&i==="none"){i=r.style.display=""}if(i===""&&s.css(r,"display")==="none"){s._data(r,"olddisplay",yn(r.nodeName))}}}for(o=0;o<u;o++){r=this[o];if(r.style){i=r.style.display;if(i===""||i==="none"){r.style.display=s._data(r,"olddisplay")||""}}}return this}},hide:function(e,t,n){if(e||e===0){return this.animate(gn("hide",3),e,t,n)}else{var r,i,o=0,u=this.length;for(;o<u;o++){r=this[o];if(r.style){i=s.css(r,"display");if(i!=="none"&&!s._data(r,"olddisplay")){s._data(r,"olddisplay",i)}}}for(o=0;o<u;o++){if(this[o].style){this[o].style.display="none"}}return this}},_toggle:s.fn.toggle,fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){function o(){if(i.queue===false){s._mark(this)}var t=s.extend({},i),n=this.nodeType===1,r=n&&s(this).is(":hidden"),o,u,a,f,l,c,h,p,d;t.animatedProperties={};for(a in e){o=s.camelCase(a);if(a!==o){e[o]=e[a];delete e[a]}u=e[o];if(s.isArray(u)){t.animatedProperties[o]=u[1];u=e[o]=u[0]}else{t.animatedProperties[o]=t.specialEasing&&t.specialEasing[o]||t.easing||"swing"}if(u==="hide"&&r||u==="show"&&!r){return t.complete.call(this)}if(n&&(o==="height"||o==="width")){t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(s.css(this,"display")==="inline"&&s.css(this,"float")==="none"){if(!s.support.inlineBlockNeedsLayout||yn(this.nodeName)==="inline"){this.style.display="inline-block"}else{this.style.zoom=1}}}}if(t.overflow!=null){this.style.overflow="hidden"}for(a in e){f=new s.fx(this,t,a);u=e[a];if(ln.test(u)){d=s._data(this,"toggle"+a)||(u==="toggle"?r?"show":"hide":0);if(d){s._data(this,"toggle"+a,d==="show"?"hide":"show");f[d]()}else{f[u]()}}else{l=cn.exec(u);c=f.cur();if(l){h=parseFloat(l[2]);p=l[3]||(s.cssNumber[a]?"":"px");if(p!=="px"){s.style(this,a,(h||1)+p);c=(h||1)/f.cur()*c;s.style(this,a,c+p)}if(l[1]){h=(l[1]==="-="?-1:1)*h+c}f.custom(c,h,p)}else{f.custom(c,u,"")}}}return true}var i=s.speed(t,n,r);if(s.isEmptyObject(e)){return this.each(i.complete,[false])}e=s.extend({},e);return i.queue===false?this.each(o):this.queue(i.queue,o)},stop:function(e,n,r){if(typeof e!=="string"){r=n;n=e;e=t}if(n&&e!==false){this.queue(e||"fx",[])}return this.each(function(){function u(e,t,n){var i=t[n];s.removeData(e,n,true);i.stop(r)}var t,n=false,i=s.timers,o=s._data(this);if(!r){s._unmark(true,this)}if(e==null){for(t in o){if(o[t].stop&&t.indexOf(".run")===t.length-4){u(this,o,t)}}}else{if(o[t=e+".run"]&&o[t].stop){u(this,o,t)}}for(t=i.length;t--;){if(i[t].elem===this&&(e==null||i[t].queue===e)){if(r){i[t](true)}else{i[t].saveState()}n=true;i.splice(t,1)}}if(!(r&&n)){s.dequeue(this,e)}})}});s.each({slideDown:gn("show",1),slideUp:gn("hide",1),slideToggle:gn("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){s.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}});s.extend({speed:function(e,t,n){var r=e&&typeof e==="object"?s.extend({},e):{complete:n||!n&&t||s.isFunction(e)&&e,duration:e,easing:n&&t||t&&!s.isFunction(t)&&t};r.duration=s.fx.off?0:typeof r.duration==="number"?r.duration:r.duration in s.fx.speeds?s.fx.speeds[r.duration]:s.fx.speeds._default;if(r.queue==null||r.queue===true){r.queue="fx"}r.old=r.complete;r.complete=function(e){if(s.isFunction(r.old)){r.old.call(this)}if(r.queue){s.dequeue(this,r.queue)}else{if(e!==false){s._unmark(this)}}};return r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t;this.elem=e;this.prop=n;t.orig=t.orig||{}}});s.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(s.fx.step[this.prop]||s.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var e,t=s.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e},custom:function(e,n,r){function u(e){return i.step(e)}var i=this,o=s.fx;this.startTime=dn||vn();this.end=n;this.now=this.start=e;this.pos=this.state=0;this.unit=r||this.unit||(s.cssNumber[this.prop]?"":"px");u.queue=this.options.queue;u.elem=this.elem;u.saveState=function(){if(i.options.hide&&s._data(i.elem,"fxshow"+i.prop)===t){s._data(i.elem,"fxshow"+i.prop,i.start)}};if(u()&&s.timers.push(u)&&!hn){hn=setInterval(o.tick,o.interval)}},show:function(){var e=s._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||s.style(this.elem,this.prop);this.options.show=true;if(e!==t){this.custom(this.cur(),e)}else{this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur())}s(this.elem).show()},hide:function(){this.options.orig[this.prop]=s._data(this.elem,"fxshow"+this.prop)||s.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(e){var t,n,r,i=dn||vn(),o=true,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();a.animatedProperties[this.prop]=true;for(t in a.animatedProperties){if(a.animatedProperties[t]!==true){o=false}}if(o){if(a.overflow!=null&&!s.support.shrinkWrapBlocks){s.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]})}if(a.hide){s(u).hide()}if(a.hide||a.show){for(t in a.animatedProperties){s.style(u,t,a.orig[t]);s.removeData(u,"fxshow"+t,true);s.removeData(u,"toggle"+t,true)}}r=a.complete;if(r){a.complete=false;r.call(u)}}return false}else{if(a.duration==Infinity){this.now=i}else{n=i-this.startTime;this.state=n/a.duration;this.pos=juicebox_lib.jQuery.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration);this.now=this.start+(this.end-this.start)*this.pos}this.update()}return true}};s.extend(s.fx,{tick:function(){var e,t=s.timers,n=0;for(;n<t.length;n++){e=t[n];if(!e()&&t[n]===e){t.splice(n--,1)}}if(!t.length){s.fx.stop()}},interval:13,stop:function(){clearInterval(hn);hn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){s.style(e.elem,"opacity",e.now)},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=e.now+e.unit}else{e.elem[e.prop]=e.now}}}});s.each(["width","height"],function(e,t){s.fx.step[t]=function(e){s.style(e.elem,t,Math.max(0,e.now))}});if(s.expr&&s.expr.filters){s.expr.filters.animated=function(e){return s.grep(s.timers,function(t){return e===t.elem}).length}}var bn=/^t(?:able|d|h)$/i,wn=/^(?:body|html)$/i;if("getBoundingClientRect"in n.documentElement){s.fn.offset=function(e){var t=this[0],n;if(e){return this.each(function(t){s.offset.setOffset(this,e,t)})}if(!t||!t.ownerDocument){return null}if(t===t.ownerDocument.body){return s.offset.bodyOffset(t)}try{n=t.getBoundingClientRect()}catch(r){}var i=t.ownerDocument,o=i.documentElement;if(!n||!s.contains(o,t)){return n?{top:n.top,left:n.left}:{top:0,left:0}}var u=i.body,a=En(i),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||s.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||s.support.boxModel&&o.scrollLeft||u.scrollLeft,p=n.top+c-f,d=n.left+h-l;return{top:p,left:d}}}else{s.fn.offset=function(e){var t=this[0];if(e){return this.each(function(t){s.offset.setOffset(this,e,t)})}if(!t||!t.ownerDocument){return null}if(t===t.ownerDocument.body){return s.offset.bodyOffset(t)}var n,r=t.offsetParent,i=t,o=t.ownerDocument,u=o.documentElement,a=o.body,f=o.defaultView,l=f?f.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,h=t.offsetLeft;while((t=t.parentNode)&&t!==a&&t!==u){if(s.support.fixedPosition&&l.position==="fixed"){break}n=f?f.getComputedStyle(t,null):t.currentStyle;c-=t.scrollTop;h-=t.scrollLeft;if(t===r){c+=t.offsetTop;h+=t.offsetLeft;if(s.support.doesNotAddBorder&&!(s.support.doesAddBorderForTableAndCells&&bn.test(t.nodeName))){c+=parseFloat(n.borderTopWidth)||0;h+=parseFloat(n.borderLeftWidth)||0}i=r;r=t.offsetParent}if(s.support.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"){c+=parseFloat(n.borderTopWidth)||0;h+=parseFloat(n.borderLeftWidth)||0}l=n}if(l.position==="relative"||l.position==="static"){c+=a.offsetTop;h+=a.offsetLeft}if(s.support.fixedPosition&&l.position==="fixed"){c+=Math.max(u.scrollTop,a.scrollTop);h+=Math.max(u.scrollLeft,a.scrollLeft)}return{top:c,left:h}}}s.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;if(s.support.doesNotIncludeMarginInBodyOffset){t+=parseFloat(s.css(e,"marginTop"))||0;n+=parseFloat(s.css(e,"marginLeft"))||0}return{top:t,left:n}},setOffset:function(e,t,n){var r=s.css(e,"position");if(r==="static"){e.style.position="relative"}var i=s(e),o=i.offset(),u=s.css(e,"top"),a=s.css(e,"left"),f=(r==="absolute"||r==="fixed")&&s.inArray("auto",[u,a])>-1,l={},c={},h,p;if(f){c=i.position();h=c.top;p=c.left}else{h=parseFloat(u)||0;p=parseFloat(a)||0}if(s.isFunction(t)){t=t.call(e,n,o)}if(t.top!=null){l.top=t.top-o.top+h}if(t.left!=null){l.left=t.left-o.left+p}if("using"in t){t.using.call(e,l)}else{i.css(l)}}};s.fn.extend({position:function(){if(!this[0]){return null}var e=this[0],t=this.offsetParent(),n=this.offset(),r=wn.test(t[0].nodeName)?{top:0,left:0}:t.offset();n.top-=parseFloat(s.css(e,"marginTop"))||0;n.left-=parseFloat(s.css(e,"marginLeft"))||0;r.top+=parseFloat(s.css(t[0],"borderTopWidth"))||0;r.left+=parseFloat(s.css(t[0],"borderLeftWidth"))||0;return{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||n.body;while(e&&!wn.test(e.nodeName)&&s.css(e,"position")==="static"){e=e.offsetParent}return e})}});s.each(["Left","Top"],function(e,n){var r="scroll"+n;s.fn[r]=function(n){var i,o;if(n===t){i=this[0];if(!i){return null}o=En(i);return o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:s.support.boxModel&&o.document.documentElement[r]||o.document.body[r]:i[r]}return this.each(function(){o=En(this);if(o){o.scrollTo(!e?n:s(o).scrollLeft(),e?n:s(o).scrollTop())}else{this[r]=n}})}});s.each(["Height","Width"],function(e,n){var r=n.toLowerCase();s.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(s.css(e,r,"padding")):this[r]():null};s.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(s.css(t,r,e?"margin":"border")):this[r]():null};s.fn[r]=function(e){var i=this[0];if(!i){return e==null?null:this}if(s.isFunction(e)){return this.each(function(t){var n=s(this);n[r](e.call(this,t,n[r]()))})}if(s.isWindow(i)){var o=i.document.documentElement["client"+n],u=i.document.body;return i.document.compatMode==="CSS1Compat"&&o||u&&u["client"+n]||o}else{if(i.nodeType===9){return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n])}else{if(e===t){var a=s.css(i,r),f=parseFloat(a);return s.isNumeric(f)?f:a}else{return this.css(r,typeof e==="string"?e:e+"px")}}}}});juicebox_lib.jQuery=juicebox_lib.$=s})(window);if(typeof jQuery==="undefined"){window.jQuery=juicebox_lib.jQuery}if(typeof $==="undefined"){window.$=juicebox_lib.jQuery}(function(e,t,n){function w(e,t,n,r){var i=u.exec(t),s=e.css(n)==="auto"?0:e.css(n),o=typeof s=="string"?C(s):s,a=typeof t=="string"?C(t):t,f=r===true?0:o,l=e.is(":hidden"),c=e.translation();if(n=="left"){f=parseInt(o,10)+c.x}if(n=="right"){f=parseInt(o,10)+c.x}if(n=="top"){f=parseInt(o,10)+c.y}if(n=="bottom"){f=parseInt(o,10)+c.y}if(!i&&t=="show"){f=1;if(l){e.css({display:"block",opacity:0})}}else{if(!i&&t=="hide"){f=0}}if(i){var h=parseFloat(i[2]);if(i[1]){h=(i[1]==="-="?-1:1)*h+parseInt(f,10)}return h}else{return f}}function E(e,t,n){return(n===true||p==true&&n!=false)&&b?"translate3d("+e+"px,"+t+"px,0)":"translate("+e+"px,"+t+"px)"}function S(t,n,r,s,o,u,a,c){var h=t.data(l)?!N(t.data(l))?t.data(l):e.extend(true,{},f):e.extend(true,{},f),p=o,d=e.inArray(n,i)>-1;if(d){var v=h.meta,m=C(t.css(n))||0,g=n+"_o";p=o-m;v[n]=p;v[g]=t.css(n)=="auto"?0+p:m+p||0;h.meta=v;if(a&&p===0){p=0-v[g];v[n]=p;v[g]=0}}return t.data(l,x(h,n,r,s,p,u,a,c))}function x(e,t,n,r,i,o,u,a){e=typeof e==="undefined"?{}:e;e.secondary=typeof e.secondary==="undefined"?{}:e.secondary;for(var f=s.length-1;f>=0;f--){if(typeof e[s[f]+"transition-property"]==="undefined"){e[s[f]+"transition-property"]=""}e[s[f]+"transition-property"]+=", "+(o===true&&u===true?s[f]+"transform":t);e[s[f]+"transition-duration"]=n+"ms";e[s[f]+"transition-timing-function"]=r;e.secondary[o===true&&u===true?s[f]+"transform":t]=o===true&&u===true?E(e.meta.left,e.meta.top,a):i}return e}function T(e){for(var t in e){if((t=="width"||t=="height")&&(e[t]=="show"||e[t]=="hide"||e[t]=="toggle")){return true}}return false}function N(e){for(var t in e){return false}return true}function C(e){return parseFloat(e.replace(/px/i,""))}function k(t,n,i){var s=e.inArray(t,r)>-1;if((t=="width"||t=="height")&&n===parseFloat(i.css(t))){s=false}return s}var r=["top","right","bottom","left","opacity","height","width"],i=["top","right","bottom","left"],s=["","-webkit-","-moz-","-o-"],o=["avoidTransforms","useTranslate3d","leaveTransforms"],u=/^([+-]=)?([\d+-.]+)(.*)$/,a=/([A-Z])/g,f={secondary:{},meta:{top:0,right:0,bottom:0,left:0}},l="jQe",c="cubic-bezier(",h=")",p=false,d=null;var v=document.body||document.documentElement,m=v.style,g=m.WebkitTransition!==undefined?"webkitTransitionEnd":m.OTransition!==undefined?"oTransitionEnd":"transitionend",y=m.WebkitTransition!==undefined||m.MozTransition!==undefined||m.OTransition!==undefined||m.transition!==undefined,b=p="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix;if(e.expr&&e.expr.filters){d=e.expr.filters.animated;e.expr.filters.animated=function(t){return e(t).data("events")&&e(t).data("events")[g]?true:d.call(this,t)}}e.extend({toggle3DByDefault:function(){p=!p}});e.fn.translation=function(){if(!this[0]){return null}var e=this[0],t=window.getComputedStyle(e,null),n={x:0,y:0};for(var r=s.length-1;r>=0;r--){var i=t.getPropertyValue(s[r]+"transform");if(i&&/matrix/i.test(i)){var o=i.replace(/^matrix\(/i,"").split(/, |\)$/g);n={x:parseInt(o[4],10),y:parseInt(o[5],10)};break}}return n};e.fn.animate=function(n,r,u,a){n=n||{};var f=!(typeof n.bottom!=="undefined"||typeof n.right!=="undefined"),p=e.speed(r,u,a),d=this,v=0,m=function(){v--;if(v===0){if(typeof p.complete==="function"){p.complete.apply(d[0],arguments)}}};if(!y||N(n)||T(n)||p.duration<=0||e.fn.animate.defaults.avoidTransforms===true&&n.avoidTransforms!==false){return t.apply(this,arguments)}return this[p.queue===true?"queue":"each"](function(){var r=e(this),u=e.extend({},p),a=function(){var e={};for(var t=s.length-1;t>=0;t--){e[s[t]+"transition-property"]="none";e[s[t]+"transition-duration"]="";e[s[t]+"transition-timing-function"]=""}r.unbind(g);if(!n.leaveTransforms===true){var o=r.data(l)||{},u={};for(t=s.length-1;t>=0;t--){u[s[t]+"transform"]=""}if(f&&typeof o.meta!=="undefined"){for(var a=0,c;c=i[a];++a){u[c]=o.meta[c+"_o"]+"px"}}r.css(e).css(u)}if(n.opacity==="hide"){r.css("display","none")}r.data(l,null);m.call(r)},d={bounce:c+"0.0, 0.35, .5, 1.3"+h,linear:"linear",swing:"ease-in-out",easeOutQuad:c+"0.250, 0.460, 0.450, 0.940"+h,easeInOutQuad:c+"0.455, 0.030, 0.515, 0.955"+h,easeInOutCirc:c+"0.785, 0.135, 0.150, 0.860"+h},y={},b=d[u.easing||"swing"]?d[u.easing||"swing"]:u.easing||"swing";for(var E in n){if(e.inArray(E,o)===-1){var x=e.inArray(E,i)>-1,T=w(r,n[E],E,x&&n.avoidTransforms!==true);if(n.avoidTransforms!==true&&k(E,T,r)){S(r,E,u.duration,b,x&&n.avoidTransforms===true?T+"px":T,x&&n.avoidTransforms!==true,f,n.useTranslate3d===true)}else{y[E]=n[E]}}}var C=r.data(l)||{};for(var L=s.length-1;L>=0;L--){if(typeof C[s[L]+"transition-property"]!=="undefined"){C[s[L]+"transition-property"]=C[s[L]+"transition-property"].substr(2)}}r.data(l,C).unbind(g);if(!N(r.data(l))&&!N(r.data(l).secondary)){v++;r.css(r.data(l));var A=r.data(l).secondary;setTimeout(function(){r.bind(g,a).css(A)})}else{u.queue=false}if(!N(y)){v++;t.apply(r,[y,{duration:u.duration,easing:e.easing[u.easing]?u.easing:e.easing.swing?"swing":"linear",complete:m,queue:u.queue}])}return true})};e.fn.animate.defaults={};e.fn.stop=function(t,r,i){if(!y){return n.apply(this,[t,r])}if(t){this.queue([])}var o={};for(var u=s.length-1;u>=0;u--){o[s[u]+"transition-property"]="none";o[s[u]+"transition-duration"]="";o[s[u]+"transition-timing-function"]=""}this.each(function(){var u=e(this),f=window.getComputedStyle(this,null),c={},h;if(!N(u.data(l))&&!N(u.data(l).secondary)){var p=u.data(l);if(r){c=p.secondary;if(!i&&typeof p.meta.left_o!==undefined||typeof p.meta.top_o!==undefined){c.left=typeof p.meta.left_o!==undefined?p.meta.left_o:"auto";c.top=typeof p.meta.top_o!==undefined?p.meta.top_o:"auto";for(h=s.length-1;h>=0;h--){c[s[h]+"transform"]=""}}}else{for(var d in u.data(l).secondary){d=d.replace(a,"-$1").toLowerCase();c[d]=f.getPropertyValue(d);if(!i&&/matrix/i.test(c[d])){var v=c[d].replace(/^matrix\(/i,"").split(/, |\)$/g);c.left=parseFloat(v[4])+parseFloat(u.css("left"))+"px"||"auto";c.top=parseFloat(v[5])+parseFloat(u.css("top"))+"px"||"auto";for(h=s.length-1;h>=0;h--){c[s[h]+"transform"]=""}}}}u.unbind(g).css(o).css(c).data(l,null)}else{n.apply(u,[t,r])}});return this}})(juicebox_lib.jQuery,juicebox_lib.jQuery.fn.animate,juicebox_lib.jQuery.fn.stop);(function(e){if(!juicebox_lib.jQuery.browser.msie||juicebox_lib.jQuery.browser.version<10){return}var t=e.document,n=function(e,n,r){var i,s=t.createEvent("Event");s.initEvent(e,true,true);for(i in r){s[i]=r[i]}n.dispatchEvent(s)},r=function(){function n(e){return e>>>0}function r(r){var i=-1,s,o;for(o in r){s=String(n(o))===o&&n(o)!==e&&t.call(r,o);if(s&&o>i){i=o}}return i}var e=Math.pow(2,32)-1,t=Object.prototype.hasOwnProperty;return function(e){var t=0;e=e||{};e.length={get:function(){var e=+r(this);return Math.max(t,e+1)},set:function(e){var r=n(e);if(r!==+e){throw new RangeError}for(var i=r,s=this.length;i<s;i++){delete this[i]}t=r}};e.toString={value:Array.prototype.join};return Object.create(Array.prototype,e)}}(),i={identifiedTouch:{value:function(e){var t=this.length;while(t--){if(this[t].identifier===e){return this[t]}}return undefined}},item:{value:function(e){return this[e]}},_touchIndex:{value:function(e){var t=this.length;while(t--){if(this[t].pointerId==e.pointerId){return t}}return-1}},_addAll:{value:function(e){var t=0,n=e.length;for(;t<n;t++){this._add(e[t])}}},_add:{value:function(e){var t=this._touchIndex(e);t=t<0?this.length:t;e.type="MSPointerMove";e.identifier=e.pointerId;e.force=e.pressure;e.radiusX=e.radiusY=1;e.rotationAngle=0;this[t]=e}},_remove:{value:function(e){var t=this._touchIndex(e);if(t>=0){this.splice(t,1)}}}},s=function(e){return function(){var t=r(e);if(arguments.length===1){t.length=arguments[0]}else{t.push.apply(t,arguments)}return t}}(i),o,u={},a=e.MSGesture?new MSGesture:null,f=[],l=function(e,t){if(t){if(e===t){return true}else{return l(e,t.parentNode)}}else{return false}},c=function(e){var r,i=e.target,s,f,c;if(e.type==="MSPointerDown"){o._add(e);u[e.pointerId]=e.target;r="touchstart";if(o.length>1){a.target=e.target;for(var h=0;h<o.length;h++){a.addPointer(o[h].pointerId)}}}if(e.type==="MSPointerMove"&&o.identifiedTouch(e.pointerId)){o._add(e);r="touchmove"}f=t.createTouchList(e);c=t.createTouchList();for(var h=0;h<o.length;h++){if(l(i,u[o[h].identifier])){c._add(o[h])}}s=u[e.pointerId];if(e.type==="MSPointerUp"){o._remove(e);u[e.pointerId]=null;delete u[e.pointerId];r="touchend";if(o.length<=1&&a){a.stop()}}if(r&&s){n(r,s,{touches:o,changedTouches:f,targetTouches:c})}},h=function(e){var t;if(e.type==="MSGestureStart"){t="gesturestart"}else{if(e.type==="MSGestureChange"){t="gesturechange"}else{if(e.type==="MSGestureEnd"){t="gestureend"}}}n(t,e.target,{scale:e.scale,rotation:e.rotation,screenX:e.screenX,screenY:e.screenY})},p=function(t){var n=d,r=v,i=t.prototype.addEventListener,s=t.prototype.removeEventListener;t.prototype.addEventListener=function(t,r,s){e.navigator.msPointerEnabled&&n.call(this,t,r,s);i.call(this,t,r,s)};t.prototype.removeEventListener=function(t,n,i){e.navigator.msPointerEnabled&&r.call(this,t,n,i);s.call(this,t,n,i)}},d=function(e,t,n){var r=this,i;if(e.indexOf("touchstart")===0){i=function(){if(l(r,arguments[0].target)){c.apply(this,arguments)}};f.push({node:this,func:i});this.ownerDocument.addEventListener("MSPointerDown",i,n)}if(e.indexOf("touchmove")===0){this.ownerDocument.addEventListener("MSPointerMove",c,n)}if(e.indexOf("touchend")===0){this.ownerDocument.addEventListener("MSPointerUp",c,n)}if(e.indexOf("gesturestart")===0){this.ownerDocument.addEventListener("MSGestureStart",h,n)}if(e.indexOf("gesturechange")===0){this.ownerDocument.addEventListener("MSGestureChange",h,n)}if(e.indexOf("gestureend")===0){this.ownerDocument.addEventListener("MSGestureEnd",h,n)}if(this.style&&typeof this.style.msTouchAction!="undefined"){this.style.msTouchAction="none"}},v=function(e,t,n){var r,i;if(e.indexOf("touchstart")===0){i=f.length;while(i--){if(f[i].node===this){this.ownerDocument.removeEventListener("MSPointerDown",r,n);f.splice(i,1);break}}}if(e.indexOf("touchmove")===0){this.ownerDocument.removeEventListener("MSPointerMove",c,n)}if(e.indexOf("touchend")===0){this.ownerDocument.removeEventListener("MSPointerUp",c,n)}if(e.indexOf("gesturestart")===0){this.ownerDocument.removeEventListener("MSGestureStart",h,n)}if(e.indexOf("gesturechange")===0){this.ownerDocument.removeEventListener("MSGestureChange",h,n)}if(e.indexOf("gestureend")===0){this.ownerDocument.removeEventListener("MSGestureEnd",h,n)}};t.createTouchList=function(e){var t=new s;if(e){if(e.length){t._addAll(e)}else{t._add(e)}}return t};t.createTouch=function(e,t,n,r,i,s,o){return{identifier:n,screenX:s,screenY:o,pageX:r,pageY:i,target:t}};if(!e.ontouchstart){e.ontouchstart=1}o=t.createTouchList();p(HTMLElement);p(Document)})(window);juicebox_lib.jQuery.fn.extend({disableSelection:function(){return this.each(function(){this.onselectstart=function(){return false};this.unselectable="on";jQuery(this).css("user-select","none");jQuery(this).css("-o-user-select","none");jQuery(this).css("-moz-user-select","none");jQuery(this).css("-khtml-user-select","none");jQuery(this).css("-webkit-user-select","none")})}});if(!juicebox_lib.jQuery.easing.easeInOutQuart){juicebox_lib.jQuery.extend(juicebox_lib.jQuery.easing,{easeInOutQuart:function(e,t,n,r,i){if((t/=i/2)<1){return r/2*t*t*t*t+n}return-r/2*((t-=2)*t*t*t-2)+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n}})}var juice_box_utils=function(p$){var $=p$;var is_pro_version="juice_box_utils";var is_absolute_path=function(e){if(!e){return false}if(e.indexOf("/")===0){return true}if(e.toLowerCase().indexOf("http://")===0){return true}if(e.toLowerCase().indexOf("https://")===0){return true}if(e.indexOf("://")>0&&e.indexOf("://")<10){return true}return false};var is_end_with=function(e,t){if(!e||!t){return false}if(e.substring(e.length-t.length)===t){return true}return false};var get_base_url=function(e,t){if(e.indexOf("/")===0){var n=t.indexOf("://");if(n<0){n=0}else{n+=3}var r=t.indexOf("/",n);if(r<0){return t}return t.substring(0,r)}var i=t.lastIndexOf("/");if(i<=0){return""}return t.substring(0,i)};var convert_to_absolute_path=function(e){if(e.toLowerCase().indexOf("http://")===0||e.toLowerCase().indexOf("https://")===0){return e}var t=window.location.href.split("#")[0].split("?")[0];var n=t.lastIndexOf("/");var r=t.indexOf("://");if(n<=0){return"/"+e}if(r>0&&n-r<3){return"/"+e}return get_base_url(e,t)+(e.indexOf("/")===0?"":"/")+e};var concatenate_path=function(e,t){if(!e){e=""}if(!t){t=""}if(is_absolute_path(t)){return t}if(!is_end_with(e,"/")&&e){e+="/"}return e+t};var is_it_scrolling=function(){var e=$(document);var t=$(window);return{v_scrolling:Math.abs(parseInt(e.height())-parseInt(t.height()))>(is_android()?3:0),h_scrolling:e.width()>t.width()}};var in_iframe=function(){if(window.location.href.indexOf("noiframelimit")>-1){return false}if(top&&top.location!==location){return true}return false};var is_windows=function(){if(navigator.userAgent.match(/Windows/i)){return true}return false};var is_iphone_chrome=function(){if(is_iphone()&&navigator.userAgent.match(/CriOS/i)){return true}return false};var is_iphone=function(){if(navigator.userAgent.match(/iPhone/i)){return true}else{if(navigator.userAgent.match(/iPod/i)){return true}}return false};var is_ipad=function(){if(navigator.userAgent.match(/iPad/i)){return true}return false};var is_android=function(){if(navigator.userAgent.match(/Android/i)){return true}return false};var is_mobile_ie=function(){if(navigator.userAgent.match(/IEMobile/i)){return true}return false};var is_small_android=function(){if(navigator.userAgent.match(/Galaxy Nexus/i)){return true}if(navigator.userAgent.match(/Nexus S/i)){return true}if(navigator.userAgent.match(/HTC Panache/i)){return true}if(navigator.userAgent.match(/HTC myTouch/i)){return true}if(navigator.userAgent.match(/Sensation/i)){return true}if(is_android()&&is_small_screen()){return true}return false};var is_ie_after_11=function(){if(navigator.userAgent.match(/Trident.*rv/)&&$.browser.version>=11){return true}return false};var is_ios_mobile_chrome=function(){if(!is_mac_os()){return false}if(navigator.userAgent.match(/CriOS.*Mobile/)){return true}return false};var is_chrome=function(){if(navigator.userAgent.match(/Chrome/i)){return true}return false};var is_opera=function(){if(navigator.userAgent.match(/Opera/i)||navigator.userAgent.match(/OPR/i)){return true}return false};var is_firefox=function(){if(navigator.userAgent.match(/Firefox/i)){return true}return false};var get_android_ver=function(){var e=navigator.userAgent.indexOf("Android");if(e<0){return 0}var t=navigator.userAgent.indexOf(";",e);if(t<=e){return 0}var n=navigator.userAgent.substring(e,t);var r=n.split(" ");if(r.length!==2){return 0}var i=parseInt(r[1].replace(/\./g,"").substring(0,3));var s=parseFloat(parseFloat(i)/100);if(s<1){s*=10}if(s<1){s*=10}return s};var get_vp_meta_cnt=function(e,t){return"width=device-width, initial-scale=1.0, minimum-scale="+(t?.25:1)+", maximum-scale="+(t?4:1)+", user-scalable="+(t?1:0)+(e?", target-densitydpi="+e:", minimal-ui")};var get_vp_meta_cnt_4_iphone_with_ratio=function(e){return"width=800, initial-scale="+e+", minimum-scale="+e+", maximum-scale="+e+", user-scalable="+(scalable?1:0)+", minimal-ui"};var meta_tag_id="jb-viewport";var populate_viewport_meta_content=function(e){if(e){if(is_ipad()||is_iphone()){return get_vp_meta_cnt("")}else{if(is_android()){return get_vp_meta_cnt(160)}}}else{return""}return""};var set_viewport_value=function(e,t){if(is_android()){$("#"+meta_tag_id).attr("content",get_vp_meta_cnt(e,t))}if(is_iphone()){$("#"+meta_tag_id).attr("content",get_vp_meta_cnt_4_iphone_with_ratio(e,t))}};var only_has_minimal_ui=function(){var e=document.getElementsByName("viewport");if(!e||e.length<=0||!e[0].content){return false}var t=e[0].content.toLowerCase().replace(/ /g,"");if(t.toLowerCase()=="minimal-ui"){return true}return false};var host_has_viewport_meta=function(){if(only_has_minimal_ui()){return false}if(is_iphone()&&is_ios_mobile_chrome()&&$("#"+meta_tag_id).length<=0){return false}return document.getElementsByName("viewport").length>0&&$("#"+meta_tag_id).length<=0};var has_viewport_locked=function(){var e=document.getElementsByName("viewport");if(!e||e.length<=0||!e[0].content){return false}var t=e[0].content.toLowerCase().replace(/ /g,"");var n=t.match(/initial-scale=1\b/g)!=null&&t.match(/initial-scale=1\.[1-9]/g)==null;var r=t.indexOf("user-scalable=0")>=0||t.indexOf("user-scalable=off")>=0||t.indexOf("user-scalable=false")>=0;return n&&r};var need_viewport_meta=function(){if(is_ipad()||is_iphone()||is_android()){return true}return false};var add_js_tag=function(e,t){if(t&&$("#"+t).length>0){return}var n=document.createElement("script");if(t){n.id=t}n.type="text/javascript";n.src=e;var r=document.getElementsByTagName("head");if(!r){return}r[0].appendChild(n)};var add_viewport_meta=function(e){if(!need_viewport_meta()){return}if($("#"+meta_tag_id).length>0&&!only_has_minimal_ui()){return}if(host_has_viewport_meta()){return}var t=document.createElement("meta");t.name="viewport";t.id=meta_tag_id;t.content=populate_viewport_meta_content(e);var n=document.getElementsByTagName("head");if(!n){return}n[0].appendChild(t)};var set_viewport_meta=function(e){if(!need_viewport_meta()){return}var t=$("#"+meta_tag_id);if(t.length<=0){var n=document.getElementsByName("viewport");for(var r=0;r<n.length;r++){if(!n[r]||!n[r].remove){continue}n[r].remove()}add_viewport_meta(e);return}t.attr("content",populate_viewport_meta_content(e))};var get_viewport_meta_content=function(){var e=document.getElementsByName("viewport");if(e.length<=0){return null}if(!e[0].content){return null}return e[0].content};var set_viewport_meta_content=function(e){var t=document.getElementsByName("viewport");if(t.length<=0){return}t[0].content=e};var get_current_path=function(){var e=window.location.href.split("#")[0].split("?")[0];var t=e.lastIndexOf("/");var n=e.indexOf("//");if(t<0||n<0){return""}var r=e.indexOf("/",n+2);if(r<0||t-r<=0){return"/"}var i=e.substring(t+1);if(i.indexOf(".")>0){return e.substring(r,t)}return e.substring(r)};var get_qs_value=function(e,t){if(t==null){t=""}e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)");var r=n.exec(window.location.href);if(r==null){return t}else{return r[1]}};var get_js_folder_url=function(){var e,t,n=document.getElementsByTagName("script");for(e=0;e<n.length;e++){t=n[e].src.toLowerCase().indexOf("juicebox.js");if(t===0){return""}if(t>0){return n[e].src.substring(0,t)}}return""};var u_skey="cd64f8c2ad416da082f8c514ba054429";var set_cookie=function(e,t,n){if(n<0){n="Thu, 01 Jan 1970 00:00:00 GMT"}else{n=""}document.cookie=e+"="+escape(t)+(n===""?"":";expires="+n)+";path=/"};var get_cookie=function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(t!==-1){t=t+e.length+1;var n=document.cookie.indexOf(";",t);if(n===-1){n=document.cookie.length}return unescape(document.cookie.substring(t,n))}}return""};var wrap_value=function(e){switch(typeof e){case"boolean":case"number":return e+"";default:return'"'+e+'"'}};var save_object_2_cookie=function(e,t){if(!t){set_cookie(e,"");return}var n="";for(var r in t){if(n.length>0){n+=","}n+=r+":"+wrap_value(t[r])}n="{"+n+"}";set_cookie(e,n)};var get_object_from_cookie=function(c_name){var json=get_cookie(c_name);var ret;eval("ret = "+(json?json:null)+";");return ret};var get_device_dpi=function(e){if(!is_iphone()&&!is_ipad()&&!is_android()){if(e){e(1)}return 1}var t=document.createElement("style");var n=document.createElement("div");n.id="dpi-detector-01";var r=[{ratio:1,pixel:"10px"},{ratio:1.5,pixel:"15px"},{ratio:2,pixel:"20px"}];t.innerText="";for(var i=0;i<r.length;i++){t.innerText+="@media (-webkit-min-device-pixel-ratio:"+r[i].ratio+") {#"+n.id+"{font-size:"+r[i].pixel+" !important;}}"}document.documentElement.appendChild(t).appendChild(n);window.setTimeout(function(){var o=getComputedStyle(n,null).getPropertyValue("font-size");for(var u=0;u<r.length;u++){if(o==r[i].pixel){if(e){e(r[i].ratio)}return r[i].ratio}}t.parentNode.removeChild(t);n.parentNode.removeChild(n);if(e){e(1)}return 1},100);return 0};var get_query_path=function(e,t){var n=t.split(",");var r="";for(var i=0;i<n.length;i++){r+="#"+e+" "+n[i]+(i===n.length-1?"":", ")}return r};var is_small_screen=function(){if(is_android()){if(navigator.userAgent.match(/Mobile/i)){return true}return false}if(Math.max(screen.height,screen.width)>1e3){return false}return true};var is_swipable_device=function(){if(!is_iphone()&&!is_ipad()&&!is_android()){return false}return true};var is_large_screen_mode=function(e){if(e.screenmode.toUpperCase()==="LARGE"){return true}if(e.screenmode.toUpperCase()==="SMALL"){return false}if(!is_small_screen()&&!is_small_android()&&!is_iphone()){return true}return false};var is_earlier_ie=function(){if($.browser.msie&&$.browser.version<9){return true}return false};var is_ie8=function(){return $.browser.msie&&$.browser.version<9&&$.browser.version>7};var is_firefox3=function(){var e=$.browser;if(e.mozilla&&e.version.slice(0,3)=="1.9"){return true}return false};var format_color=function(e){e=e.replace(/#/g,"");if(e.match(/^[0-9a-f]{3,6}$/i)){return"#"+e}return e};var need_new_window=function(e){if(typeof e.expandinnewpage==="boolean"){return e.expandinnewpage}var t=e.expandinnewpage.toUpperCase();if(t==="TRUE"){return true}if(t==="FALSE"){return false}if(is_iphone()||is_ipad()){if(has_viewport_locked()){return false}return true}return false};var is_new_expanded_window=function(){return typeof expanded_jb_gallery!="undefined"&&expanded_jb_gallery};var is_adobe_air=function(){return navigator.userAgent.match(/AdobeAIR/i)};var show_real_fullscreen=function(e){var t=document.getElementById(e);if(t.requestFullScreen){t.requestFullScreen()}else{if(t.mozRequestFullScreen){t.mozRequestFullScreen()}else{if(t.webkitRequestFullScreen){t.webkitRequestFullScreen()}else{if(t.msRequestFullscreen){t.msRequestFullscreen()}}}}};var exit_fullscreen=function(){if(document.cancelFullScreen){document.cancelFullScreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}}}}};var support_real_fullscreen=function(){if(document.cancelFullScreen){return true}else{if(document.mozCancelFullScreen){return true}else{if(document.webkitCancelFullScreen){return true}else{if(document.msFullscreenEnabled){return true}}}}return false};var is_in_real_fullscreen=function(){if(!screen||!window||!screen.height||!window.innerHeight){return false}var e=Math.max(screen.height,screen.width);var t=Math.max(window.innerHeight,window.innerWidth);if(e-t>10){return false}return true};var exit_support_real_fullscreen=function(){if(document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen){return true}return false};var add_fullscreen_listener=function(e){if(typeof e!="function"){return}if(!support_real_fullscreen()){return}document.addEventListener("fullscreenchange",function(){e(document.fullscreen)},false);document.addEventListener("mozfullscreenchange",function(){e(document.mozFullScreen)},false);document.addEventListener("webkitfullscreenchange",function(){e(document.webkitIsFullScreen)},false);document.addEventListener("MSFullscreenChange",function(){e(document.msFullscreenElement!=null)},false)};var is_side_layout=function(e){var t=e.thumbsposition.toUpperCase();return t==="LEFT"||t==="RIGHT"};var add_font_icon_4_ie8=function(e,t){if(!$.browser.msie||$.browser.version>=9){return""}var n=e.buttonbariconrealsize?e.buttonbariconrealsize+"px;":"";return"<span style=\"font-family: 'juicebox';"+n+'">'+t+"</span>"};var get_text_shadow_style=function(e,t,n){if(is_earlier_ie()){return""}var r=t.toLowerCase()==="transparent"?"0px 0px 0px ":"1px 1px 2px ";if(is_small_android()||is_iphone()){return(n?"":"-webkit-text-shadow: ")+r+format_color(t)+";"}return(n?"":"text-shadow: ")+r+format_color(e)+(n?"":";")};var get_font_shadow_style=function(e,t,n){if(is_earlier_ie()){return""}if(is_small_android()||is_iphone()){return"-webkit-text-shadow: 0px 0px "+n+"px "+format_color(t)+";"}return"text-shadow: 0px 0px "+n+"px "+format_color(e)+";"};var get_shadow_style_string=function(e,t,n,r){if(is_earlier_ie()){return""}if(is_small_android()||is_iphone()){return(r?"":"-webkit-box-shadow: ")+"0px 0px "+n+"px "+format_color(t)+";"}return(r?"":"box-shadow: ")+"0px 0px "+n+"px "+format_color(e)+(r?"":";")};var get_button_bar_style=function(e,t){var n="";if(e.buttonbarbackcolor){n+="background-color:"+format_color(e.buttonbarbackcolor)+";"}if(is_earlier_ie()){var r=parseInt(e.buttonbariconrealsize);var i="auto;";if(r){i=2*r+"px;"}n+="height:"+i}else{if(t){n+="padding:0;height:auto;border-radius:3px;"}}return n};var get_button_bar_icon_style=function(e,t){var n="";if(e.buttonbariconrealsize){var r=parseInt(e.buttonbariconrealsize);n+="font-size:"+e.buttonbariconrealsize+(r?"px;":";");if(!t){var i=parseInt(r/2);if(is_ie8()){i=parseInt(r/4)}if(r){n+="border-top:"+i+"px solid transparent;height:"+parseInt(1.5*r)+"px;width:"+2*r+"px;"}}else{if(r){n+="height:"+(2*r-parseInt(r/2))+"px;width:"+2*r+"px;"}}}if(e.buttonbariconcolor){n+="color:"+format_color(e.buttonbariconcolor)+";"}if(e.buttonbarshadowcolor){n+=get_font_shadow_style(e.buttonbarshadowcolor,e.buttonbarshadowcolora,e.buttonbarshadowblur)}return n};var get_thumb_size=function(e){var t,n;if(e.usethumbdots){t=20;n=20}else{t=e.thumbwidth;n=e.thumbheight}return{width:t,height:n}};var btnOriginalSize=28;var get_nav_btn_size=function(e){var t=btnOriginalSize;var n=parseInt(e.navbuttoniconrealsize);if(n){t=parseInt(1.4*n)}return t};var navSizeThresHold4Ie=25;var get_nav_btn_size_style=function(e,t){var n=get_nav_btn_size(e);if(!n){return""}var r=parseInt(e.navbuttoniconrealsize);if(t){if(!r){r=18}var i=parseInt((n-r)/2);n-=i}if($.browser.msie&&$.browser.version<10&&$.browser.version>=9&&r>navSizeThresHold4Ie){var s=n-1;return"height:"+s+"px;width:"+n+"px;"}return"height:"+n+"px;width:"+n+"px;"};var get_nav_icon_style=function(e){var t="";if(e.navbuttoniconrealsize){var n=parseInt(e.navbuttoniconrealsize);var r=get_nav_btn_size(e);var i="";if(r){var s=parseInt((r-n)/2);var o=0;if(is_ie8()){o=s}var u=$.browser.msie&&$.browser.version<10&&$.browser.version>=9&&n>navSizeThresHold4Ie?1:0;i+=get_nav_btn_size_style(e,true)+"padding-left:"+parseInt(s/2)+"px;padding-right:"+parseInt(s/2)+"px;padding-top:"+(s+u-o)+"px;"}t+="font-size:"+e.navbuttoniconrealsize+(n?"px;":";")+i;t+="border-radius:"+e.navbuttoniconrealsize+"px;"}if(e.navbuttoniconcolor){t+="color:"+format_color(e.navbuttoniconcolor)+";"}if(e.navbuttonshadowcolor){t+=get_font_shadow_style(e.navbuttonshadowcolor,e.navbuttonshadowcolora,e.navbuttonshadowblur)}if(e.navbuttonbackcolor){t+="background-color:"+format_color(e.navbuttonbackcolor)+";"}return t};var get_button_bar_button_size=function(e){if(!e.buttonbariconrealsize){return{buttonWidth:38,padding:8}}return{buttonWidth:2*e.buttonbariconrealsize,padding:8}};var get_popup_position_string=function(e,t){var n="height="+t+",width="+e;return n};var getMsPointerXy=function(e){var t=e.touches?e.touches.length:0;var n=-1,r=-1;if(t>0){n=e.touches[0].screenX;r=e.touches[0].screenY}if(t>1){n=e.touches[1].screenX;r=e.touches[1].screenY}return{x:n,y:r}};var is_buttonbarposition_default=function(e){var t=e.buttonbarposition.toUpperCase();if(t!="TOP"&&t!="NONE"&&t!="OVERLAY_IMAGE"){return true}return false};var is_captionposition_default=function(e){var t=e.captionposition.toUpperCase();if(t!="BOTTOM"&&t!="NONE"&&t!="OVERLAY_IMAGE"&&t!="BELOW_IMAGE"&&t!="BELOW_THUMBS"){return true}return false};var is_touchable_desktop=function(){if(window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints){return true}return false};var is_touchable_device=function(e){if(is_swipable_device()||is_touchable_desktop()||e.forcetouchmode){return true}return false};var init_components=function(e,t){t=t.replace(/ /g,"");var n=t.split(",");for(var r=0;r<n.length;r++){if(e[n[r]]&&e[n[r]].init){e[n[r]].init()}}return false};var setup_components_event=function(e,t){t=t.replace(/ /g,"");var n=t.split(",");for(var r=0;r<n.length;r++){if(e[n[r]]&&e[n[r]].setEvent){e[n[r]].setEvent()}}return false};var set_components_position=function(e,t,n){t=t.replace(/ /g,"");var r=t.split(",");for(var i=0;i<r.length;i++){if(e[r[i]]&&e[r[i]].setPosition){e[r[i]].setPosition(n)}}return false};var reppaint_components=function(e,t,n,r){t=t.replace(/ /g,"");var i=t.split(",");for(var s=0;s<i.length;s++){if(e[i[s]]&&e[i[s]].repaint){e[i[s]].repaint(n)}}if(n&&r){window.setTimeout(function(){r()},n)}return false};var show_hide_controls=function(e,t,n){if(n){e.stop(false,true);if(t){if(!e.is(":visible")||e.css("opacity")==0||is_swipable_device()){e.fadeIn(n)}}else{e.fadeOut(n)}return}if(t){e.css("opacity",1).show()}else{e.hide()}};var ios_version=function(){var e=navigator.userAgent.match(/OS \d?_/g);if(!e){return 0}return parseFloat(e[0].replace(/OS /g,""))};var is_mac_os=function(){if(navigator.userAgent.match(/Mac OS X/i)){return true}return false};var is_retina_display=function(){if(!is_mac_os()){return false}var e=1;if(window.devicePixelRatio!==undefined){e=window.devicePixelRatio}return e>1.5};var is_safari=function(){return!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)};var get_css3_prefix=function(){var e=false;var t="";if(is_firefox3()){}else{if(is_firefox()){e=true;if($.browser.version<26){t="-moz-"}}else{if(is_chrome()){e=true;if($.browser.version<33){t="-webkit-"}}else{if(is_opera()){e=true;if($.browser.version<12){t="-o-"}}else{if($.browser.msie&&$.browser.version>=10||document.msFullscreenEnabled){e=true}}}}}return{support:e,prefix:t}};var clean_up_transition=function(e,t){if(!e){return}if(!t){t=get_css3_prefix()}var n={};if(t.support){n[t.prefix+"transition"]="";e.css(n)}};var slidingTimer={};var currentAnimationObjs;var slide=function(e,t,n,r,i,s){var o=get_css3_prefix();var u={};clean_up_transition(t,o);if(!o.support){imgs.animate({left:(n<0?"-=":"+=")+Math.abs(n),avoidTransforms:!e.use_webkit_transform,useTranslate3d:e.use_3d_transform},r,"easeInOutQuart")}else{u[o.prefix+"transition"]="left "+parseInt(r)+"ms ease-in";t.css(u);window.setTimeout(function(){t.each(function(){var e=$(this);e.css({left:parseInt(e.css("left"))+n})})},100)}if(!i){i="default"}if(slidingTimer[i]){window.clearTimeout(slidingTimer[i]);clean_up_transition(currentAnimationObjs,o);currentAnimationObjs.stop(false,true)}currentAnimationObjs=t;if(s&&r){slidingTimer[i]=window.setTimeout(function(){slidingTimer[i]=0;s()},r+10)}};var fadeInContext={};var fadeOutContext={};var stop_fading_in=function(e,t,n){var r=get_css3_prefix();if(!e){e=fadeInContext[t].object}if(!e){return}clean_up_transition(e,r);if(fadeInContext[t].timer||fadeInContext[t].starttimer){window.clearTimeout(fadeInContext[t].starttimer);fadeInContext[t].starttimer=0;window.clearTimeout(fadeInContext[t].timer);fadeInContext[t].timer=0;fadeInContext[t].object.css({opacity:1}).show();if(n&&fadeInContext[t].callback){fadeInContext[t].callback()}}};var stop_fading_out=function(e,t,n){var r=get_css3_prefix();if(!e){e=fadeOutContext[t].object}if(!e){return}clean_up_transition(e,r);if(fadeOutContext[t].timer){window.clearTimeout(fadeOutContext[t].timer);fadeOutContext[t].timer=0;fadeOutContext[t].object.hide();if(n&&fadeOutContext[t].callback){fadeOutContext[t].callback()}}};var stop_fading=function(e,t){if(!e){e="default"}if(fadeInContext[e]){stop_fading_in(null,e,t)}if(fadeOutContext[e]){stop_fading_out(null,e,t)}};var fade_in=function(e,t,n,r,i,s,o){if(!s){s="default"}if(!fadeInContext[s]){fadeInContext[s]={}}stop_fading_in(t,s,o);var u=get_css3_prefix();var a={};clean_up_transition(t,u);if(!n){t.css({opacity:1});t.show()}else{if(!r&&is_android()){t.fadeIn(n)}else{if(r){t.css({opacity:0})}else{t.css({opacity:0,display:"block"})}fadeInContext[s].object=t;if(!u.support){if(is_safari()){t.fadeIn(n)}else{t.animate({opacity:"+=1",avoidTransforms:!e.use_webkit_transform,useTranslate3d:e.use_3d_transform},n,"easeInOutQuart",null)}}else{a[u.prefix+"transition"]="opacity "+parseInt(n)+"ms ease-in";t.css(a);fadeInContext[s].starttimer=window.setTimeout(function(){fadeInContext[s].starttimer=0;t.css({opacity:1})},50)}}if(i){fadeInContext[s].callback=i;fadeInContext[s].timer=window.setTimeout(function(){fadeInContext[s].timer=0;i()},n+10)}}};var fade_out=function(e,t,n,r,i,s){if(!t.is(":visible")){return}if(!i){i="default"}if(!fadeOutContext[i]){fadeOutContext[i]={}}stop_fading_out(t,i,s);if(r){fadeOutContext[i].callback=r}fadeOutContext[i].object=t;var o=get_css3_prefix();if(!n){t.hide()}else{if(!o.support){if(is_safari()||$.browser.msie&&$.browser.version<=9){t.fadeOut(n)}else{t.animate({opacity:"-=0",avoidTransforms:!e.use_webkit_transform,useTranslate3d:e.use_3d_transform},n,"easeInOutQuart",null)}fadeOutContext[i].timer=fadeOutContext[i].timer=window.setTimeout(function(){t.hide();fadeOutContext[i].timer=0;if(r){r()}},n)}else{var u={};u[o.prefix+"transition"]="opacity "+parseInt(n)+"ms ease-in";t.css(u);window.setTimeout(function(){t.css({opacity:0});fadeOutContext[i].timer=window.setTimeout(function(){fadeOutContext[i].timer=0;t.hide();if(r){r()}},n+10)},20)}}};var get_transition_style=function(e){if(e<=0||!e){return""}var t=get_css3_prefix();if(!t.support){return""}return t.prefix+"transition:opacity "+ +parseInt(e)+"ms ease-in;"};return{ship:is_pro_version===u_skey,concate_path:concatenate_path,is_page_scrolling:is_it_scrolling,is_in_iframe:in_iframe,add_viewport_meta_tag_4_device:add_viewport_meta,set_viewport_meta:set_viewport_meta,is_iphone:is_iphone,is_iphone_chrome:is_iphone_chrome,is_ipad:is_ipad,is_android:is_android,is_small_android:is_small_android,get_android_ver:get_android_ver,is_chrome:is_chrome,is_opera:is_opera,get_current_path:get_current_path,get_query_string_value:get_qs_value,save_object_2_cookie:save_object_2_cookie,get_object_from_cookie:get_object_from_cookie,get_device_dpi:get_device_dpi,get_query_path:get_query_path,is_swipable_device:is_swipable_device,is_large_screen_mode:is_large_screen_mode,is_earlier_ie:is_earlier_ie,set_viewport_value:set_viewport_value,format_color:format_color,need_viewport_meta:need_viewport_meta,host_has_viewport_meta:host_has_viewport_meta,get_viewport_meta_content:get_viewport_meta_content,set_viewport_meta_content:set_viewport_meta_content,is_firefox:is_firefox,is_firefox3:is_firefox3,get_js_folder_url:get_js_folder_url,need_new_window:need_new_window,convert_to_absolute_path:convert_to_absolute_path,is_adobe_air:is_adobe_air,is_new_expanded_window:is_new_expanded_window,show_real_fullscreen:show_real_fullscreen,is_in_real_fullscreen:is_in_real_fullscreen,exit_fullscreen:exit_fullscreen,exit_support_real_fullscreen:exit_support_real_fullscreen,add_fullscreen_listener:add_fullscreen_listener,is_ie8:is_ie8,is_mobile_ie:is_mobile_ie,support_real_fullscreen:support_real_fullscreen,is_side_layout:is_side_layout,add_font_icon_4_ie8:add_font_icon_4_ie8,get_button_bar_icon_style:get_button_bar_icon_style,get_button_bar_style:get_button_bar_style,get_nav_icon_style:get_nav_icon_style,get_nav_btn_size:get_nav_btn_size,get_nav_btn_size_style:get_nav_btn_size_style,get_shadow_style_string:get_shadow_style_string,add_js_tag:add_js_tag,get_button_bar_button_size:get_button_bar_button_size,get_thumb_size:get_thumb_size,get_popup_position_string:get_popup_position_string,get_text_shadow_style:get_text_shadow_style,getMsPointerXy:getMsPointerXy,is_touchable_desktop:is_touchable_desktop,is_buttonbarposition_default:is_buttonbarposition_default,is_captionposition_default:is_captionposition_default,is_touchable_device:is_touchable_device,setup_components_event:setup_components_event,reppaint_components:reppaint_components,init_components:init_components,show_hide_controls:show_hide_controls,set_components_position:set_components_position,is_retina_display:is_retina_display,ios_version:ios_version,is_ie_after_11:is_ie_after_11,is_ios_mobile_chrome:is_ios_mobile_chrome,is_windows:is_windows,fade_in:fade_in,fade_out:fade_out,is_mac_os:is_mac_os,get_transition_style:get_transition_style,clean_up_transition:clean_up_transition,slide:slide,stop_fading:stop_fading}};var juicebox_config_manager=function(e,t){var n=e;var r=t;var i=false;var s=true;var o=false;var u="";var a="";var f={containerid:"juicebox-container",debugmode:false,forcetouchmode:false,usefullscreenexpand:false,autofullscreenexpand:false,expandinnewpage:"AUTO",gallerywidth:"100%",galleryheight:"100%",backgroundcolor:"",backgroundurl:"",backgroundscale:"STRETCH",expandedbackgroundcolor:"",galleryfontface:"",backgroundopacity:"1",textcolor:"",textshadowcolor:"",textshadowcolora:"",topbackcolor:"",topbackopacity:"0",captionbackcolor:"",captionbackopacity:"1",imageframecolor:"",imageframeopacity:"1",thumbframecolor:"rgba(255, 255, 255, .5)",thumbframeopacity:"",thumbframewidth:0,thumbhoverframewidth:2,thumbselectedframewidth:10,thumbcornerradius:0,thumbshadowcolor:"rgba(0, 0, 0, .4)",thumbshadowcolora:"",thumbshadowblur:5,imageshadowcolor:"rgba(0, 0, 0, .4)",imageshadowcolora:"",imageshadowblur:10,stagepadding:0,imagepadding:0,framewidth:0,enablekeyboardcontrols:true,firstimageindex:-1,randomizeimages:false,showpreloader:true,screenmode:"AUTO",languagelistall:'Previous|Next|Start AutoPlay|Stop AutoPlay|Play Audio|Pause Audio|Show Thumbnails|Expand Gallery|Close Gallery|Open Image in New Window|Download Image|About|AutoPlay ON|AutoPlay OFF|Show Thumbnails|Hide Thumbnails|Show Information|Next Image|Previous Image|Hide Information|Juicebox can not display locally in this browser. <a href="http://www.juicebox.net/support/faq/#local">More Info.</a>|Juicebox Error: Config XML file not found.|Juicebox Error: Cannot find div with id: "|"|Juicebox Error: Theme CSS file not found|Buy this Image|Share on Facebook|Share on Twitter|Share on Google+|Share on Pinterest|To use Fotomoto please set the Fotomoto Store Id|Share on Tumblr|Go Back|of|Images',languagelist:"",splashbuttontext:"View Gallery",imagelocking:false,enablelooping:false,changeimageonhover:false,maximagewidth:1024,maximageheight:768,imageclickmode:"NAVIGATE",imagescalemode:"SCALE_DOWN",imagepreloading:"PAGE",imagetransitiontime:.5,fadetime:.4,imagetransitiontype:"SLIDE",imagevalign:"CENTER",imagehalign:"CENTER",showimageoverlay:"AUTO",showimagenav:true,imagenavposition:"STAGE",showbigplaybutton:false,thumbsposition:"BOTTOM",thumbnavposition:"CENTER",thumbwidth:85,thumbheight:85,thumbpadding:10,thumbhseparation:10,thumbvseparation:10,thumbsvalign:"CENTER",thumbshalign:"CENTER",thumbpreloading:"PAGE",changecaptiononhover:false,usethumbdots:false,thumbdotcolor:"rgba(0, 0, 0, .4)",thumbdothovercolor:"rgba(255,255,255,1)",showpagingtext:false,showsmallpagingtext:true,showsmallthumbnav:false,showsmallthumbsbutton:true,smallthumbsshowtitles:false,smallthumbslayoutstyle:"GRID",smallthumbslidetime:.5,topareaheight:50,buttonbarposition:"OVERLAY",buttonbarhalign:"RIGHT",showopenbutton:true,showexpandbutton:true,showinfobutton:false,showdownloadbutton:false,showsharebutton:true,shownavbuttons:false,showautoplaybutton:false,showaudiobutton:false,showthumbsbutton:true,showthumbsonload:true,showsmallthumbsonload:true,buttonbariconsize:0,buttonbariconrealsize:0,buttonbariconcolor:"",buttonbariconopacity:"",buttonbariconhovercolor:"",buttonbariconhoveropacity:"",buttonbarshadowcolor:"",buttonbarshadowcolora:"",buttonbarshadowblur:5,buttonbarbackcolor:"",buttonbarbackopacity:"1",navbuttoniconsize:0,navbuttoniconrealsize:0,navbuttoniconcolor:"rgba(255, 255, 255, 1)",navbuttoniconopacity:"",navbuttoniconhovercolor:"",navbuttoniconhoveropacity:"",navbuttonshadowcolor:"",navbuttonshadowcolora:"",navbuttonshadowblur:5,navbuttonbackcolor:"rgba(0, 0, 0, .5)",navbuttonbackcoloropacity:"",imagenavpadding:20,imagecornerradius:0,showoverlayonload:true,gallerytitle:"",gallerytitleposition:"OVERLAY",gallerytitlehalign:"LEFT",captionposition:"OVERLAY",captionhalign:"LEFT",maxcaptionheight:120,showimagenumber:true,enableautoplay:false,autoplayonload:false,displaytime:5,showautoplaystatus:true,gonextonautoplay:false,autoplaythumbs:true,audiourlmp3:"",audiourlogg:"",loopaudio:true,playaudioonload:false,audiovolume:.8,showsmallbackbutton:false,backbuttonuseicon:false,backbuttontext:"< Back",backbuttonurl:"",backbuttonposition:"NONE",backbuttonhalign:"LEFT",usefixedlayout:false,showsplashpage:"AUTO",splashtitle:"",splashimageurl:"",splashshowimagecount:true,gallerydescription:"",enableseo:false,seoadditionaltext:"",enabledirectlinks:false,fotomotostoreid:"",sharefacebook:false,sharetwitter:false,sharegplus:false,sharepinterest:false,sharetumblr:false,shareemail:false,configurl:"config.xml",themeurl:r.get_js_folder_url()+"classic/theme.css",baseurl:"",useflickr:false,flickrusername:"",flickrtags:"",flickruserid:"",flickrsetid:"",flickrgroupid:"",flickrtagmode:"ALL",flickrsort:"DATE-POSTED-DESC",flickrimagesize:"LARGE",flickrimagecount:50,flickrextraparams:"",flickrshowtitle:true,flickrshowdescription:false,flickrshowpagelink:false,flickrpagelinktext:"View on Flickr",theme:"classic",showcaption:true,slidecaption:false,maxthumbcolumns:10,maxthumbrows:1,thumb_load_placeholder:"<div class='jb-status-thumb-loading'><div>",main_load_placeholder:"<div class='jb-status-loading'></div>",pages_header:"",sync_caption_dimensions:true,minimagegap:60,use_webkit_transform:true,use_3d_transform:!(r.is_in_iframe()&&r.is_chrome()),onload:function(){}};var l=",onload,";var c=",containerid,gallerytitle,gallerywidth,galleryheight,backgroundcolor,overlaycolor,framecolor,showopenbutton,showexpandbutton,useflickr,flickrusername,flickrtags,configurl,themeurl,baseurl,debugmode,showthumbsbutton,maximagewidth,maximageheight,languagelist,usefullscreenexpand,textcolor,thumbframecolor,usethumbdots,";var h={usefullscreenexpand:{appliedValues:[true],"default":false},showthumbsonload:{appliedValues:[false],"default":true},showthumbsbutton:{appliedValues:[false],"default":true},usethumbdots:{appliedValues:[true],"default":false},captionposition:{appliedValues:["BELOW_IMAGE","BOTTOM","OVERLAY_IMAGE","BELOW_THUMBS"],"default":"OVERLAY"},captionhalign:{appliedValues:["CENTER","RIGHT"],"default":"LEFT"},buttonbarposition:{appliedValues:["TOP"],"default":"OVERLAY"},backbuttonposition:{appliedValues:["TOP","OVERLAY"],"default":"NONE"},backbuttonhalign:{appliedValues:["RIGHT","CENTER"],"default":"LEFT"},stagepadding:{appliedValues:null,"default":0},imagepadding:{appliedValues:null,"default":0},framewidth:{appliedValues:null,"default":0},topbackcolor:{appliedValues:null,"default":""},thumbsposition:{appliedValues:["TOP","LEFT","RIGHT"],"default":"BOTTOM"},thumbnavposition:{appliedValues:["BOTTOM"],"default":"CENTER"},imageframecolor:{appliedValues:null,"default":""},imagetransitiontype:{appliedValues:null,"default":"SLIDE"},changeimageonhover:{appliedValues:[true],"default":false},gallerytitleposition:{appliedValues:["TOP","ABOVE_THUMBS"],"default":"OVERLAY"},gallerytitlehalign:{appliedValues:["RIGHT","CENTER"],"default":"LEFT"},buttonbarhalign:{appliedValues:["CENTER","LEFT"],"default":"RIGHT"},thumbshalign:{appliedValues:["RIGHT","LEFT"],"default":"CENTER"},thumbsvalign:{appliedValues:["TOP","BOTTOM"],"default":"CENTER"},imagehalign:{appliedValues:["RIGHT","LEFT"],"default":"CENTER"},imagevalign:{appliedValues:["TOP","BOTTOM"],"default":"CENTER"}};var p=function(e){if(!e){return"100%"}if(typeof e==="number"||e.indexOf("%")<=0){return parseInt(e)+"px"}return e};var d=function(e,t){if(!e){return t}var n=e.split("#")[0].split("?")[0].split("/");if(n.length<=0){return t}if(n.length<=1){return""}if(n[n.length-1].toLowerCase().indexOf("theme.css")<0){return t}return n[n.length-2]};var v=function(e,t,n,r){if(r){return r}if(!e||e.length<=t){return n}return e[t]};var m=function(e,t,n,r,i){if(!r&&f.languagelistall[e]){r=f.languagelistall[e]}f.languagelistall[e]=v(t,n,r,i)};var g=function(e,t){if(!t){return true}for(var n=0;n<t.length;n++){if(typeof e==="string"){if(t[n].toUpperCase()===e.toUpperCase()){return true}}else{if(t[n]===e){return true}}}return false};var y=function(){if(f.showexpandbutton==false){f.originalUsefullscreenexpand=f.usefullscreenexpand;f.usefullscreenexpand=false}if(f.audiovolume<0){f.audiovolume=0}if(f.audiovolume>1){f.audiovolume=1}if(!f.showpreloader){f.main_load_placeholder=f.main_load_placeholder.replace("jb-status-loading","jb-status-no-loading")}if(f.backbuttonuseicon){f.backbuttontext=" "}f.galleryfontface=decodeURI(f.galleryfontface).replace(/\+/g," ").replace(/\"/g,"'");var e=f.thumbsposition.toUpperCase();if(e==="LEFT"||e==="RIGHT"){f.usethumbdots=false}var t=r.is_large_screen_mode(f);if(t){f.showsmallbackbutton=false;return}for(var n in f){if(!h[n]){continue}if(!g(f[n],h[n].appliedValues)){continue}f[n]=h[n]["default"]}if(r.is_swipable_device()){if(f.forcetouchmode){f.forcetouchmodereversed=true}f.forcetouchmode=false}f.thumbselectedframewidth=f.thumbframewidth};var b=function(){if(typeof f.languagelistall!="string"&&!f.languagelist){return}var e=f.languagelist.split("|");f.languagelistbak=f.languagelist;f.languagelist="";var t=e.length;var n=7;var r=25;if(N()){if(t-r>0){e.splice(r,t-r)}}else{if(t-n>0){e.splice(r,t-n)}}var i=null;if(typeof f.languagelistall==="string"){i=f.languagelistall.split("|");f.languagelistall={}}m("p",i,0,"");m("n",i,1,"");m("strta",i,2,"",e[12]);m("stpa",i,3,"",e[13]);m("plya",i,4,"",e[8]);m("psa",i,5,"",e[9]);m("st",i,6,"",e[0]);m("gf",i,7,"",e[2]);m("ef",i,8,"",e[3]);m("oiinw",i,9,"",e[4]);m("di",i,10,"");m("abt",i,11,"");m("aon",i,12,"",e[14]);m("aoff",i,13,"",e[15]);m("stlsm",i,14,"",e[0]);m("htlsm",i,15,"",e[1]);m("sinfo",i,16,"",e[10]);m("gonxt",i,17,"",e[6]);m("goprv",i,18,"",e[7]);m("hdinfo",i,19,"",e[11]);m("lcchm",i,20,"");m("ae",i,21,"");m("noid01",i,22,"");m("noid02",i,23,"");m("nothm",i,24,"");m("fotomoto",i,25,"",e[17]);m("facebook",i,26,"",e[18]);m("twitter",i,27,"",e[19]);m("gplus",i,28,"",e[20]);m("printerest",i,29,"",e[21]);m("fotomotomissingid",i,30,"");m("tumblr",i,31,"",e[22]);m("gobk",i,32,"",e[16]);m("pgnum",i,33,"",e[23]);m("splimgs",i,34,"",e[5])};var w=function(){f.galleryheight=p(f.galleryheight);f.gallerywidth=p(f.gallerywidth);f.theme=d(f.themeurl,f.theme);if(f.thumbwidth<20||f.thumbwidth>600){f.thumbwidth=96}if(f.thumbheight<20||f.thumbheight>600){f.thumbheight=96}b();var e;if(f){if(f.backgroundcolor){e=x(f.backgroundcolor);f.backgroundcolor=e.color;if(e.fullFormate){f.backgroundopacity=e.opacity}}if(f.expandedbackgroundcolor){e=x(f.expandedbackgroundcolor);f.expandedbackgroundcolor=e.color;if(e.fullFormate){f.backgroundopacity=e.opacity}}if(f.textcolor){e=x(f.textcolor);f.textcolor=e.color}if(f.textshadowcolor){if(f.textshadowcolor.replace(/ /g,"").toLowerCase()==="rgba(0,0,0,0)"){f.textshadowcolora="transparent";a+="textshadowcolora,"}else{e=x(f.textshadowcolor);f.textshadowcolora=e.color}}if(f.topbackcolor){e=x(f.topbackcolor);f.topbackcolor=e.color;if(e.fullFormate){f.topbackopacity=e.opacity}}if(f.captionbackcolor){e=x(f.captionbackcolor);f.captionbackcolor=e.color;if(e.fullFormate){f.captionbackopacity=e.opacity}}if(f.buttonbarbackcolor){e=x(f.buttonbarbackcolor);f.buttonbarbackcolor=e.color;if(e.fullFormate){f.buttonbarbackopacity=e.opacity}}if(f.imageframecolor){e=x(f.imageframecolor);f.imageframecolor=e.color;if(e.fullFormate){f.imageframeopacity=e.opacity}}if(f.thumbframecolor){e=x(f.thumbframecolor);f.thumbframecolor=e.color;if(e.fullFormate){f.thumbframeopacity=e.opacity}}if(f.thumbshadowcolor){e=x(f.thumbshadowcolor);f.thumbshadowcolora=e.color}if(f.imageshadowcolor){e=x(f.imageshadowcolor);f.imageshadowcolora=e.color}if(f.buttonbariconcolor){e=x(f.buttonbariconcolor);f.buttonbariconcolor=e.color;if(e.fullFormate){f.buttonbariconopacity=e.opacity}}if(f.buttonbariconhovercolor){e=x(f.buttonbariconhovercolor);f.buttonbariconhovercolor=e.color;if(e.fullFormate){f.buttonbariconhoveropacity=e.opacity}}if(f.buttonbarshadowcolor){e=x(f.buttonbarshadowcolor);f.buttonbarshadowcolora=e.color}if(f.navbuttoniconcolor){e=x(f.navbuttoniconcolor);f.navbuttoniconcolor=e.color;if(e.fullFormate){f.navbuttoniconopacity=e.opacity}}if(f.navbuttoniconhovercolor){e=x(f.navbuttoniconhovercolor);f.navbuttoniconhovercolor=e.color;if(e.fullFormate){f.navbuttoniconhoveropacity=e.opacity}}if(f.navbuttonbackcolor){e=x(f.navbuttonbackcolor);f.navbuttonbackcolor=e.color;if(e.fullFormate){f.navbuttonbackcoloropacity=e.opacity}}if(f.navbuttonshadowcolor){e=x(f.navbuttonshadowcolor);f.navbuttonshadowcolora=e.color}if(f.thumbdotcolor){e=x(f.thumbdotcolor);f.thumbdotcolor=e.color}if(f.thumbdothovercolor){e=x(f.thumbdothovercolor);f.thumbdothovercolor=e.color}if(f.buttonbariconsize===0){f.buttonbariconsize=20}f.buttonbariconrealsize=f.buttonbariconsize;if(f.navbuttoniconsize===0){f.navbuttoniconsize=20}f.navbuttoniconrealsize=f.navbuttoniconsize;var t=r.is_large_screen_mode(f);if(a.indexOf("maxthumbrows,")<0){if(t){if(a.indexOf("screenmode,")>-1){f.maxthumbrows=1}}}if(t){f.showsmallthumbsbutton=true;if(f.usethumbdots&&f.maxthumbcolumns<=1&&f.thumbnavposition.toUpperCase()==="BOTTOM"){f.maxthumbcolumns=2}f.thumbhseparation=f.thumbpadding/2;f.thumbvseparation=f.thumbpadding/2}else{f.showthumbsbutton=true;f.maxthumbcolumns=1e3;f.maxthumbrows=1e3;f.showpagingtext=f.showsmallpagingtext}if(r.is_side_layout(f)){if(f.thumbshalign.toUpperCase()!="CENTER"){f.thumbshalign="CENTER"}}else{if(f.thumbsvalign.toUpperCase()!="CENTER"){f.thumbsvalign="CENTER"}}if(r.is_in_iframe()){f.fotomotostoreid=""}if(r.is_swipable_device()){f.buttonbariconhovercolor="";f.navbuttoniconhovercolor=""}if(f.expandinnewpage===true||(f.expandinnewpage+"").toUpperCase()==="TRUE"){f.usefullscreenexpand=false}}};var E=function(e){var t=e.toString(16);if(t.length>=2){return t}if(t.length===1){return"0"+t}if(t.length===0){return"00"}return t};var S=function(e){return e&&parseInt(e,16)>0};var x=function(e){if(!e){return{color:"",opacity:T(1)}}var t=e.toLowerCase().replace(/ /g,"");if(t.indexOf("rgb")!==0){if(S(e)){e="#"+e}return{color:e,opacity:T(1),fullFormate:false}}t=t.replace("rgba(","").replace("rgb(","").replace(")","");var r=t.split(",");if(r.length<3||r.length>4){return{color:e,opacity:T(1),fullFormate:false}}var i=e;if(n.browser.msie&&n.browser.version<9){var s=parseInt(r[0]);var o=parseInt(r[1]);var u=parseInt(r[2]);i="#"+E(s)+E(o)+E(u)}if(r.length===3){return{color:i,opacity:T(1),fullFormate:true}}var a=parseFloat(r[3]);if(a<0||a>1){return{color:i,opacity:T(1),fullFormate:true}}return{color:i,opacity:T(a),fullFormate:true}};var T=function(e){if(!(n.browser.msie&&n.browser.version<9)){return e}if((""+e).indexOf("filter")===0){return e}var t=n.browser.version<8?100:parseInt(100*e);return"filter:alpha(opacity="+t+")"};var N=function(){return i||k==="048d7e421a02974b54391bc3463ebd52"};var C=function(e){if(!e){return}var t,n;var r=N();for(var i in e){t=i.toLowerCase();if(typeof f[t]=="undefined"){if(",persistor_param,fullscreen_displaying_mode,parent_gallery,initial_body_css_inline_style,scroll_position,".indexOf(","+t+",")>=0){f[t]=e[t]}continue}n=","+t+",";if(k==="048d7e421a20974d54321bc3563ebd52"){continue}if(!r&&c.indexOf(n)<0){continue}if(l.indexOf(n)>=0){continue}a+=t+",";var s=e[i];var o=typeof f[t];if(o==="string"&&typeof s!="string"){s+=""}f[t]=L(s,o)}w()};var k="048d7e421a20974d54391bc3463ebd52";var L=function(e,t){switch(t){case"boolean":if(typeof e=="boolean"){return e}return e.toLowerCase()=="true"||e.toLowerCase()=="on"||e=="1"?true:false;case"number":return parseFloat(e);default:return e}};var A=function(){var e="";var t=",gallerywidth,galleryheight,containerid,maxthumbrows,maxthumbcolumns,";var n,r;for(var i in f){n=","+i+",";if(l.indexOf(n)>=0){continue}if(t.indexOf(n)>=0){continue}if(k==="048d7e421a20975d64321bc3563ebd52"){continue}r=typeof f[i]=="string"?f[i].replace("#","_p-s_"):f[i];e+=i+"="+encodeURI(r)+"&"}return e};var O=function(){var e=window.location.href.split("?");if(e.length<=1){return null}var t=e[1].split("#");if(t.length<=0){return null}var n=t[0].split("&");var r={};var i,s,o,u;var a;for(var l=0;l<n.length;l++){i=n[l].split("=");if(i.length<2){continue}s=i[0].toLowerCase();u=i[1]?i[1].replace("_p-s_","#"):"";o=decodeURI(u);a=typeof f[s];if(a=="undefined"){continue}r[s]=L(o,a)}return r};var M=function(e){if(!e){return null}var t={};var r,i;var s=n.browser.msie&&e.childNodes.length>1?e.childNodes[1]:e.childNodes[0];if(!s||!s.attributes){return null}var o=n(s.attributes);o.each(function(e,n){r=n.nodeName.toLowerCase();i=typeof f[r];if(i=="undefined"){return}t[r]=L(n.value,i)});return t};var _=function(e){if(!e){e=u}var t=function(e,t,n){if(n<0){n="Thu, 01 Jan 1970 00:00:00 GMT"}else{n=""}document.cookie=e+"="+window.escape(t)+(n===""?"":";expires="+n)+";path=/"};var n=function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(t!==-1){t=t+e.length+1;var n=document.cookie.indexOf(";",t);if(n===-1){n=document.cookie.length}return window.unescape(document.cookie.substring(t,n))}}return""};var r=function(){return e+"svcrntimgi_lf"};var i=function(){return e+"-sv-config-"};var s=function(){return e+"-changed-options-"};var o=function(e){t(r(),"1",null);var n=a.split(",");var o=e.skip?","+e.skip+",":"";var u;for(u=0;u<n.length;u++){if(!n[u]){continue}if(o.indexOf(","+n[u]+",")>=0){continue}t(i()+n[u],encodeURI(f[n[u]]))}var l=","+a;var c=e.skip.split(",");for(u=0;u<c.length;u++){l=l.replace(","+c[u]+",",",")}for(var h in e.config){if(!h){continue}if(l.indexOf(","+h+",")<0){l+=h+","}f[h]=e.config[h];t(i()+h,encodeURI(f[h]))}t(s(),l)};var l=function(){if(!n(r())){return}var e=n(s());if(!e){return}var t=e.split(",");for(var o=0;o<t.length;o++){if(!t[o]){continue}var u=n(i()+t[o]);if(!u){continue}f[t[o]]=L(decodeURI(u),typeof f[t[o]])}b()};var c=function(){t(r(),"",-10)};return{saveConfig:o,loadSavedConfig:l,clearCookie:c}};var D=function(e,t,n){if(window.location.href.indexOf("jbdbgmd=true")>0&&o){i=true}C(M(t));C(e);if(f.debugmode||i){C(O())}u=n;var s=_(u);if(!r.is_new_expanded_window()){s.clearCookie()}else{s.loadSavedConfig()}};var P=function(e,t){C(M(t));C(e);if(f.debugmode||i){C(O())}y()};var H=function(){return f};var B=function(e){C(e);if(f.showexpandbutton==false){f.usefullscreenexpand=false}else{if(f.originalUsefullscreenexpand){f.usefullscreenexpand=true}}};return{isp:s==k,init:D,sync_option_with_dependency:B,sync_options:P,get_config:H,get_query_string:A,get_cookie_manager:_}};var juicebox_gallery_dialog=function(e){var t,n;var r="jb-glry-dlg";var i=function(e){t=e.jquery;n=t("#"+r);if(n.length<=0){t("body").append(s());n=t("#"+r)}};var s=function(){return"<div id='"+r+"' style='display:none;position:absolute;width:100%;height:100%;left:0;top:0;'></div>"};var o=function(){n.hide()};var u=function(){o();n.html("");a(true);f(true)};var a=function(e){if(e){n.siblings(".jb-status-hiding-4-dlg").show().removeClass("jb-status-hiding-4-dlg")}else{n.siblings(":visible").addClass("jb-status-hiding-4-dlg").hide()}};var f=function(e){if(e){t(".jb-status-hiding-4-dlg").show().removeClass("jb-status-hiding-4-dlg")}else{t(".juicebox-gallery:visible").addClass("jb-status-hiding-4-dlg").hide()}};var l=function(e,t){if(e){a(false)}else{f(false)}if(t){n.html(t)}n.show()};var c=function(e,t,r,i){if(e){a(false)}else{f(false)}if(!t){t="rgba(0,0,0,0.7)"}n.css("background-color",t);n.fadeIn(r);window.setTimeout(function(){if(i){i()}},r+10)};var h=function(){return r};i(e);return{initialize:i,hide_dialog:o,cleanup_dialog:u,show_dialog:l,get_id:h,fadein_dialog:c}};var juicebox_sizing_manager=function(e,t,n){function p(e){var t=A(e,"height");if(parseInt(t)===0){return 0}return t}function d(e){var t=A(e,"width");if(parseInt(t)===0){return 0}return t}function g(e,t,n,s,o){var u=t;var a=true;if(i.is_in_iframe()){return{height:r(window).height(),registered:a}}if(i.is_ipad()&&i.ios_version()>=7){if(!i.is_ios_mobile_chrome()){u=window.innerHeight;if(t<n){if(r(window).height()>window.innerHeight&&u<672){u=672}}}else{u=t}}else{if(i.is_iphone()){u=window.innerHeight;if(i.ios_version()<7){if(window.innerHeight>window.innerWidth){if(screen.height-window.innerHeight>80){u+=60}}else{if(screen.width-window.innerHeight>80){u+=60}}}else{u++;if(window.innerHeight<window.innerWidth){u++}}}else{if(i.is_android()){var f=r(window);var l=f.height();var p=f.width();if(i.get_android_ver()<4&&!(m>3.1&&m<4)){l=screen.height;p=screen.width}else{l=v(f.height(),f.width())}var d;if(t>n){d=c(t);u=d.height+1}else{d=h(t);u=d.width}a=d.registered;if(!a){var m=i.get_android_ver();if(m>=4){if(o){return{height:parseInt(u)+2,registered:a}}u=window.innerHeight}else{if(m>3.1&&m<4){if(f.height()>l+10){u=f.height()+(f.height()>f.width()?s?2:50:2)}else{if(l>f.height()){u=f.height()+(f.height()>f.width()?s?2:0:2)}else{u=t+(s?54:50)}}}else{if(m>=2.3){if(t>n){u=d.height+5}else{u=d.width+5}}else{u=t+5}}}}else{if(i.get_android_ver()>=4&&s){u+=5}}}else{if(i.is_mobile_ie()){u=parseInt(1.13*t)}}}}return{height:u,registered:a}}function A(e,t){if(!e||!t){return""}var n=e.split(";");var i,s,o,u,a;for(a=0;a<n.length;a++){s=r.trim(n[a]);if(!s){continue}i=s.split(":");if(i.length!==2){continue}o=r.trim(i[0]);u=r.trim(i[1]);if(!o){continue}if(o.toLowerCase()===t.toLowerCase()){return u}}return""}var r=e;var i=n;var s=t;var o=r("body");var u=0;var a=0;var f=function(){u=r(window).width();a=r(window).height()};var l=function(){return null};var c=function(e){var t=l();if(!t){return{height:e,registered:false}}return{height:t.height,registered:true}};var h=function(e){var t=l();if(!t){return{width:e,registered:false}}return{width:t.width,registered:true}};var v=function(e,t){var n=Math.max(a,u);var r=Math.min(a,u);return e>t?n:r};var m=function(e,t,n){if(e<3.1){return 1}if(e>3.1&&e<4){return 0}if(e<4.1&&e>=4){if(n>t){return 0}return i.is_small_android()?58:0}return 0};var y=true;var b=p(o.attr("style"));var w=b&&parseInt(b)>0;var E=function(e){if(w){return false}if(e.galleryheight.indexOf("%")<0){return false}if((y&&!k(e.gallerywidth,e.galleryheight)||x(e))&&!(i.is_iphone()&&L(e))){return false}return true};var S=function(){return false};var x=function(e){return D().heightFound&&e.galleryheight.indexOf("%")>0};var T=function(e){return D().widthFound&&e.galleryheight.indexOf("%")>0};var N=function(e,t){var n=r(window);if(t||E(e)){o.height(g(t,n.height(),n.width()).height)}if(t||S(e)){var s=n.width();if(i.is_ipad()&&i.ios_version()>=7&&n.width()>n.height()){if(i.is_ios_mobile_chrome()){s=n.width()}else{s=1024}}o.width(s)}};var C=function(){var e=parseInt(s.height());var t=parseInt(r("body").height());if(i.is_android()){return e>=t&&e<=t-3}return e==t};var k=function(e,t){if(e==="100%"&&t==="100%"&&s.width()==r("body").width()&&D().percentHeight===0&&(j().height==0||C()||r("body").height()===0&&i.is_ie8())){return true}return false};var L=function(e){var t=i.is_page_scrolling();if(k(e.gallerywidth,e.galleryheight)&&(i.is_small_android()||i.is_iphone()||r.browser.msie||!t.v_scrolling&&!t.h_scrolling)){return true}return false};var O=false;var M=0;var _=0;var D=function(){if(O){return{heightFound:M>0,widthFound:_>0,percentHeight:M,percentWidth:_}}O=true;s.parents().each(function(e,t){if(M>0&&_>0){return}var n=t.nodeName.toUpperCase();if(n==="BODY"){return}var i=r(t).attr("style");var s=p(i);var o=d(i);if(!o&&!s){return}if(s.indexOf("%")>0||parseInt(s)>0){M=parseInt(s)}if(o.indexOf("%")>0||parseInt(o)>0){_=parseInt(o)}});return{heightFound:M>0,widthFound:_>0,percentHeight:M,percentWidth:_}};var P=false;var H=0;var B=0;var j=function(){if(P){return{height:H,parentHeight:B}}H=s.height();B=s.parent().height();P=true;return{height:H,parentHeight:B}};var F=0;var I=function(){var e=s.height();var t=F;F=e;return{newHeight:e,oldHeight:t}};var q=false;var R=function(){var e=I();if(r.browser.msie){if(r.browser.version<8){if(j().height===0){if(e.newHeight>0){return true}}else{if(j().height===e.newHeight&&e.newHeight>110){return true}}return false}else{if(i.is_ie8()){if(s.height()<=0&&s.parent().height()>0&&s.parent().height()===j().parentHeight){q=true;return true}if(q){return true}return false}}}return j().parentHeight>110&&e.newHeight>110};var U=function(e,t,n,s){if(t){if(i.is_android()){return window.innerHeight+(n?3:2)}var o=r(window);var u=o.height();var a=o.width();if(!i.is_ios_mobile_chrome()&&(i.is_ipad()||i.is_iphone())&&i.ios_version()>=7){u=window.innerHeight;a=window.innerWidth}var f=g(t,u,a,n,s);return f.height}return z(e,t)};var z=function(e,t){var n=parseInt(e.galleryheight);if(e.galleryheight.indexOf("%")<0){return n}if(!D().heightFound&&R()){if(i.is_ie8()&&s.height()<10&&s.parent().height()>10){return s.parent().height()}return s.height()}var o=1;var u=0;var a;s.parents().each(function(e,t){var n=t.nodeName.toUpperCase();if(n==="BODY"){return}a=r(t).attr("style");var i=p(a);if(i.toLowerCase().indexOf("%")<0&&parseInt(i)>0){u=parseInt(i)}if(!i||u>0){return}if(i.indexOf("%")>0){o*=parseInt(i)/100}});var f=r(window);if(u===0){u=g(t,f.height(),f.width()).height}if(!n){n=100}n/=100;return o*n*u};var W=function(e,t,n){if(t){var s=r(window).width();if(i.is_android()){s=window.innerWidth+(n?1:0)}return s}return X(e)};var X=function(e){var t=parseInt(e.gallerywidth);if(e.gallerywidth.indexOf("%")<0){return t}if(!D().widthFound){return s.width()}var n=1;var i=0;var o;s.parents().each(function(e,t){var s=t.nodeName.toUpperCase();if(s==="BODY"){return}o=r(t).attr("style");var u=d(o);if(u.toLowerCase().indexOf("%")<0&&parseInt(u)>0){i=parseInt(u)}if(!u||i>0){return}if(u.indexOf("%")>0){n*=parseInt(u)/100}});var u=r(window);if(i===0){i=u.width()}if(!t){t=100}t/=100;return n*t*i};var V=function(e,t,n,r){var s=ut(e,t,n,false,r);var o=i.get_thumb_size(n);var u=o.height+n.thumbpadding;return s.rows*u+n.thumbpadding};var $=function(e){if(!i.is_large_screen_mode(e)){return 0}var t=e.thumbsposition.toUpperCase();if(t!="LEFT"&&t!="RIGHT"){return 0}var n=i.get_thumb_size(e);var r=n.width+e.thumbpadding;var s=e.thumbnavposition.toUpperCase()!="BOTTOM"?128:0;var o=e.maxthumbcolumns>0?e.maxthumbcolumns:1;return r*o+s};var J=function(e,t){if(e.captionposition.toUpperCase()==="NONE"){return 0}if(!t||t<=0){return e.maxcaptionheight}return e.maxcaptionheight>t?t:e.maxcaptionheight};var K=30;var Q=13;var G=75;var Y=function(e,t,n,r,i,s,o,u,a){var f=Z(e,t,u);var l=$(u);var c=2*f;if(c>e-60||c>t-60){c=0;f=0}var h=f;var p=f;var d=c;var v=c;d=2*h;v=2*p;var m,g,y,b,w,E,S,x,T,N,C,k,L;var A=h,O=0,M=0,_=p;var D=u.captionposition.toUpperCase();var P=u.thumbnavposition.toUpperCase();var H=P==="BOTTOM"?G:0;if(s){O=u.topareaheight;M=e-v}var B=u.thumbsposition.toUpperCase();var j=u.thumbpadding/2;var F=o+2*j;m=(u.showpagingtext&&H<=0?F+(i?Q+u.thumbpadding+j:15):F)+(i?0:24)+H;if(B!="TOP"){m-=u.thumbhseparation}var I=u.gallerytitleposition.toUpperCase();if(I==="ABOVE_THUMBS"){if(B!="LEFT"&&B!="RIGHT"){m+=K}}w=t-m-A-O-h;var q=u.captionposition.toUpperCase();L=0;var R=J(u,t-A-O-h);T=R;var U=false;if(B==="TOP"){S=t-h-w-j;y=A+O+j}else{if(B==="LEFT"){U=true}else{if(B==="RIGHT"){U=true}else{S=A+O;y=t-h-m}}}if(U){y=A+O;S=A+O;w=t-A-O-h;m=w-(D==="BOTTOM"?T:0)}var z;if(D==="BELOW_IMAGE"||D==="BOTTOM"){C=t-h-T}else{if(D==="BELOW_THUMBS"){if(U){if(u.thumbsvalign.toUpperCase()==="TOP"){C=V(U?l:e-v,at(u,m),u,a)+(u.showpagingtext&&H<=0?Q:0)+H}else{C=m/2+V(U?l:e-v,at(u,m),u,a)/2+(u.showpagingtext&&H<=0?Q:0)+H}}else{C=V(U?l:e-v,m-at(u,m),u,a)+(u.showpagingtext&&H<=0?Q:0)-parseInt(u.thumbpadding/2)+H}}else{C=w-T-O}}if(n&&r){g=e-v;b=p;E=g;x=p;if(U){g=l;E=e-v-g-u.thumbhseparation}if(B==="LEFT"){b=p+j;x=b+g+u.thumbhseparation}else{if(B==="RIGHT"){g+=u.thumbhseparation;x=p;b=x+E}else{if(!U){if(B==="TOP"){S+=u.thumbvseparation}else{w-=u.thumbvseparation}}}}N=e-v;k=p;if(q==="BOTTOM"||!U&&D==="BELOW_THUMBS"&&B!="TOP"){if(D==="BELOW_THUMBS"){k=0;m+=T;if(!U){C=m-T}}else{C=t-T-h}w-=T;if(B!="TOP"){y-=T}if(y<0){y=0}}else{if(q==="BELOW_IMAGE"){T=w;w-=R;C=S;N=E;k=x}else{if(D==="BELOW_THUMBS"){T=R;k=0;if(U){N=g}k=0;if(B==="TOP"){w-=T;S+=T}if(!U){m+=T}}else{L=(B==="TOP"?0:m)+h;z=w-T;if(z>0){C=S+z}else{C=S}if(q==="OVERLAY_IMAGE"){N=E;k=x}}}}}else{var W=A+O;m=t-W;g=e-v;y=h+W;b=p;w=t-W-h;T=u.maxcaptionheight>w?w:u.maxcaptionheight;E=e-v;S=W;x=p;N=e-v;k=p;if(q==="BOTTOM"){w-=T}else{if(q==="BELOW_IMAGE"){w-=T;C=S}else{z=w-T;if(z>0){C=S+z}else{C=S}L=h}}}return{top_panel_height:O,top_panel_width:M,top_panel_left:_,top_panel_top:A,index_panel_height:m,index_panel_width:g,index_panel_top:y,index_panel_left:b,detail_panel_height:w,detail_panel_width:E,detail_panel_top:S,detail_panel_left:x,caption_panel_height:T,caption_panel_width:N,caption_panel_left:k,caption_panel_top:C,caption_panel_bottom:L,is_sideway_layout:U}};var Z=function(e,t,n){var r=Math.min(e,t);if(n.stagepadding*2+160>r){var i=parseInt((r-160)/2);return i>=0?i:0}return n.stagepadding};var et=function(e,t,n){var r=Math.min(e,t);if(n.imagepadding*2+60>r){if(n.framewidth>0&&n.framewidth*2>=60){return parseInt((r-60)/4)}return parseInt((r-60)/2)}return n.imagepadding};var tt=function(e,t,n){var r=10;var i=Math.min(e,t);if(n.framewidth*2+r>i){if(n.imagepadding>0&&n.imagepadding*2>=r){return parseInt((i-r)/4)}return parseInt((i-r)/2)}if(2*n.imagepadding+2*n.framewidth+r>i){return 0}return n.framewidth};var nt=function(e,t,n,r,i,s){var o,u,a,f,l,c;var h=t/r;var p=e/n;if(t<=0||e<=0||r<=0||n<=0){return{}}if(h>=1&&p>=1){if(!s){a="auto";f="auto";l=t;c=e;o=parseInt((e-n)/2);u=parseInt((t-r)/2)}else{if(h>p){a="auto";f=n;l=t/p;c=n;o=0;u=parseInt((l-r)/2)}else{a=r;f="auto";l=r;c=e/h;o=parseInt((c-n)/2);u=0}}}else{if(h<p){a=r;f="auto";l=r;c=parseInt(l*e/t);u=0;o=parseInt((c-n)/2)}else{f=n;a="auto";c=n;l=parseInt(c*t/e);o=0;u=parseInt((l-r)/2)}}var d={imageTop:-1*o,imageLeft:-1*u,imageWidth:a,imageHeight:f,imageExpectedWidth:l,imageExpectedHeight:c};if(i){i(d)}else{return d}return null};var rt=function(e,t,n,r,i){e=parseInt(e);t=parseInt(t);var s=new Image;s.onload=function(){nt(s.height,s.width,t,e,r,i)};s.src=n};var it=function(e,t,n,r,i){var s=n/e;var o=r/t;var u;if(i==="SCALE"){u=0}else{if(i==="FILL"){u=3}else{if(i==="STRETCH"){u=4}else{if(i==="NONE"){u=2}else{if(s<1||o<1){u=0}else{u=1}}}}}switch(u){case 0:if(s>o){return{width:"auto",height:r+"px"}}else{return{width:n+"px",height:"auto"}};case 1:return{width:e+"px",height:t+"px"};case 2:return{width:"auto",height:"auto"};case 3:if(s>o){return{width:n+"px",height:"auto",expectedWidth:n,expectedHeight:n*t/e}}else{return{width:"auto",height:r+"px",expectedWidth:r*e/t,expectedHeight:r}};case 4:return{width:n+"px",height:r+"px"}}return null};var st=function(e,t,n,r,i,s){var o=s?0:2*(et(t,n,r)+tt(t,n,r));t-=o;n-=o;if(!e||!e.width||!e.height){return{width:"auto",height:"auto"}}return it(e.width,e.height,t,n,i)};var ot=function(e,t,n,r,i,s){var o=st(e,t,n,r,i?i:r.imagescalemode.toUpperCase(),s);var u=o.width;var a=o.height;var f=s?0:et(t,n,r);var l=s?0:tt(t,n,r);var c=f+l;var h=2*c;if(u==="auto"&&a==="auto"){a=e.height;u=e.width}else{if(u==="auto"){u=parseInt(a)*(e.width/e.height)}else{if(a==="auto"){a=parseInt(u)*(e.height/e.width)}}}u=parseInt(u);a=parseInt(a);var p=0;var d=0;var v=r.imagehalign.toUpperCase();var m=r.imagevalign.toUpperCase();if(v==="LEFT"){p=0}else{if(v==="RIGHT"){p=parseInt(t-u-2*l)-f}else{p=parseInt((t-u)/2)-l}}if(m==="TOP"){d=0}else{if(m==="BOTTOM"){d=parseInt(n-a-2*l)-f}else{d=parseInt((n-a)/2)-l}}var g=p;var y=d;if(p<f){p=f}if(d<f){d=f}var b=t-h<parseInt(u)?t-h:parseInt(u);var w=n-h<parseInt(a)?n-h:parseInt(a);return{width:parseInt(u),height:parseInt(a),left:p,top:d,frameWidth:b,frameHeight:w,unadjtop:y,unadjleft:g,parentWidth:t,parentHeight:n}};var ut=function(e,t,n,r){if(t<0){t=0}var s=0,o=0;var u;var a=i.get_thumb_size(n);var f=a.width+n.thumbpadding;var l=a.height+n.thumbpadding;var c=(i.is_large_screen_mode(n)||n.showsmallthumbnav?i.get_nav_btn_size(n):0)+n.thumbpadding;u=e-2*c;var h=n.thumbsposition.toUpperCase();if(h==="LEFT"||h==="RIGHT"){s=n.maxthumbcolumns}else{if(e>0){s=parseInt(u/f)}}if(s<=0){s=1}if(s>n.maxthumbcolumns){s=n.maxthumbcolumns}if(t>0){o=parseInt(t/l);if(!i.is_large_screen_mode(n)&&(r||n.forcetouchmode||n.forcetouchmodereversed)){}}if(o<=0||n.usethumbdots){o=1}if(o>n.maxthumbrows){o=n.maxthumbrows}var p=o;return{columns:s,rows:p,regularRows:o}};var at=function(e,t){var n=e.thumbnavposition.toUpperCase();var r=e.captionposition.toUpperCase();var s=i.is_side_layout(e);if(e.gallerytitleposition.toUpperCase()==="ABOVE_THUMBS"&&r!="BELOW_THUMBS"||!i.is_large_screen_mode(e)){t-=K}if(r==="BELOW_THUMBS"){t-=J(e);if(s&&n!="BOTTOM"){t-=J(e)}}if(e.showpagingtext&&n!="BOTTOM"){t-=(s?2:1)*Q}if(!i.is_large_screen_mode(e)){t-=30}if(n==="BOTTOM"){t-=G+(s?25:0)}t-=e.thumbpadding/2;return t};var ft=function(e,t,n,r,i){t=at(n,t);return ut(e,t,n,r,i)};var lt=function(e){return parseInt(e.thumbheight/3)};var ct=function(e,t,r,o,u){var a=r.thumbshalign.toUpperCase();var f=r.thumbsvalign.toUpperCase();var l=i.get_thumb_size(r);var c=r.thumbnavposition.toUpperCase();var h=l.width+r.thumbpadding;var p=l.height+r.thumbpadding;var d=u*p+r.thumbpadding;if(d<i.get_nav_btn_size(r)){d=i.get_nav_btn_size(r)}var v=o*h+r.thumbpadding;var m=r.captionposition.toUpperCase();var g=Z(s.width(),s.height(),r);var y=(m==="BOTTOM"?g:0)+parseInt((t-d)/2-(i.is_side_layout(r)?r.thumbpadding:0)/2+r.thumbpadding/2);var b=0;var w=n.get_nav_btn_size(r);if(a==="LEFT"){b=w}else{if(a==="RIGHT"){b=parseInt(e-v)-w}else{b=parseInt((e-v)/2)}}if(f==="TOP"){y=0}else{if(f==="BOTTOM"){y=(m==="BOTTOM"?g:0)+parseInt(t-d-(i.is_side_layout(r)?r.thumbpadding:0)/2+r.thumbpadding/2)-(c==="BOTTOM"?w+lt():0)}else{y=(m==="BOTTOM"?g:0)+parseInt((t-d)/2-(i.is_side_layout(r)?r.thumbpadding:0)/2+r.thumbpadding/2)}}if(!i.is_side_layout(r)){y=0}else{if(y<0){y=0}}var E=r.gallerytitleposition.toUpperCase();var S=i.is_large_screen_mode(r);var x=false;if(i.is_side_layout(r)){if(!x){if(y<0){y=0}}}else{if(E==="ABOVE_THUMBS"){y+=K}}return{top:y,left:b,width:v,height:x||!S?"100%":d}};return{get_gallery_height:U,get_gallery_width:W,is_fullscreen_mode:L,is_gallery_fully_filled:k,try_set_body_size:N,get_containers_size_and_position:Y,get_stage_padding:Z,get_image_padding:et,get_image_framewidth:tt,position_2_fill_image:rt,force_height_calculation:x,force_width_calculation:T,get_initial_size:f,get_initial_win_size:v,get_side_panel_width:$,suggested_image_size:st,get_image_display_size:ot,get_thumb_size_info:ft,get_thumbs_show_area_size_info:ct,constTitleHeight4AboveThumbs:K,constIndexNavHeight:G,get_android_additional_height:m,padding_bottom_index_nav:lt}};var juicebox_flickr_image_loader=function(e,t,n){function h(e){return f+c[e]+l}function p(e){return h("FLICKR_SEARCH")+(r.flickrtags?"&tags="+r.flickrtags:"")+(r.flickruserid?"&user_id="+r.flickruserid:"")+"&page="+u+"&per_page="+e+"&sort="+r.flickrsort.toLowerCase()+"&tag_mode="+r.flickrtagmode.toLowerCase()+(r.flickrextraparams?"&"+r.flickrextraparams.replace(/,/g,"&"):"")+"&media=photos&extras=url_sq,url_m,url_l,url_o,original_format&format=json&jsoncallback=?"}function d(e){return h("FLICKR_SET")+"&photoset_id="+r.flickrsetid+(r.flickrtags?"&tags="+r.flickrtags:"")+"&page="+u+"&per_page="+e+"&tag_mode="+r.flickrtagmode.toLowerCase()+"&media=photos&extras=url_sq,url_m,url_l,url_o,original_format&format=json&jsoncallback=?"}function v(e){return h("FLICKR_GROUP")+"&group_id="+r.flickrgroupid+(r.flickrtags?"&tags="+r.flickrtags:"")+"&page="+u+"&per_page="+e+"&tag_mode="+r.flickrtagmode.toLowerCase()+"&extras=url_sq,url_m,url_l,url_o,original_format&format=json&jsoncallback=?"}function m(e){return h("FLICKR_INTERESTINGNESS")+"&page="+u+"&per_page="+e+"&extras=url_sq, url_m, url_l,url_o,original_format&format=json&jsoncallback=?"}function g(){return h("FLICKR_PEOPLE_FIND")+"&username="+r.flickrusername+"&format=json&jsoncallback=?"}function y(e){if(!t.isp){if(r.flickrtags||r.flickrusername){return p(e)}else{return m(e)}}if(r.flickrsetid){return d(e)}else{if(r.flickrgroupid){return v(e)}else{if(r.flickruserid){return p(e)}else{if(r.flickrusername){return p(e)}else{if(r.flickrtags){return p(e)}else{return m(e)}}}}}}function b(e,t){return"http"+a+"://www.flickr.com/photos/"+e+"/"+t}function w(e,t,n,r){return"http"+a+"://farm"+e+".static.flickr.com/"+t+"/"+r+"_"+n+"_s.jpg"}var r=t.get_config();var i=50;var s=n;var o=0;var u=1;var a="s";var f="https://api.flickr.com/services/rest/?method=";var l="&api_key=b40dc56c795c0103c6170731e6271e04";var c={FLICKR_SEARCH:"flickr.photos.search",FLICKR_INTERESTINGNESS:"flickr.interestingness.getList",FLICKR_SET:"flickr.photosets.getPhotos",FLICKR_GROUP:"flickr.groups.pools.getPhotos",FLICKR_FIND_USER:"flickr.people.findByUsername",FLICKR_PHOTO_INFO:"flickr.photos.getInfo",FLICKR_PEOPLE_FIND:"flickr.people.findByUsername"};var E=function(e,n){var i,u,a;var f="";var l=[];if(t.isp){if(e.photos){i=e.photos.photo}else{if(e.photoset){i=e.photoset.photo;f=e.photoset.owner}}}else{i=e.photos.photo}if(!i||i.length==0){s("Flickr Images Not Found");return l}for(u=0;u<i.length&&u<o;u+=1){a={flickrPhotoId:i[u].id,thumbURL:w(i[u].farm,i[u].server,i[u].secret,i[u].id),imageFullURL:b(i[u].owner||f,i[u].id),imageURL:b(i[u].owner||f,i[u].id),linkTarget:"_blank",caption:i[u].title||"",description:"",preloadedImage:null,preloaded:false};if(r.flickrimagesize.toLowerCase()==="original"&&i[u].url_o){a.imageURL=i[u].url_o}else{if((r.flickrimagesize.toLowerCase()==="large"||r.flickrimagesize.toLowerCase()==="original")&&i[u].url_l){a.imageURL=i[u].url_l}else{a.imageURL=i[u].url_m}}l.push(a);if(typeof n==="function"){C(u,i[u].id,n)}}return l};var S=function(e){if(!e||!e.photo){return null}var t=e.photo;return{id:t.id,title:t.title._content,description:t.description._content.replace(/\n/g,"<br/>")}};var x=function(t){var n=g();e.ajax({url:n,dataType:"json",success:function(e){if(e.stat==="ok"){r.flickruserid=e.user.id;if(t){t()}}else{s("Cannot find Flickr User: "+r.flickrusername)}},error:function(){s("Cannot find Flickr User: "+r.flickrusername)}})};var T=function(n,u){o=t.isp?parseInt(r.flickrimagecount):i;var a=y(o);e.ajax({url:a,dataType:"json",success:function(e){if(e.photos){o=Math.min(e.photos.total,o)}else{if(e.photoset){o=Math.min(e.photoset.total,o)}}if(e.stat==="ok"){if(n){n(E(e,u))}}else{s("Flickr Images Not Found")}},error:function(){s("Flickr Images Not Found")}})};var N=function(e){return h("FLICKR_PHOTO_INFO")+"&format=json&photo_id="+e+"&jsoncallback=?"};var C=function(t,n,i){if(!r.flickrshowdescription){return}var s=N(n);e.ajax({url:s,dataType:"json",success:function(e){if(e.stat==="ok"){if(i){i(t,S(e))}}},error:function(){}})};var k=function(e,t){if(r.flickrusername){x(function(){T(e,t)})}else{T(e,t)}};var L=function(e,t,n){if(!r.flickrshowdescription){return}if(typeof n==="function"){C(e,t,n)}};var A=function(e,t,n){if(!r.flickrshowdescription){return}if(typeof n!=="function"){return}if(t.to>=e.length){t.to=e.length-1}if(t.from<0){t.from=0}for(var i=t.from;i<=t.to;i++){if(e[i].detail_loaded){continue}L(i,e[i].flickrPhotoId,n)}};return{get_images:k,load_flickr_images_detail:A}};var juicebox_gallery_manager=function(){var e=[];var t;var n=function(e){t=e};var r=function(t){t.position=e.length;t.original_position=e.length;t.loaded=0;t.thumb_loaded=0;t.width=null;t.height=null;t.thumb_width=null;t.thumb_height=null;t.order=parseInt(1e3*Math.random());e[e.length]=t};var i=function(n){if(!t.randomizeimages){return n}for(var r=0;r<e.length;r++){if(e[r].original_position==n){return e[r].position}}return-1};var s=function(t){return e[t]};var o=function(){return e};var u=function(n){n=parseInt(n);if(!t.enablelooping&&n>=e.length-1){return null}return e[n<e.length-1?n+1:0]};var a=function(n){n=parseInt(n);if(!t.enablelooping&&n<=0){return null}return e[n>0?n-1:e.length-1]};var f=function(t){e[t.position]=t};var l=function(t,n){return e.slice(t,n)};var c=function(){e=e.sort(function(e,t){return e.order-t.order});for(var t=0;t<e.length;t++){e[t].position=t}};var h=function(){return e.length};return{add_image:r,length:h,get_range:l,get_image:s,get_images:o,update_image:f,get_previous_image:a,get_next_image:u,sort_images:c,init:n,get_current_position:i}};var juicebox_gallery_index_panel=function(e,t){var n,r,i,s,o,u,a,f;s=t;var l=e;var c=0;var h=1;var p=0,d=0;var v=0;var m=0;var g=86;var y=86;var b=96;var w=96;var E=5;var S=true;var x=false;var T=true;var N="jb-tbn-current";var C="jb-tbn-prev";var k="jb-tbn-next";var L=0;var A=0;var O=0;var M=0;var _=0;var D=false;var P=false;var H="display:none;";var B=11;var j,F;var I;var q=100;var R=q;var U=function(e){j=e;F=j._;o=j.config};var z=function(){return-1};var W=function(){return};var X=function(){var e=d*p<=s.length()?R:s.length();return e>s.length()?s.length():e};var V=function(){if(m==0){m=F("").height()}p=0;d=0;var e=u.get_thumb_size_info(v,m,o,x,X());p=e.columns;d=e.rows;if(p*d>s.length()&&d>1){d=Math.ceil(s.length()/p)}h=Math.ceil(s.length()/(d*p))};var $=function(){return u.get_thumbs_show_area_size_info(v,m,o,p,d,F("").height())};var J=function(e){if(!e){e=1}var t=(c+e)*p*d-1;if(t>=s.length()){t=s.length()-1}if(t<0){t=0}return{from:c*p*d,to:t}};var K=function(e){var t=l.get_thumb_size(e);g=t.width;y=t.height;E=e.thumbpadding/2;b=g+2*E;w=y+2*E};var Q=function(e,t){n=e.jquery;x=t;r=e.document_id;i=e.container;o=e.config;l=e.utils;u=e.sizing;a=e.finish_draw_event_callback;f=e.touch_event_callback;I=e.debug;v=e.current_width;m=e.current_height;K(o);V();G();Y();it();if(l.ship||!o.usethumbdots||d>1){B=0}F(".jb-idx-thumbnail-show-more").click(function(){R+=q;gt(0);var e=j.glrySizePosition();var t=e.index_panel_height;F(".jb-panel-index").css({height:t});n("#"+j.config.containerid).height(t);if(j.features.fullscreen.switched_2_fullscreen()){F("").css({height:t})}return false})};var G=function(){var e=j.features.grytitle.getHtml(true);var t="";if(o.captionposition.toUpperCase()==="BELOW_THUMBS"){t=j.features.caption.getHtml()}i.html("<div class='jb-idx-show-area' style='overflow:hidden;margin:0;padding:0;position:absolute;'></div>"+e+(o.showpagingtext?"<div class='jb-idx-thb-list-page-number' style='position: absolute;'></div>":"")+t)};var Y=function(){var e=function(e){if(D){return}e.preventDefault();M=0;_=0;if(!P){P=true;if(l.is_touchable_desktop()){var t=l.getMsPointerXy(e);A=t.x;O=t.x}else{A=e.originalEvent.touches[0].pageX;O=e.originalEvent.touches[0].pageX}}};var t=function(e){if(D||!P){return}e.preventDefault();var t;if(l.is_touchable_desktop()){var n=l.getMsPointerXy(e);t=n.x}else{t=e.originalEvent.touches[0].pageX}M=t-A;F("table.jb-idx-thb-container").animate({left:"+="+(t-O),avoidTransforms:!o.use_webkit_transform,useTranslate3d:o.use_3d_transform},0);O=t;_=t-A};var r=function(e){if(o.autofullscreenexpand){l.show_real_fullscreen(o.containerid);if(!l.is_in_real_fullscreen()){if(M>5||M<-5){return}var t=0;if(n(e.target).attr("data-position")){t=parseInt(n(e.target).attr("data-position"))}else{if(n(e.target).parent().attr("data-position")){t=parseInt(n(e.target).parent().attr("data-position"))}}j.detail_panel.set_photo_position(t);j.detail_panel.set_visible_flag(true);j.index_panel.set_visible_flag(false);return}}if(D||!P){return}P=false;if(M>5){if(Ht()&&!o.enablelooping){kt(M,function(){vt()})}else{Ot(Math.abs(M),null,v,m)}e.preventDefault()}else{if(M<-5){if(Pt()&&!o.enablelooping){kt(M,function(){vt()})}else{At(Math.abs(M),null,v,m)}e.preventDefault()}else{if(Math.abs(_)<5&&!l.is_touchable_desktop()){if(o.forcetouchmode){if(n(e.target).attr("data-position")!=null){a(n(e.target).attr("data-position"))}else{if(n(e.target).parent().attr("data-position")!=null){a(n(e.target).parent().attr("data-position"))}}}else{if(n(e.target).parent().attr("data-position")!=null){if(M<=5&&M>=-5){kt(M)}a(n(e.target).parent().attr("data-position"))}}}else{if(M<=5&&M>=-5){kt(M)}}}}};if(l.is_touchable_desktop()){var i=document.getElementsByClassName("jb-idx-thumbnail-container");for(var s=0;s<i.length;s++){var u=i[s];u.addEventListener("touchstart",e,false);u.addEventListener("touchmove",t,false);u.addEventListener("touchend",r,false);u.addEventListener("gesturestart",e,false);u.addEventListener("gesturechange",t,false);u.addEventListener("gestureend",r,false)}}else{if(!n.browser.msie){F(".jb-idx-show-area").bind("touchstart",e).bind("touchmove",t).bind("touchend",r)}}if(o.forcetouchmode&&!l.is_touchable_desktop()){F(" .jb-idx-thumb, .jb-idx-thb-frame").mousedown(function(t){if(t.which!==1){return}var r={originalEvent:{touches:[{}]}};t.preventDefault();r.preventDefault=function(){};r.originalEvent.touches[0].pageX=t.screenX;r.originalEvent.touches[0].pageY=t.screenY;n(this).children(".jb-idx-thb-frame").css(Et());e(r)}).mousemove(function(e){if(e.which!==1){P=false;return}if(!P){return}var n={originalEvent:{touches:[{}]}};n.preventDefault=function(){};n.originalEvent.touches[0].pageX=e.screenX;n.originalEvent.touches[0].pageY=e.screenY;t(n)}).mouseup(function(){if(!P){return}var e={};e.preventDefault=function(){};e.target=this;r(e)}).mouseout(function(){if(!P){return}var e={};e.preventDefault=function(){};e.target=this;r(e)})}};var Z=function(){var e=p*b;var t=d*w;return{height:t,width:e}};var et=function(e,t,n,r,i){var u=d*p*e;var a=d*p*(e+1);var f;if(s.length()<p){f=s.length()*b}else{f=p*b}var c=l.is_side_layout(o)||o.usethumbdots&&d*w<l.get_nav_btn_size(o);t.append("<table class='jb-idx-thb-container jb-classifier-thumb-area table_page_"+e+" "+(i?i:"")+"' style='left:"+n+"px;"+(c?"height:100%;":"")+"' ><tr><td style='text-align:center !important;width:auto !important;'><div class='jb-idx-thb-list' style='text-align:center !important;width:"+f+"px;margin-left: auto;margin-right: auto; margin-top:0; margin-bottom:0; padding:0;' ></div></td></tr></table>");var h=F(".table_page_"+e+(i?"."+i:"")+" .jb-idx-thb-list");var v="";var m=s.get_range(u,a);for(var g=0;g<m.length;g++){v=ht(m[g],h,v)}h.append(v)};var tt=function(e){if(l.is_earlier_ie()){return""}return e.thumbcornerradius>0&&e.thumbcornerradius<=Math.min(e.thumbwidth,e.thumbheight)?"border-radius:"+e.thumbcornerradius+"px;":""};var nt=function(){if(o.usethumbdots){return"width:"+b+"px;height:"+w+"px;padding:0;margin:"+B+"px 0 0 0;color:"+l.format_color(o.thumbdotcolor)+";"}return"overflow:hidden;width:"+g+"px;height:"+y+"px;padding:0;margin:"+(B+E)+"px "+parseInt(E)+"px "+E+"px "+parseInt(E)+"px;"+tt(o)};var rt=function(e,t){if(o.usethumbdots){return"padding:0;margin:"+E+"px;width:"+g+"px;height:"+y+"px;"}return(t?"display:none;":"")+"position:relative;padding:0;left:"+e.left+"px;top:"+e.top+"px;width:"+e.thumb_width+"px;height:"+e.thumb_height+"px;"};var it=function(){var e=o.thumbpreloading.toUpperCase();if(e!="ALL"){return}var t=s.get_images();for(var n=0;n<t.length;n++){lt(t[n])}};var st=function(){return o.thumbframecolor?l.format_color(o.thumbframecolor):""};var ot=function(e){if(e){return(o.thumbframecolor&&o.thumbselectedframewidth?"border-color:"+l.format_color(o.thumbframecolor)+";":"")+(l.is_ie8()?o.thumbframeopacity+";":"")}return(o.thumbframecolor&&o.thumbframewidth?"border-color:"+l.format_color(o.thumbframecolor)+";":"")+(l.is_ie8()?o.thumbframeopacity+";":"")};var ut=function(){return false};var at=function(e){if(o.usethumbdots){return""}var t=n("#"+r+"_thumb_"+e.position+".jb-thm-thumb-selected").length>0&&l.is_large_screen_mode(o);var i=t?ot():"";var s=t?o.thumbselectedframewidth:o.thumbframewidth;var u=t?o.thumbselectedframewidth:o.thumbframewidth;var a=0;if(ut()&&u>0){a=1}return'<div class="jb-idx-thb-frame" style="position:absolute;border-style:solid;'+i+";border-width:"+(u+a)+"px;width:"+(g-2*s-a)+"px;height:"+(y-2*s-a)+"px;left:0px;top:0;"+ot(t)+tt(o)+'"></div>'};var ft=function(){if(S){return H}return""};var lt=function(e){if(e.isPreloadingThumbnail){return}e.isPreloadingThumbnail=true;u.position_2_fill_image(g,y,e.thumbURL,function(t){e.thumb_loaded=1;if(g===y&&t.imageExpectedWidth===t.imageExpectedHeight){e.thumb_width=g;e.thumb_height=y;e.imageExpectedWidth=y;e.imageExpectedHeight=y;e.top=0;e.left=0}else{e.thumb_width=t.imageWidth;e.thumb_height=t.imageHeight;e.imageExpectedWidth=t.imageExpectedWidth;e.imageExpectedHeight=t.imageExpectedHeight;e.top=t.imageTop;e.left=t.imageLeft}n("#"+r+"_thumb_"+e.position).html("<img class='jb-thm-thumb-image jb-thm-thumb-preloaded' src='"+e.thumbURL+"' style='"+ft()+rt(e,true)+tt(o)+"' alt='"+e.thumbURL+"'>"+at(e));var i=n("#"+r+"_thumb_"+e.position+" img");if(!i.is(":visible")){j.utils.fade_in(j.config,i,1e3*j.config.fadetime,false,null,"indexpanel")}s.update_image(e);n("#"+r+"_thumb_"+e.position+" img").disableSelection()})};var ct=function(e){return l.get_shadow_style_string(e.thumbshadowcolor,e.thumbshadowcolora,e.thumbshadowblur)};var ht=function(e,t,i){if(o.usethumbdots){return i+"<div data-position='"+e.position+"' id='"+r+"_thumb_"+e.position+"' class='jb-idx-thumb jb-thm-thumb-dot' style='"+nt()+"'><div class='jb-thm-thumb-image' style='"+rt(e)+"'>"+(n.browser.msie&&n.browser.version<9?"&#xe015;":"")+"</div></div>"}if(e.thumb_loaded){return i+"<div data-position='"+e.position+"' id='"+r+"_thumb_"+e.position+"' class='jb-idx-thumb' style='"+nt()+ct(o)+"'><img class='jb-thm-thumb-image' src='"+e.thumbURL+"' style='"+ft()+rt(e)+tt(o)+"' alt='"+e.thumbURL+"'>"+at(e)+"</div>"}else{t.append(i);t.append("<div data-position='"+e.position+"' id='"+r+"_thumb_"+e.position+"' class='jb-idx-thumb' style='"+nt()+ct(o)+"'>"+o.thumb_load_placeholder+"</div>");lt(e);return""}};var pt=function(){return c<=0?h-1:c-1};var dt=function(){return c>=h-1?0:c+1};var vt=function(){Ct(c)};var mt=function(e){if(e<0||e>=h){return}xt(e)};var gt=function(e,t,n,r){if(t){v=t}if(n){m=n}V();var i=parseInt(e/(p*d));xt(i,r);wt(e);if(!l.is_large_screen_mode(o)){F(".jb-idx-title").show()}};var yt=function(){Ct(pt())};var bt=function(){Ct(dt())};var wt=function(e){L=e;var t=g-2*o.thumbselectedframewidth;var i=y-2*o.thumbselectedframewidth;var s=g-2*o.thumbframewidth;var u=y-2*o.thumbframewidth;var a=l.format_color(o.navbuttonbackcolor);if(o.usethumbdots){a=l.format_color(o.thumbdotcolor)}F(".jb-idx-thumb").removeClass("jb-thm-thumb-selected").children("div").css({color:a});var f=ut()&&o.thumbframewidth>0?1:0;var c=ut()&&o.thumbselectedframewidth>0?1:0;F(".jb-idx-thumb .jb-idx-thb-frame").css({width:s-f+"px",height:u-f+"px","border-width":o.thumbframewidth+f});var h=n("#"+r+"_thumb_"+e).addClass("jb-thm-thumb-selected").addClass("jb-thumb-visited").children("div").css({color:l.format_color(o.thumbdothovercolor)});n("#"+r+"_thumb_"+e+" .jb-idx-thb-frame").css({width:t+"px",height:i-c+"px","border-width":o.thumbselectedframewidth+c+"px","border-color":st()});if(o.thumbframecolor){h.children(".jb-idx-thb-frame").css({"border-color":l.format_color(o.thumbframecolor)})}};var Et=function(){var e=ut()&&o.thumbselectedframewidth>0?1:0;return{height:o.thumbheight-2*o.thumbselectedframewidth-e,width:o.thumbwidth-2*o.thumbselectedframewidth,"border-width":o.thumbselectedframewidth+e,"border-color":l.format_color(o.thumbframecolor)}};var St=function(){return $().width+2*u.get_stage_padding(F("").width(),F("").height(),o)-o.thumbpadding};var xt=function(e,t){F(" .jb-idx-thb-container").remove();var r=F(".jb-idx-show-area");var i=$();r.css({top:i.top,left:i.left+parseInt(o.thumbpadding/2),width:i.width-parseInt(o.thumbpadding),height:i.height});if(F(".table_page_"+e).length==0){et(e,r,0,m,N)}var s=St();if(o.enablelooping||e<h-1){var u=e>=h-1?0:e+1;et(u,r,+s,m,k)}if(o.enablelooping||e>0){var p=e<=0?h-1:e-1;et(p,r,-s,m,C)}Nt(e);wt(L);var d=F(" .jb-idx-thumb");if(!o.forcetouchmode){var v=function(e){var t=F(".jb-idx-thb-list div.jb-idx-thumb .jb-thm-thumb-image");t.stop(true,true).show();if(!l.is_earlier_ie()){t.css({opacity:1})}W();a(e)};d.click(function(e){F("").focus();if(D){return false}S=false;e.preventDefault();var t=parseInt(n(this).attr("data-position"));if(o.autofullscreenexpand){W();l.show_real_fullscreen(o.containerid);j.detail_panel.set_photo_position(t);j.detail_panel.set_visible_flag(true);j.index_panel.set_visible_flag(false);window.setTimeout(function(){if(j.config.showimageoverlay.toUpperCase()!="NEVER"){j.setOverlayFlag(true)}j.features.buttonbar.setPosition();j.showImage(t,0)},300);return false}v(t);return false});if(o.usethumbdots){var b=l.format_color(o.thumbdothovercolor);var w=l.format_color(o.thumbdotcolor);F(" .jb-idx-thumb .jb-thm-thumb-image").hover(function(){n(this).css({color:b})},function(){var e=w;if(n(this).parent(".jb-thm-thumb-selected").length>0){e=b}n(this).css({color:e})})}if(!B){d.mousedown(function(e){if(e.preventDefault){e.preventDefault()}n(this).children(".jb-idx-thb-frame").css(Et())}).bind("touchstart",function(){n(this).children(".jb-idx-thb-frame").css(Et())});n(".jb-idx-thb-frame").mousedown(function(e){if(e.preventDefault){e.preventDefault()}n(this).css(Et())})}if(o.changeimageonhover){d.mouseenter(function(){var e=n(this).attr("data-position");v(e)},null)}}else{Y()}if(o.thumbframecolor){var E=g-2*o.thumbhoverframewidth;var x=y-2*o.thumbhoverframewidth;var T=g-2*o.thumbframewidth;var A=y-2*o.thumbframewidth;var O=l.is_large_screen_mode(o);var M=ut()&&o.thumbhoverframewidth>0?1:0;var _=ut()&&o.thumbframewidth>0?1:0;d.hover(function(){var e=n(this);if(e.is(".jb-thm-thumb-selected")&&O){return}e.children(".jb-idx-thb-frame").css({width:E-M,height:x-M,"border-color":l.format_color(o.thumbframecolor),"border-width":o.thumbhoverframewidth+M})},function(){var e=n(this);if(e.is(".jb-thm-thumb-selected")&&O){return}e.children(".jb-idx-thb-frame").css({width:T-_,height:A-_,"border-color":o.thumbframewidth?l.format_color(o.thumbframecolor):"transparent","border-width":o.thumbframewidth+_})})}F(".jb-classifier-thumb-area").disableSelection();c=e;if(typeof f=="function"){f(t)}};var Tt=function(){var e=s.length();if(d*p<=e){return{row:d,col:p}}if(p>=e){return{row:1,col:e}}var t=e%p==0?0:1;return{row:parseInt(e/p)+t,col:p}};var Nt=function(e){var t=$();var r=Tt();var i=r.row*w;var s=parseInt((m-i)/4);if(s<30&&s>15&&r.row>=r.col){s-=10}if(m<=s||s<0){s=0}var u=parseInt((v-r.col*b)/2+parseInt(E/2));if(u<0){u=0}F(".jb-idx-title").css({left:u+"px",top:s+"px"});F(".jb-idx-ssm-title-wrapper").css({width:t.width-2*o.thumbpadding});var a=v/2-18;if(a<u){a=u}var f;if(l.is_large_screen_mode(o)){var c=l.is_side_layout(o)&&o.thumbnavposition.toUpperCase()==="BOTTOM"&&o.maxthumbcolumns<=1?0:o.thumbpadding;f=parseInt(t.top+(l.is_side_layout(o)?t.height:i)+c-o.thumbpadding/2);if(o.usethumbdots&&o.showpagingtext){f+=l.is_side_layout(o)?25:-5}}else{f=parseInt(t.top+i+o.thumbpadding/2+(m-i>0&&o.thumbnavposition.toUpperCase()!="BOTTOM"?(m-i)/2:0))}if(f<=0){f=0}F(".jb-idx-thb-list-page-number").css({left:a+"px",top:f+"px"}).html(e+1+" "+o.languagelistall.pgnum+" "+h);if(o.textcolor){F(".jb-idx-title, .jb-idx-thb-list-page-number, .jb-idx-ssm-title-wrapper").css({color:l.format_color(o.textcolor)})}else{if(n.browser.msie&&n.browser.version<8){F(".jb-idx-ssm-title-wrapper").css({color:"#ffffff"})}}if(o.textshadowcolor){F(".jb-idx-title, .jb-idx-thb-list-page-number").css({"text-shadow":l.get_text_shadow_style(o.textshadowcolor,o.textshadowcolora,true)})}if(j.config.galleryfontface){F(".jb-idx-title, .jb-idx-thb-list-page-number, .jb-idx-ssm-title-wrapper").css({"font-family":j.config.galleryfontface})}};var Ct=function(e){V();xt(e)};var kt=function(e,t){if(!e){return}var n=1e3*o.smallthumbslidetime;n=n*((400-e/2)/400);wt(L);F("table.jb-idx-thb-container").animate({left:"+="+ -e,avoidTransforms:!o.use_webkit_transform,useTranslate3d:o.use_3d_transform},n,"",t)};var Lt=function(e,t,n,r,i){var s=-1;if(r){v=r}if(i){m=i}var u=function(){D=false;if(e){if(s===dt()){bt()}}else{if(s===pt()){yt()}}s=-1;if(typeof n=="function"){n()}};s=e?dt():pt();if(typeof t=="undefined"){t=0}if(!D){D=true;var a=1e3*o.smallthumbslidetime;if(t>0){a=a*((400-t/2)/400)}var f=St();F("table.jb-idx-thb-container").animate({left:(e?"-=":"+=")+(f-t),avoidTransforms:!o.use_webkit_transform,useTranslate3d:o.use_3d_transform},a,"easeOutQuart");window.setTimeout(function(){u()},a)}else{F("table.jb-idx-thb-container").stop();u()}};var At=function(e,t,n,r){S=false;Lt(true,e,t,n,r)};var Ot=function(e,t,n,r){S=false;Lt(false,e,t,n,r)};var Mt=function(){S=false};var _t=function(e,t,n,r){if(e){v=e}if(t){m=t}F(".jb-panel-index").css({width:e,height:t,top:n,left:r})};var Dt=function(){S=false;D=false};var Pt=function(){if(c+1>=h){return true}return false};var Ht=function(){if(c<=0){return true}return false};var Bt=function(){return c};var jt=function(e){if(e){F(".jb-idx-title").show();F(".jb-classifier-link-wrapper.jb-classifier-thumb-area").show()}else{F(".jb-idx-title").hide();F(".jb-classifier-link-wrapper.jb-classifier-thumb-area").hide()}};var Ft=function(){var e=d*w;if(e<l.get_nav_btn_size(o)){e=l.get_nav_btn_size(o)}return e};var It=function(e){D=true;window.setTimeout(function(){D=false},e)};var qt=function(e){T=e};var Rt=function(){return T};return{initialize:Q,show_current_page:vt,show_prev_page:yt,show_next_page:bt,move_to_next_page:At,move_to_prev_page:Ot,show_page_4_image_position:gt,show_page_by_page_index:mt,is_last_page:Pt,is_first_page:Ht,get_index:Bt,repaint:Dt,get_thumblist_size:Z,display_gallery_top:jt,get_image_index_range:J,set_thumbnail_visited:wt,get_thumb_height:Ft,yield_4_transition:It,synchronize_config:K,get_show_area_position:$,set_visible_flag:qt,is_visible:Rt,setContext:U,cleanup_initial_load_flag:Mt,restoreScrollPosition:z,getCurrentDisplayingThumbCount:X,set_container_size:_t}};var juicebox_gallery_detail_panel=function(e){var t,n,r,i,s,o,u,a,f,l,c;var h;var p=e;var d;var v=null;var m=-1;var g=0;var y,b;var w;var E=false;var S=false;var x=12;var T=18;var N=false;var C,k;var L=false;var A=function(e){S=true;t=e.jquery;n=e.document_id;r=e.container;h=e.caption_container;s=e.config;o=e.utils;u=e.sizing;i=e.glymng;a=e.before_draw_event_callback;f=e.finish_draw_event_callback;l=e.touch_event_callback;c=e.caption_complete_callback;w=1e3*s.imagetransitiontime;if(w<=0){w=10}y=e.current_width;b=e.current_height;D(0);d=e.debug};var O=function(e){C=e;k=C._};var M=function(){if(!v){return 0}return v.position};var _=function(){return v};var D=function(e){v=C.gallery_manager().get_image(e)};var P=function(e,t){if(!e){e=s.captionposition.toUpperCase()}if(e==="BOTTOM"||e==="NONE"||e==="BELOW_THUMBS"){return}if(typeof c!="function"){return}var n=k(".caption_"+t+" a");var r=k(".caption_"+t+" .jb-caption").height();if(n.length>0&&r===0){r=50}r=r&&n.length>0?r+2*x:0;var o,a,f;if(e==="BELOW_IMAGE"||e==="OVERLAY_IMAGE"){o=i.get_image(t);if(!o.loaded){return}a=u.get_image_display_size(o,y,b,s);f=a.top+a.height+u.get_image_framewidth(y,b,s);if(f>b){f=b-u.get_image_framewidth(y,b,s)-s.imagepadding}c(f-(e==="OVERLAY_IMAGE"?r:0))}else{c(b-r)}};var H=function(e,n,l,c,p){C.index_panel.cleanup_initial_load_flag();var d=m>-1?m:v.position;var b=-1;if(typeof c!="undefined"){b=c}else{if(e&&i.get_next_image(d)){b=i.get_next_image(d).position}else{if(!e&&i.get_previous_image(d)){b=i.get_previous_image(d).position}}}if(b<0){return}var w;var E=s.captionposition.toUpperCase();if(typeof l==="undefined"){l=true}if(E==="NONE"||",BOTTOM,BELOW_IMAGE,OVERLAY_IMAGE,BELOW_THUMBS,".indexOf(","+E+",")<0&&s.showimageoverlay.toUpperCase()==="NEVER"){l=false}var S=s.imagetransitiontype.toUpperCase();var x=function(e){if(E==="NONE"){return}if(s.showimageoverlay.toUpperCase()==="NEVER"&&E!="BOTTOM"&&E!="BELOW_THUMBS"&&E!="BELOW_IMAGE"){return}if(!s.slidecaption&&(l||E==="BOTTOM"||E==="BELOW_IMAGE")){o.fade_in(s,k(".jb-cap-frame.jb-status-fading"),e);o.fade_in(s,h,e);Z(E,b,e+50)}};var T=function(e){if(l){var n=e;if(t.browser.msie&&t.browser.version>=7&&t.browser.version<8){n=0}if(!n){D.addClass("jb-status-fading").hide()}else{o.fade_out(s,D.addClass("jb-status-fading"),n,null)}}else{D.removeClass("jb-status-fading")}};var N=0;var L=function(e){a(b);R(b,e,null,l,true);if(k(".jb-dt-main-image-"+b).css("opacity")==.01){k(".jb-dt-main-image-"+b).css("opacity",1)}if(N){window.clearTimeout(N)}N=0;if(e){N=window.setTimeout(function(){f(b)},e+50)}else{f(b)}x(e);m=-1};var A=function(e,t){if(N){window.clearTimeout(N)}N=0;var n=m>-1?m:b;if(!p){a(n)}R(n,0,null,l,true);if(!p&&!t){f(n)}x(e);m=-1};if(m>-1){w=k(" .jb-panel-detail .jb-dt-main-frame, .jb-cap-frame");w.stop(false,false);k(".jb-cap-frame.caption_"+b).stop(false,false);k(".jb-dt-main-image-"+d).stop(false,false);if(g){window.clearTimeout(g);g=0}A(0,true)}if(typeof n=="undefined"){n=0}m=b;var O=1e3*s.imagetransitiontime;if(n>0){O=O*((400-n/2)/400)}var M=parseInt(y)+parseInt(s.minimagegap)+2*u.get_stage_padding(k("").width(),k("").height(),s);var _=o.is_in_iframe()&&o.is_chrome();if(p||!_){a(b)}var D=k(".jb-cap-frame.caption_"+d);w=k(" .jb-panel-detail .jb-dt-main-frame");w.stop();if(g){window.clearTimeout(g);g=0}var P=O/2;if(s.captionposition.toUpperCase()=="OVERLAY_IMAGE"){P=0}if(o.is_swipable_device()&&c==null){yt(0);o.clean_up_transition(w);w.animate({left:(e?"-=":"+=")+(M-n),avoidTransforms:!s.use_webkit_transform,useTranslate3d:s.use_3d_transform},O,"easeInOutQuart",function(){A(O/2)});T(P)}else{if(S==="NONE"||p){D.hide();A(0)}else{if(S==="CROSS_FADE"){var H=v;v=i.get_image(b);w=k(".jb-dt-main-image-"+d);if(H.width!=v.width||H.height!=v.height){var B=k(".jcbx-glry-classic").css("background-color");w.css({"background-color":B})}if(v.loaded){r.append(rt(v,0,true,false,1,true));h.append(ft(v,h.width(),h.height(),0,false,500));o.fade_out(s,w,O,null,"images");g=window.setTimeout(function(){var e=m>-1?m:b;if(_){a(e)}R(e,0,null,l,true);f(e);x(O/2);g=0},O+100);T(O)}else{A(O/2)}}else{if(S==="FADE"||(c||c===0)&&S!="FADE"&&S!="CROSS_FADE"&&S!="NONE"){yt(O/2);if(w.length>0){o.stop_fading("images");o.fade_out(s,w,O/2,function(){L(O/2)},"images",true);T(O/2)}else{if(c||c===0){g=window.setTimeout(function(){g=0;L(O/2)},O/2)}}T(O/2)}else{yt(0);o.clean_up_transition(w);w.animate({left:(e?"-=":"+=")+(M-n),avoidTransforms:!s.use_webkit_transform,useTranslate3d:s.use_3d_transform},O,o.is_earlier_ie()?"easeOutQuart":"easeInOutQuart",function(){A(O/2)});T(P)}}}}};var B=function(e,t){H(true,e,t)};var j=function(e){if(!e){return}var t=1e3*s.imagetransitiontime;t=t*((400-e/2)/400);var n;n=k(" .jb-panel-detail .jb-dt-main-frame");n.stop();o.clean_up_transition(n);n.animate({left:"+="+ -e,avoidTransforms:!s.use_webkit_transform,useTranslate3d:s.use_3d_transform},t,"",null)};var F=function(e,t){H(false,e,t)};var I=function(){if(s.textcolor){k(".jb-cap-frame a").css({color:o.format_color(s.textcolor)})}if(s.textshadowcolor){k(".jb-cap-frame a").css({"text-shadow":o.get_text_shadow_style(s.textshadowcolor,s.textshadowcolora,true)})}};var q=function(e,t,n,r){if(e){y=e}if(t){b=t}k(".jb-panel-detail").css({width:e,height:t,top:n,left:r})};var R=function(e,n,a,f,l,c,p){if(c){y=c}if(p){b=p}if(c||p){k(".jb-dt-main-frame").css({width:y,height:b})}if(typeof f==="undefined"){f=true}var d=parseInt(y)+parseInt(s.minimagegap)+2*u.get_stage_padding(k("").width(),k("").height(),s);v=i.get_image(e);m=-1;var g=k(".jb-panel-detail");if(g.length>0&&!g.is(":visible")){g.show()}var E=i.get_image(e);var S=i.get_previous_image(e);var x=i.get_next_image(e);var T=n>0;var N=s.imagetransitiontype.toUpperCase();if(N!="FADE"&&N!="CROSS_FADE"&&N!="NONE"&&i.length()>2){r.children(":not(.jb-dt-main-image-"+e+")").remove()}else{r.children().remove()}var C=r.children(".jb-dt-main-image-"+e);if(C.length<=0){r.append(rt(E,0,true,T));C=r.children(".jb-dt-main-image-"+(E?E.position:""))}else{C.css({left:0})}if(E.loaded&&(s.imagenavposition.toUpperCase()==="IMAGE"||s.buttonbarposition.toUpperCase()==="OVERLAY_IMAGE")){var L=u.get_image_display_size(E,y,b,s);bt(L,w/2)}if(S){C.before(rt(S,-d,false,false))}if(x){C.after(rt(x,d,false,false))}if(!C.is(":visible")){if(!t.browser.msie||t.browser.version>=10){C.show().css({opacity:.01})}o.fade_in(s,C,n,false,null,"captions")}else{if(n){if(C.css("opacity")<1){if(!t.browser.msie||t.browser.version>=10){C.show().css({opacity:.01})}o.fade_in(s,C,n,false,null,"captions")}}else{C.css({opacity:1})}}var A=h.width();var O=h.height();if(f===true){if(T||l){if(t.browser.msie||o.is_firefox3()){h.hide()}else{o.fade_out(s,h,0)}}else{if(v.loaded){o.fade_in(s,h,0)}}}else{h.hide()}X(E);var M=A+parseInt(s.minimagegap)+u.get_side_panel_width(s);h.html(ft(S,A,O,-M,f)+ft(E,A,O,0,f)+ft(x,A,O,M,f));P("",E.position);I();if(s.captionbackcolor){k(".jb-caption").css({"background-color":o.format_color(s.captionbackcolor)})}if(n>0){o.stop_fading("images");o.fade_in(s,k(".jb-dt-main-image-"+E.position),n,false,a,"images",true);if(f){o.fade_in(s,h,n,false,null,"captions")}}else{if(f&&!l){h.show()}}};var U=function(e,t){o.fade_out(s,k(".jb-dt-main-image-"+v.position),e,t);o.fade_out(s,h,e)};var z=function(e){if(e>=i.length()){e=i.length()-1}if(e<0){return 0}return e};var W=function(e,t){var n=i.get_range(z(e),z(t));for(var r=0;r<n.length;r++){nt(n[r])}};var X=function(e){if(!e.loaded){return}var t=s.captionposition.toUpperCase();if(t!=="OVERLAY_IMAGE"){if(t==="BELOW_THUMBS"){return}if(t==="BELOW_IMAGE"){h.css({overflow:"visible"})}return}var n=u.get_image_display_size(e,y,b,s);var i=n.top+n.frameHeight-s.maxcaptionheight+s.framewidth;if(i<0){i=0}var o=parseInt(r.css("top"));i+=o;var a=parseInt(k("").height())-o-n.top-n.frameHeight-s.framewidth;h.css({top:i,bottom:a,overflow:"hidden"})};var V=function(e,t){if(!e){e=s.captionposition.toUpperCase()}if(e!="BELOW_THUMBS"||!o.is_side_layout(s)){return T}var n=p.get_show_area_position();var r=n.left+s.thumbpadding-(t?72:0);if(r<T){r=T}return r};var $=function(e){var t=k(".caption_"+e.position+" .jb-caption").height(),n;var r=s.captionposition.toUpperCase();var i=140;if(r!="OVERLAY_IMAGE"){n=i}else{if(e.loaded){if(!st(e)){n=0;t=0}else{var o=u.get_image_display_size(e,y,b,s);n=o.width;t=o.height}}else{return null}}if(n<100||t<k(".caption_"+e.position+" .jb-caption").height()){return{display:"none"}}else{if(n<i){return{display:"block",padding:"0"}}else{return{display:st(e)?"block":"none","padding-top":x+"px","padding-right":V(r,true)+"px","padding-left":V(r)+"px","padding-bottom":(ot()?x:x+18)+"px"}}}};var J=function(e){var t=$(e);if(!t){return""}var n="";for(var r in t){if(!r){continue}n+=r+":"+t[r]+";"}return n};var K=function(e,t){if(!e){return}var n=s.captionposition.toUpperCase();if(n!=="BELOW_IMAGE"&&n!=="OVERLAY_IMAGE"){return}var r=parseInt(h.width())+parseInt(s.minimagegap)+u.get_side_panel_width(s);var i=(e.position-v.position)*r;var o=$(e);if(o){k(".caption_"+e.position+" .jb-caption").css(o)}k(".jb-cap-frame.caption_"+e.position).attr("style",G(e,h.width(),h.height(),i,t))};var Q=function(){var e=s.captionposition.toUpperCase();return e!="BELOW_IMAGE"&&e!="BOTTOM"?false:true};var G=function(e,n,r,i,a){var f=Q();var l="position:absolute;";var c,h;var p=s.captionposition.toUpperCase();var d=s.imagetransitiontype.toUpperCase();if(d==="CROSS_FADE"&&!a&&e.loaded){l+=t.browser.msie||o.is_firefox3()?"display:none;":"opacity:0;"}if(p==="BELOW_IMAGE"||p==="OVERLAY_IMAGE"){if(!e.loaded){c=p==="OVERLAY_IMAGE"?"":"top:"+(r-s.maxcaptionheight>0?r-s.maxcaptionheight:0)+"px;";return l+(f?"height:100%;":"")+"width:100%;left:"+i+"px;display:none;"+c}}else{if(p!=="OVERLAY_IMAGE"&&!f||!e.loaded||p==="BOTTOM"){return l+(f?"height:100%;":"")+"width:"+n+"px;left:"+i+"px;"}}var v=u.get_image_display_size(e,y,b,s);var m=u.get_image_framewidth(y,b,s);if(p==="OVERLAY_IMAGE"){c=s.imagecornerradius>0?vt(s):"";h="width:"+v.frameWidth+"px;";i+=m}else{c="top:"+(v.top+v.frameHeight+2*m+u.get_image_padding(y,b,s))+"px;";h="width:"+(v.frameWidth+2*m)+"px;"}return l+h+"height:100%;padding:0;margin:0;left:"+(v.left+i)+"px;"+c};var Y=0;var Z=function(e,t,n){if(e==="BOTTOM"||e==="BELOW_IMAGE"||e==="OVERLAY_IMAGE"||e==="NONE"){return}if(Y){window.clearTimeout(Y);Y=0}Y=window.setTimeout(function(){Y=0;P(e,t)},n)};var et=function(e){if(!e){e=s.captionposition.toUpperCase()}if(e==="OVERLAY_IMAGE"||e==="BELOW_IMAGE"){return true}return false};var tt=function(e,n,r){if(!e.loaded){return}X(e);K(e,r);if(!r){if(!et()){return}o.fade_in(s,k(".jb-cap-frame.caption_"+e.position),n,true);Z("",e.position,n)}else{if(t.browser.msie&&t.browser.version>=10&&h.is(":visible")){h.css({opacity:1})}}};var nt=function(e,n){if(e.isPreloading||e.loaded){return}var r=new Image;e.isPreloading=true;r.onload=function(){e.loaded=true;e.width=r.width;e.height=r.height;i.update_image(e);var u=k(".jb-panel-detail .jb-dt-main-image-"+e.position);if(u.length>0){var a=function(){u.html(mt(e,n,false));var r=k(".jb-panel-detail .jb-dt-main-image-"+e.position+" img");r.disableSelection();if(v.position===e.position){u.hide();window.setTimeout(function(){o.fade_in(s,u,w);if(t.browser.msie&&t.browser.version>=10){window.setTimeout(function(){tt(e,w,true)},w/2)}else{tt(e,w)}},50)}};if(o.is_swipable_device()){window.setTimeout(a,100)}else{a()}}};r.src=e.imageURL};var rt=function(e,t,n,r,i,o){if(!e){return""}var u="";var a=s.imagetransitiontype.toUpperCase();if(t===0&&(a==="CROSS_FADE"||a==="FADE")){if(!i){i=2}u="z-index:"+i+";"}var f=s.showpreloader?"<div class='jb-status-loading' style='position:absolute;top:0;left:0;width:"+y+"px;height:"+b+"px;padding:0;margin:0;"+u+"'></div>":"";if(e.loaded){f=mt(e,n,false,o)}else{nt(e,n)}return"<div class='jb-dt-main-frame jb-dt-main-image-"+e.position+"' style='height:"+b+"px;width:"+y+"px;left:"+t+"px;"+it(r)+u+"'>"+f+"</div>"};var it=function(e){if(!e){return""}if(t.browser.msie||o.is_firefox3()){return"display:none;"}return"opacity:0;"};var st=function(e){if(!e){return""}var n=C.config.galleryfontface?"font-family:"+C.config.galleryfontface+";":"";var r,u,a="";if(s.useflickr){r=s.flickrshowtitle?e.caption:"";u=s.flickrshowdescription&&e.description?e.description:"";a=s.flickrshowpagelink?'<p class="jb-cap-content jb-caption-link"><a href="'+e.imageFullURL+'" target="_blank"  style="'+at()+ut()+";"+n+'">'+(s.flickrpagelinktext?s.flickrpagelinktext:e.caption)+"</a>&nbsp</p>":""}else{r=e.title?e.title:"";u=e.caption?e.caption:""}var f=s.captionhalign.toUpperCase();var l="";if(f==="CENTER"){l="text-align:center;"}else{if(f==="RIGHT"){l="text-align:right;"}}var c=t.trim(r)?'<p class="jb-cap-content jb-caption-title" style="'+l+n+'">'+r+"&nbsp</p>":"";var h=t.trim(u)?'<p class="jb-caption-desc" style="'+l+(s.showimagenumber?"":"margin-right:0;")+(r?"margin-top:10px;":"margin-top:0;")+n+'">'+u+"</p>":"";var p=s.showimagenumber?'<div class="jbac-number jb-classifier-layer" data-layer="2000" style="z-index:2000;'+(o.ship||!E?"":"padding-bottom:20px;")+at()+ut()+n+'">'+(e.position+1)+" / "+i.length()+"</div>":"";return p+c+h+a};var ot=function(){return o.ship||!E};var ut=function(){if(!s.textshadowcolor){return""}return"text-shadow:"+o.get_text_shadow_style(s.textshadowcolor,s.textshadowcolora,true)+";"};var at=function(){if(!s.textcolor){return""}return"color:"+o.format_color(s.textcolor)+";"};var ft=function(e,t,n,r,i,o){if(!e){return""}if(!o){o=1e3}var u=st(e);var a=s.maxcaptionheight-2*x;if(!ot()){a-=18}if(a<=0){a=s.maxcaptionheight>n?n:s.maxcaptionheight}var f="<div data-layer='1000' class='jb-caption jb-classifier-layer' style='overflow:hidden;z-index:"+o+";"+J(e)+(s.captionposition.toUpperCase()==="OVERLAY_IMAGE"?vt(s):"")+"max-height:"+a+"px;"+(u?"":"display:none;")+at()+ut()+"'>"+u+"</div>";var l=s.captionposition.toUpperCase();var c=true;if(l==="NONE"||l==="BELOW_IMAGE"||l==="OVERLAY_IMAGE"||!i||r!=0){c=false}var h=" class='jb-cap-frame caption_"+e.position+"' style='"+(u?G(e,t,n,r,i):c?"":"display:none;")+"'";if(Q()){return"<div"+h+">"+f+"</div>"}else{return"<table"+h+"><tr><td>"+f+"</td></tr></table>"}};var lt=function(e){if(o.ship){return}E=e;var t=s.maxcaptionheight-2*x;if(!ot()){t-=18}if(t<=0){t=s.maxcaptionheight>h.height()?h.height():s.maxcaptionheight}var n=e?x+18:x;var r=e?"20px":"";k(".jb-cap-frame .jb-caption").css({"padding-bottom":n,"max-height":t});k(".jb-cap-frame .jbac-number").css({"padding-bottom":r})};var ct=function(e){if(e.position!=M()){return}wt(e);I()};var ht=function(e){if(o.is_earlier_ie()){return""}if(o.is_small_android()||o.is_iphone()){return"-webkit-box-shadow: 0px 0px "+e.imageshadowblur+"px "+o.format_color(e.imageshadowcolora)+";"}return"box-shadow: 0px 0px "+e.imageshadowblur+"px "+o.format_color(e.imageshadowcolora)+";"};var pt=function(e,t){if(o.is_earlier_ie()){return""}var n=e.imagecornerradius;if(t){n=dt(e)}return n>0?"border-radius:"+n+"px;":""};var dt=function(e){var t=e.imagecornerradius;if(e.framewidth&&e.imagecornerradius){t=e.imagecornerradius-e.framewidth}if(t<0){t=0}return t};var vt=function(e){if(o.is_earlier_ie()){return""}return e.imagecornerradius>0?"border-bottom-left-radius:"+dt(e)+"px;border-bottom-right-radius:"+dt(e)+"px;":""};var mt=function(e,t,n,r){if(!e){return""}var i=u.get_image_display_size(e,y,b,s);var a=u.suggested_image_size(e,y,b,s,s.imagescalemode.toUpperCase());var f="";var l=false;var c=0;var h=0;if(a.height==="auto"&&i.frameHeight<i.height){c="-"+parseInt((i.height-i.frameHeight)/2)+"px";l=true}if(a.width==="auto"&&i.frameWidth<i.width){h="-"+parseInt((i.width-i.frameWidth)/2)+"px";l=true}if(o.is_adobe_air()&&s.imagescalemode.toUpperCase()==="FILL"){a.height=a.expectedHeight+"px";a.width=a.expectedWidth+"px"}var p="<div class='jb-dt-main-image' style='position:absolute;top:"+i.top+"px;left:"+i.left+"px;height:"+i.frameHeight+"px;width:"+i.frameWidth+"px;padding:0;overflow:hidden;border:none;"+(s.imageframecolor?"border-color:"+o.format_color(s.imageframecolor)+";":"")+(C.utils.is_earlier_ie()?C.config.frameopacity+";":"")+ht(s)+pt(s)+"'><img style='${0}$height:"+a.height+";width:"+a.width+";"+f+it(n)+pt(s,true)+"'  src='"+e.imageURL+"' alt='"+e.imageURL+"'></div>";var d=u.get_image_framewidth(y,b,s);if(d){p=p.replace("border:none;","border-style:solid;border-width:"+d+"px;")}if(e.position===v.position){if(r){yt(w/2)}else{bt(i,w/2)}}if(l){return p.replace("${0}$","display:inline;position:relative;top:"+c+";left:"+h+";")}return p.replace("${0}$","")};var gt=function(){return L};var yt=function(e){if(C.config.imagenavposition.toUpperCase()==="IMAGE"){var t=!C.config.showimagenav||C.config.showimageoverlay.toUpperCase()==="NEVER"?true:false;if(C.canImageMove()&&!t){o.fade_out(s,k(".jb-classifier-detail-area .jbn-left-button"),e)}if(C.canImageMove(true)&&!t){o.fade_out(s,k(".jb-classifier-detail-area .jbn-right-button"),e)}}if(C.config.buttonbarposition.toUpperCase()==="OVERLAY_IMAGE"){if((!C.config.showinfobutton||C.config.showinfobutton&&C.features.showinfo.visible())&&C.detail_panel.is_visible()){o.fade_out(s,k(".jb-classifier-link-wrapper.jb-classifier-detail-area, .jb-classifier-link-wrapper.jb-classifier-detail-area .jb-bb-bar"),e)}}};var bt=function(e,t){if(C.detail_panel.is_visible()){L=true}if(C.config.imagenavposition.toUpperCase()!="IMAGE"&&C.config.buttonbarposition.toUpperCase()!="OVERLAY_IMAGE"){return}var n=u.get_containers_size_and_position(C.glryWidth(),C.glryHeight(),C.index_panel.is_visible(),C.detail_panel.is_visible(),C.config_manager.isp,C.features.toppanel.isNeeded(),C.index_panel.get_thumb_height(),C.config,C.index_panel.getCurrentDisplayingThumbCount());var r=n.detail_panel_top;var i=u.get_stage_padding(C.glryWidth(),C.glryHeight(),C.config);var a=parseInt(C.config.imagenavpadding);if(a<=0){a=0}var f=e.top+Math.min(e.parentHeight,e.height)/2-k(".jbn-nav-button").height()/2+C.config.framewidth;var l=e.left+a+C.config.framewidth;var c=e.parentWidth-(e.left+e.width+C.config.framewidth)+a;if(C.config.imagenavposition.toUpperCase()==="IMAGE"){var h=!C.config.showimagenav||C.config.showimageoverlay.toUpperCase()==="NEVER"?true:false;k(".jb-classifier-detail-area .jbn-nav-left-touch-area .jbn-nav-button").css({left:l,top:f});k(".jb-classifier-detail-area .jbn-nav-right-touch-area .jbn-nav-button").css({right:c,top:f});if(C.canImageMove()&&!h){o.fade_in(s,k(".jb-classifier-detail-area .jbn-left-button"),t)}if(C.canImageMove(true)&&!h){o.fade_in(s,k(".jb-classifier-detail-area .jbn-right-button"),t)}}if(C.config.buttonbarposition.toUpperCase()==="OVERLAY_IMAGE"){var p=parseInt(C.config.imagecornerradius/4);var d=r+e.top+C.config.framewidth+a+p;var v=C.config.buttonbarhalign.toUpperCase();var m=C.features.buttonbar.getButtonbarWidth();var g=false;if(e.width-m<a){g=true}if(v==="LEFT"){k(".jb-classifier-link-wrapper.jb-classifier-detail-area").css({left:l+p+n.detail_panel_left-10,top:d,width:g?e.width-a:"auto"})}else{if(v==="CENTER"){m=C.features.buttonbar.getButtonbarWidth();var y=parseInt((e.width-m)/2+e.left+i+C.config.framewidth);y-=10;k(".jb-classifier-link-wrapper.jb-classifier-detail-area").css({left:y+n.detail_panel_left-i,top:d})}else{c-=10;k(".jb-classifier-link-wrapper.jb-classifier-detail-area").css({right:c+p+i+(C.config.thumbsposition.toUpperCase()==="RIGHT"?C.glryWidth()-n.index_panel_left:0),top:d,width:g?e.width-a:"auto"})}}if((!C.config.showinfobutton||C.config.showinfobutton&&C.features.showinfo.visible())&&C.detail_panel.is_visible()){o.fade_in(s,k(".jb-classifier-link-wrapper.jb-classifier-detail-area, .jb-classifier-link-wrapper.jb-classifier-detail-area .jb-bb-bar"),t)}}};var wt=function(e){if(!e){return}var t=",BELOW_THUMBS,";var n=",BOTTOM,BELOW_IMAGE,OVERLAY_IMAGE"+t;var i=","+s.captionposition.toUpperCase()+",";r.children().remove();var o=h.is(":visible")||t.indexOf(i)>-1;var u=s.showimageoverlay.toUpperCase();if(u==="NEVER"){if(n.indexOf(i)<0){o=false}}R(e.position,0,null,o);return};var Et=function(e,t){y=e;b=t;k(".jb-dt-main-frame").css({width:e,height:t});wt(v,e,t,0);tt(v,0,true);i.get_previous_image(v.position);i.get_next_image(v.position)};var St=function(e){N=e};var xt=function(){return N};return{get_photo_position:M,move_2_next_photo:B,move_2_previous_photo:F,initialize:A,populate_photo_html:R,repaint:Et,get_current_photo:_,preload_images:W,fadeout_current_image:U,repopulate_caption_html:ct,move_back:j,set_caption_height_mode:lt,is_initialized:function(){return S},change_2_photo:H,set_visible_flag:St,is_visible:xt,setContext:O,isImageShowed:gt,set_photo_position:D,set_container_size:q}};var gallery_defined=typeof juicebox_utils!="undefined";if(!gallery_defined){var juicebox_utils=new juice_box_utils(juicebox_lib.jQuery);var juicebox_registered_components={};var juicebox_instances=[];var juicebox_instance_count=0;var different_size_images_in_config=false;var juicebox=function(cnfg){var $=juicebox_lib.jQuery;var document_id="jb-glry-id-"+juicebox_instance_count;var _=function(e){return $(context.utils.get_query_path(document_id,e))};var sizing=null;var current_width=null;var current_height=null;var gallery_manager=new juicebox_gallery_manager;var index_panel=new juicebox_gallery_index_panel(juicebox_utils,gallery_manager);var detail_panel=new juicebox_gallery_detail_panel(index_panel);var ignoredOptions4New="showthumbsonload";var featureInstances={};for(var k in juicebox_registered_components){featureInstances[k]=new juicebox_registered_components[k](null)}var context={_:_,instance_id:juicebox_instance_count,utils:juicebox_utils,gallery_manager:function(){return gallery_manager},config_manager:new juicebox_config_manager($,juicebox_utils),index_panel:index_panel,detail_panel:detail_panel,sizing:function(){return sizing},glrySizePosition:function(e,t){if(!sizing){return null}if(typeof e=="undefined"){e=context.index_panel.is_visible()}if(typeof t=="undefined"){t=context.detail_panel.is_visible()}return sizing.get_containers_size_and_position(current_width,current_height,e,t,context.config_manager.isp,context.features.toppanel.isNeeded(),context.index_panel.get_thumb_height(),context.config,index_panel.getCurrentDisplayingThumbCount())},glryStagPadding:function(){if(!sizing){return null}return sizing.get_stage_padding(current_width,current_height,context.config)},glryWidth:function(){return current_width},glryHeight:function(){return current_height},isFullScreenMode:function(){return is_full_screen_mode||sizing.is_fullscreen_mode(context.config)},glryRepaint:function(e,t,n,r){if(featureInstances.splash.visible()){featureInstances.splash.repaint();return}repaint(e,t,n,r)},isOverlayVisible:function(){return overlay_visible},setOverlayFlag:function(e){overlay_visible=e},redrawIndexPanel:function(e){show_thumbnails(e)},correctPath:function(e){return correct_path(e)},setOverlay:function(e,t){overlay_visible=e;display_overlay(t)},showOverlayWithSetting:function(e,t){if(!detail_panel.is_visible()){return}overlay_visible=e;show_hide_overlay(e,t)},syncOverlayVisibility:function(){set_overlay_visible(overlay_visible);return overlay_visible},getGalleryInfo:function(){return get_current_gallery_image_info()},setExtendedGlry:function(e){extended_gallery=e},getExtendedGlry:function(){return extended_gallery},showImage:function(e,t,n,r){show_main_image(e,t,n,r)},switch2Main:function(e,t){switch_2_main_image(e,t)},unbindResize:function(){$(window).unbind("resize",windowResize)},canImageMove:function(e){return can_image_move(e)},canPageMove:function(e){return can_page_move(e)},nextImage:function(){next_image()},previousImage:function(){previous_image()},turnOffFullscreen:function(){is_full_screen_mode=false},hasMultipleSizeImages:function(){return different_size_images_in_config},setImageEventIndex:function(e){lastImageEventIndex=e},getIgnoredOptions4New:function(){return ignoredOptions4New}};context.features=featureInstances;var flickr_loader=null;var overlay_visible=true;var is_switching_image=false;context.config_manager.init(cnfg,null,"ck-s-");context.config=context.config_manager.get_config();var removeIgnoredOptions=function(){var e=ignoredOptions4New.split(",");for(var t=0;t<e.length;t++){if(e[t].length<=0){continue}delete context.config[e[t]]}};if(typeof expanded_jb_gallery!="undefined"){removeIgnoredOptions()}for(var j in context.features){context.features[j].setContext(context)}context.detail_panel.setContext(context);context.index_panel.setContext(context);gallery_manager.init(context.config);var image_change_speed=1e3*context.config.imagetransitiontime;var theme_cls="jcbx-glry-classic";var themeUrl="";var is_full_screen_mode=false;var right_button_offset=null;var extended_gallery=null;var correct_path=function(e){if(!e){return""}return context.utils.concate_path(context.config.baseurl,e)};var setup_layout=function(e,t,n){if(context.utils.is_large_screen_mode(context.config)){if(context.features.showthumbsbutton.isThumbsHidden()){context.index_panel.set_visible_flag(false)}else{context.index_panel.set_visible_flag(true)}context.detail_panel.set_visible_flag(true);_("").addClass("jb-flag-large-screen-mode")}else{if(n){context.index_panel.set_visible_flag(false);context.detail_panel.set_visible_flag(true)}else{context.index_panel.set_visible_flag(true);context.detail_panel.set_visible_flag(false)}_("").removeClass("jb-flag-large-screen-mode")}};var set_overlay_visible=function(e){if(context.config.showinfobutton){overlay_visible=context.features.showinfo.visible()}else{var t=context.config.showimageoverlay.toUpperCase();if(t==="ALWAYS"){overlay_visible=true}else{if(t==="NEVER"){overlay_visible=false}else{overlay_visible=e}}}};var show_hide_overlay=function(e,t){set_overlay_visible(e);display_overlay(t)};var display_overlay=function(e){var t=!context.detail_panel.isImageShowed()&&context.config.buttonbarposition.toUpperCase()==="OVERLAY_IMAGE"?":not(.jb-classifier-link-wrapper)":"";if($.browser.msie&&overlay_visible){_(".jb-classifier-show-on-over .jb-bb-bar").show()}context.utils.show_hide_controls(_(".jb-classifier-show-on-over"+t),overlay_visible,e)};var overlayTimer=0;var set_overlay=function(e,t){if(is_switching_image){return}if(!_(" .jb-panel-detail").is(":visible")){return}if(context.features.showthumbsbutton.isSwitching()){return}if(overlayTimer){window.clearTimeout(overlayTimer);overlayTimer=0}overlayTimer=window.setTimeout(function(){overlayTimer=0;show_hide_overlay(e,$.browser.msie&&$.browser.version>=7&&$.browser.version<8?0:t)},100)};var is_direct_open=function(){if(context.config.firstimageindex>0&&context.config.firstimageindex<=gallery_manager.length()){return true}var e=directGo2(true,true);if(e===1||e===3){return true}return false};var check_open_image_directly=function(){var e=directGo2(true);if(e===1||e===3){context.detail_panel.set_visible_flag(true);context.index_panel.set_visible_flag(false);return true}if(context.config.firstimageindex>0&&context.config.firstimageindex<=gallery_manager.length()){show_main_image(context.config.firstimageindex-1,image_change_speed,true);context.detail_panel.set_visible_flag(true);context.index_panel.set_visible_flag(false);return true}return false};var set_init_visible_panel=function(){setup_layout(current_width,current_height,true);var e=sizing.get_containers_size_and_position(current_width,current_height,context.index_panel.is_visible(),context.detail_panel.is_visible(),context.config_manager.isp,context.features.toppanel.isNeeded(),context.index_panel.get_thumb_height(),context.config,index_panel.getCurrentDisplayingThumbCount());set_containers_size_and_position(e);context.features.indexnav.setPosition(e)};var lastImgIdx=-1;var directGo2=function(e,t){var n=0;var r=context.features.hashstatus.getHashStatus();if(r.hasSet){lastImgIdx=-1}if((context.config.enabledirectlinks||e)&&r.directPicIdx>=0&&lastImgIdx!=r.directPicIdx){if(!t){lastImgIdx=r.directPicIdx;set_init_visible_panel();if(context.utils.is_large_screen_mode(context.config)){show_main_image(r.directPicIdx,image_change_speed,false,true)}else{switch_2_main_image(r.directPicIdx)}}n|=1}if(!r.hasExpHashPrefix&&context.features.fullscreen.switched_2_fullscreen()&&!context.utils.is_new_expanded_window()||r.hasExpHash&&!context.features.fullscreen.switched_2_fullscreen()&&!is_full_screen_mode){context.features.fullscreen.full_screen();n|=2}return n};var fireInitializedEvent=function(){if(juicebox_instances[context.instance_id]&&typeof juicebox_instances[context.instance_id].onInitComplete==="function"){juicebox_instances[context.instance_id].onInitComplete()}};var show_splash_page=function(){if(context.config.fotomotostoreid){context.utils.add_js_tag("http://widget.fotomoto.com/stores/script/"+context.config.fotomotostoreid+".js?api=true&aid=68677e1269332506","fotomotojs")}if(gallery_manager.length()<=0){return}context.utils.add_viewport_meta_tag_4_device(sizing.is_gallery_fully_filled(context.config.gallerywidth,context.config.galleryheight)||context.utils.is_new_expanded_window()||(context.utils.is_iphone()||context.utils.is_ipad())&&context.config.expandinnewpage.toUpperCase()==="FALSE");current_width=get_gallery_width();current_height=get_gallery_height();set_font();if(context.features.splash.isNeeded()){context.config_manager.sync_option_with_dependency({showexpandbutton:true});context.config=context.config_manager.get_config();_(".jb-classifier-detail-area").hide();_(".jb-panel-index").show();var e=function(){sizing.try_set_body_size(context.config,context.features.fullscreen.switched_2_fullscreen()||is_full_screen_mode);context.features.splash.repaint()};$(window).resize(e);context.features.splash.draw(_(" .jb-panel-index>.jb-idx-thumbnail-container"),function(){$(window).unbind("resize",e);$(window).resize(windowResize);context.features.fullscreen.full_screen()});hide_url_bar();if(!context.config.showthumbsonload){context.features.showthumbsbutton.setIndexVisibleFlag(false)}fireInitializedEvent();context.features.hashstatus.setHashChangedEvent(directGo2);var t=context.features.hashstatus.getHashStatus();if(t.hasExpHash){context.features.fullscreen.full_screen()}}else{after_loading_images();if(context.features.fullscreen.switched_2_fullscreen()||context.utils.is_new_expanded_window()){context.config_manager.sync_option_with_dependency({showexpandbutton:true});context.config=context.config_manager.get_config()}}};var get_panel_params=function(){return{jquery:$,document_id:document_id,container:_(" .jb-panel-index>.jb-idx-thumbnail-container"),config:context.config,utils:context.utils,glymng:gallery_manager,sizing:sizing,finish_draw_event_callback:switch_2_main_image,touch_event_callback:after_page_changed,caption_complete_callback:set_touch_component_height,current_width:current_width,current_height:current_height,debug:{debug3value:typeof debug_info2=="function"?debug_info2:null,debugmsg:typeof debug_message=="function"?debug_message:null}}};var setPanelHoverEvents=function(){if(!context.utils.is_iphone()&&!context.utils.is_ipad()&&!context.utils.is_android()&&!context.config.showinfobutton&&!context.config.forcetouchmode){var e="";_(e).hover(function(){if(!context.detail_panel.is_visible()){return}if(context.features.touchevent.isInNavigation()||context.features.touchevent.isInTransitioning()){return}if(is_switching_image){return}overlay_visible=true;set_overlay(overlay_visible,250);if(overlay_visible||context.config.imagenavposition.toUpperCase()!="STAGE"){context.features.imagenav.repaint()}},function(){if(!context.detail_panel.is_visible()){return}if(context.features.touchevent.isInNavigation()||context.features.touchevent.isInTransitioning()){return}if(is_switching_image){return}overlay_visible=false;set_overlay(overlay_visible,250)})}};var setNavEvents=function(){_(".jb-classifier-thumb-area .jbn-right-button").click(function(){return next_page(0)});_(".jb-classifier-thumb-area .jbn-left-button").click(function(){return previous_page(0)});var e=context.config.imageclickmode.toUpperCase();if(!context.utils.is_touchable_device(context.config)||document.msFullscreenEnabled||context.config.forcetouchmode||$.browser.msie&&e!="OPEN_URL"){var t;_(".jb-classifier-detail-area .jbn-right-button").click(function(){t=context.features.touchevent.getDelta();if(t.x||t.y){return null}context.features.autoplay.stop();return next_image(0)});_(".jb-classifier-detail-area .jbn-left-button").click(function(){context.features.autoplay.stop();t=context.features.touchevent.getDelta();if(t.x||t.y){return null}return previous_image(0)});if(!context.config.forcetouchmode){if(e==="NONE"){_(".jb-classifier-detail-area .jbn-nav-right-touch-area").css("cursor","default");_(".jb-classifier-detail-area .jbn-nav-left-touch-area").css("cursor","default")}else{if(e==="OPEN_URL"){_(".jb-classifier-detail-area .jbn-nav-right-touch-area").click(context.features.openurl.open_url);_(".jb-classifier-detail-area .jbn-nav-left-touch-area").click(context.features.openurl.open_url)}else{_(".jb-classifier-detail-area .jbn-nav-right-touch-area").click(function(){t=context.features.touchevent.getDelta();if(t.x||t.y){return false}context.features.autoplay.stop();return next_image(0)});_(".jb-classifier-detail-area .jbn-nav-left-touch-area").click(function(){t=context.features.touchevent.getDelta();if(t.x||t.y){return false}context.features.autoplay.stop();return previous_image(0)})}}}}else{var n=parseInt(1005*context.config.imagetransitiontime+510*context.config.imagetransitiontime);_(".jb-classifier-detail-area .jbn-right-button").bind("touchend",function(e){context.index_panel.yield_4_transition(n);e.preventDefault();if(context.features.touchevent.isInTransitioning()){return}context.features.touchevent.setTransitioning(true);context.features.autoplay.stop();next_image(0);window.setTimeout(function(){context.features.touchevent.setTransitioning(false)},n)});_(".jb-classifier-detail-area .jbn-left-button").bind("touchend",function(e){context.index_panel.yield_4_transition(n);e.preventDefault();if(context.features.touchevent.isInTransitioning()){return}context.features.touchevent.setTransitioning(true);context.features.autoplay.stop();previous_image(0);window.setTimeout(function(){context.features.touchevent.setTransitioning(false)},n)})}};var initialize_panels=function(){setup_layout(current_width,current_height,context.detail_panel.is_visible());var e=context.config.maxthumbrows*(context.config.thumbheight+context.config.thumbpadding);if(context.utils.is_side_layout(context.config)){e=10}var t=sizing.get_containers_size_and_position(current_width,current_height,context.index_panel.is_visible(),context.detail_panel.is_visible(),context.config_manager.isp,context.features.toppanel.isNeeded(),e,context.config,index_panel.getCurrentDisplayingThumbCount());var n=get_panel_params();n.current_width=t.index_panel_width;n.current_height=t.index_panel_height;context.index_panel.initialize(n,is_full_screen_mode||context.features.fullscreen.switched_2_fullscreen());n.container=_(" .jb-panel-detail");n.caption_container=context.features.caption.getArea();n.current_width=t.detail_panel_width;n.current_height=t.detail_panel_height;n.before_draw_event_callback=before_show_main_image;n.finish_draw_event_callback=after_show_main_image;context.detail_panel.initialize(n)};var windowResize=function(){repaint(false)};var set_hover_over_navs=function(){if(context.config.navbuttoniconhovercolor){var e="";_(".jbn-nav-button-icon").hover(function(){e=$(this).attr("style");$(this).css({color:context.utils.format_color(context.config.navbuttoniconhovercolor)})},function(){if($.browser.msie&&$.browser.version<10){$(this).css({color:context.utils.format_color(context.config.navbuttoniconcolor)})}else{$(this).attr("style",e)}})}};var set_font=function(){if(!context.config.galleryfontface){return}_(".jcbx-glry-classic").css({"font-family":context.config.galleryfontface})};var setSidePadding=function(){_(".jbn-nav-left-touch-area .jbn-nav-button").css({left:context.config.imagenavpadding});_(".jbn-nav-right-touch-area .jbn-nav-button").css({right:context.config.imagenavpadding})};var after_loading_images=function(){var e;if(is_full_screen_mode){$("body").css({overflow:"hidden"})}if(context.config.randomizeimages){gallery_manager.sort_images()}sizing.get_initial_size();$("#"+document_id).html(get_gallery_frame_html());set_font();context.features.touchevent.setEvent();initialize_panels();set_hover_over_navs();overlay_visible=context.config.showoverlayonload;var t=true;if(!context.utils.is_large_screen_mode(context.config)&&context.config.autoplayonload){t=false}var n="indexnav"+(context.utils.is_large_screen_mode(context.config)?",imagenav":"");if(t){var r=is_direct_open();var i=context.utils.is_large_screen_mode(context.config);n+=i||context.config.showsmallthumbsonload?",grytitle":"";n+=i||r||!context.config.showsmallthumbsbutton?",backbutton":"";if(i||!context.config.showsmallthumbsbutton||r){n+=context.config.buttonbarposition.toUpperCase()==="OVERLAY_IMAGE"?"":",buttonbar"}var s=1e3*context.config.fadetime;var o=!r&&!i;if(index_panel.is_visible()){context.utils.fade_in(context.config,context._(".jb-panel-index.jb-classifier-thumb-area"),s,context.utils.is_android()&&!i?true:false,null,"indexpanel")}var u=context.features.fullscreen.switched_2_fullscreen()||is_full_screen_mode;if(context.utils.is_ipad()){sizing.try_set_body_size(context.config,u);context.features.buttonbar.repaint();context.features.buttonbar.setPosition()}context.utils.reppaint_components(context.features,n,s,function(){if(!context.utils.is_new_expanded_window()){context.features.showinfo.showInfoCtrls(overlay_visible,0,true);if(o){repaint(true)}else{repaint(true,false,false,false,true);if(context.utils.is_android()&&i){window.setTimeout(function(){repaint(true)},image_change_speed+300)}}}if(context.utils.is_earlier_ie()){window.setTimeout(function(){repaint(true)},300)}})}else{context.features.showinfo.showInfoCtrls(overlay_visible)}if(context.config.useflickr){_("").addClass("jb-flickr-glry")}if(context.features.fullscreen.switched_2_fullscreen()){if(context.utils.need_viewport_meta()&&!context.utils.host_has_viewport_meta()){_("").addClass("jb-large-icon")}}setSidePadding();if(false){window.setTimeout(function(){display_error_message(themeUrl)},image_change_speed)}setup_layout(current_width,current_height,context.detail_panel.is_visible());e=sizing.get_containers_size_and_position(current_width,current_height,context.index_panel.is_visible(),context.detail_panel.is_visible(),context.config_manager.isp,context.features.toppanel.isNeeded(),context.index_panel.get_thumb_height(),context.config,index_panel.getCurrentDisplayingThumbCount());set_containers_size_and_position(e);context.utils.set_components_position(context.features,"indexnav,imagenav,backbutton,grytitle,buttonbar",e);$(window).resize(windowResize);if(context.utils.is_iphone()||context.utils.is_ipad()){window.onorientationchange=function(){repaint(true)}}context.utils.setup_components_event(context.features,"buttonbar");setNavEvents();if(context.detail_panel.is_visible()){if(context.features.fullscreen.switched_2_fullscreen()){overlay_visible=context.features.fullscreen.getPersistor().parent_gallery_param.overlay_info_visible}else{set_overlay_visible(overlay_visible)}if(t&&($.browser.msie||document.msFullscreenEnabled)&&n.indexOf("imagenav")>-1){}else{display_overlay(0);context.features.showinfo.showInfoCtrls(overlay_visible);context.features.imagenav.repaint()}}set_key_events();context.config.onload();setPanelHoverEvents();context.features.hashstatus.setHashChangedEvent(directGo2);var a=true;if(context.features.fullscreen.switched_2_fullscreen()){a=false;var f=context.features.fullscreen&&context.features.fullscreen.getPersistor().parent_gallery_param.openedFromSplash&&context.features.fullscreen.getPersistor().parent_gallery_param.openedFromSplash()?true:false;if(context.utils.is_large_screen_mode(context.config)){show_main_image(context.features.fullscreen.getPersistor().parent_gallery_param.current_image_index,image_change_speed,true);context.features.showthumbsbutton.setIndexVisibleFlag(!context.features.fullscreen.getPersistor().parent_gallery_param.hide_thumbnails_in_lsm);repaint(true);if(context.features.fullscreen.getPersistor().parent_gallery_param.is_autoplaying){context.features.autoplay.stop(false,true);context.features.autoplay.toggleAutoPlay(false,f?false:true)}}else{context.detail_panel.set_visible_flag(context.features.fullscreen.getPersistor().parent_gallery_param.is_detail_visible);context.index_panel.set_visible_flag(context.features.fullscreen.getPersistor().parent_gallery_param.is_index_visible);if(context.detail_panel.is_visible()){show_main_image(context.features.fullscreen.getPersistor().parent_gallery_param.current_image_index,image_change_speed,true);repaint(true);overlay_visible=context.features.fullscreen.getPersistor().parent_gallery_param.overlay_info_visible;display_overlay(0);context.features.showinfo.showInfoCtrls(overlay_visible);context.features.imagenav.repaint();if(context.features.fullscreen.getPersistor().parent_gallery_param.is_autoplaying){context.features.autoplay.stop(false,true);context.features.autoplay.toggleAutoPlay(false,f?false:true)}}else{show_thumbnails(context.features.fullscreen.getPersistor().parent_gallery_param.current_image_index);repaint(true)}}context.utils.add_fullscreen_listener(function(e){if(!e){context.features.fullscreen.full_screen()}})}else{if(context.utils.is_new_expanded_window()){a=false;context.features.showthumbsbutton.setIndexVisibleFlag(context.config.hide_thumbnails_in_lsm!="true");context.detail_panel.set_visible_flag(context.config.is_detail_visible==="true");context.index_panel.set_visible_flag(context.config.is_index_visible==="true");if(context.config.pageTitle){try{$("head > title").html(context.config.pageTitle)}catch(l){}}if(context.detail_panel.is_visible()){show_main_image(context.config.firstimageindex?context.config.firstimageindex-1:0,image_change_speed,true)}repaint(true)}}if(!context.utils.is_new_expanded_window()){window.setTimeout(function(){if(context.config_manager.isp&&context.features.fullscreen.switched_2_fullscreen()){lastImageEventIndex=context.features.fullscreen.getPersistor().parent_gallery_param.last_image_event_index;for(var e in context.features.fullscreen.getPersistor().parent_gallery){if(typeof context.features.fullscreen.getPersistor().parent_gallery[e]!="function"){continue}if(e==="onExpand"){continue}juicebox_instances[context.instance_id][e]=context.features.fullscreen.getPersistor().parent_gallery[e]}}},100);if(window.location.href.toLowerCase().indexOf("http")!==0&&$.browser.mozilla){repaint(true)}if(!t&&context.utils.is_earlier_ie()){window.setTimeout(function(){repaint(true)},100)}}var c=false;if(context.config.autoplayonload&&!context.features.fullscreen.switched_2_fullscreen()){var h=context.utils.is_large_screen_mode(context.config);if(!h){switch_2_main_image(context.detail_panel.get_photo_position());c=true}window.setTimeout(function(){context.features.autoplay.toggleAutoPlay(true)},100)}if(context.config.showthumbsonload===false&&context.utils.is_large_screen_mode(context.config)){context.features.showthumbsbutton.toggle_index_panel_4_lsm(true,true,is_direct_open()?true:false)}fireInitializedEvent();if(a){var p=check_open_image_directly();if(!p&&!c){if(!context.config.showsmallthumbsbutton||!context.config.showsmallthumbsonload){context.detail_panel.set_visible_flag(true);context.index_panel.set_visible_flag(false)}if(context.index_panel.is_visible()){show_thumbnails(0)}if(context.detail_panel.is_visible()&&!context.features.fullscreen.switched_2_fullscreen()){if(!context.utils.is_large_screen_mode(context.config)||context.config.showthumbsonload){window.setTimeout(function(){show_main_image(0,1e3*context.config.fadetime)},100)}}}else{if(context.detail_panel.is_visible()&&!context.utils.is_large_screen_mode(context.config)){overlay_visible=context.config.showoverlayonload;context.features.showinfo.showInfoCtrls(overlay_visible);show_hide_overlay(overlay_visible,0)}}}_(".jb-classifier-detail-area").disableSelection()};var can_image_move=function(e){var t=gallery_manager.length();if(t<=1){return false}if(context.config.enablelooping){return true}var n=context.detail_panel.get_photo_position();if(e){if(n>=t-1){return false}return true}else{if(n<=0){return false}return true}};var can_page_move=function(e){if(context.index_panel.is_last_page()&&context.index_panel.is_first_page()){return false}if(context.config.enablelooping){return true}if(e){if(context.index_panel.is_last_page()){return false}return true}else{if(context.index_panel.is_first_page()){return false}return true}};var set_key_events=function(){var e=function(){if(context.features.fullscreen.switched_2_fullscreen()||is_full_screen_mode){if(!context.utils.is_in_iframe()){_("").focus()}}};if(!context.config.enablekeyboardcontrols){if(context.config.enableautoplay){e();_("").keydown(function(e){if(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey){return}switch(e.keyCode){case 32:e.preventDefault();context.features.autoplay.toggleAutoPlay();break;default:break}})}return}if(context.utils.is_iphone()||context.utils.is_ipad()||context.utils.is_small_android()){return}e();_("").keydown(function(e){if(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey){return}switch(e.keyCode){case 32:e.preventDefault();if(!context.config.enableautoplay){return}context.features.autoplay.toggleAutoPlay();break;case 37:case 75:e.preventDefault();context.features.autoplay.stop();previous_image(0);break;case 39:case 74:e.preventDefault();context.features.autoplay.stop();next_image(0);break;case 36:e.preventDefault();context.features.autoplay.stop();show_thumbnails(0);show_main_image(0);break;case 35:e.preventDefault();context.features.autoplay.stop();var t=gallery_manager.length()-1;show_thumbnails(t);show_main_image(t);break;case 70:if(is_full_screen_mode||context.features.fullscreen.switched_2_fullscreen()){return}e.preventDefault();context.features.fullscreen.full_screen();break;case 27:if(context.features.fullscreen.switched_2_fullscreen()){e.preventDefault();context.features.fullscreen.full_screen()}break}})};var update_flickr_image_details=function(e,t){if(!t){return}var n=gallery_manager.get_image(e);if(n.flickrPhotoId!==t.id){return}n.description=t.description;n.detail_loaded=true;if(context.detail_panel.is_initialized()){context.detail_panel.repopulate_caption_html(n)}};var load_images=function(e){if(context.config.useflickr){flickr_loader=new juicebox_flickr_image_loader($,context.config_manager,display_error_message)}var t=context.config_manager.isp?1e5:50;if(context.config.useflickr){flickr_loader.get_images(function(e){for(var n=0;n<e.length&&n<t;n++){gallery_manager.add_image({imageURL:e[n].imageURL,thumbURL:e[n].thumbURL,caption:e[n].caption,imageFullURL:e[n].imageFullURL,flickrPhotoId:e[n].flickrPhotoId})}show_splash_page()},null)}else{var n=0;$(e).find("image").each(function(){if(n>=t){return}n++;var e=$(this);var r="imageURL";var i=context.utils.ship;if(i){if(context.utils.is_retina_display()){if(context.utils.is_large_screen_mode(context.config)){r="largeImageURL"}}else{if(context.utils.is_large_screen_mode(context.config)){if(!$.browser.msie&&context.config.usefullscreenexpand&&context.features.fullscreen.switched_2_fullscreen()){r="largeImageURL"}}else{r="smallImageURL"}}if(!different_size_images_in_config&&(e.attr("largeImageURL")||e.attr("smallImageURL"))){different_size_images_in_config=true}if(r!="imageURL"&&!e.attr(r)){r="imageURL"}}var s=correct_path(e.attr(r));var o=e.attr("thumbURL");var u=o?correct_path(o):s;var a=context.config_manager.isp?e.attr("purchaseURL"):"";var f=i&&e.attr("largeImageURL")?correct_path(e.attr("largeImageURL")):"";var l=i&&e.attr("smallImageURL")?correct_path(e.attr("smallImageURL")):"";var c=e.attr("imageURL")?correct_path(e.attr("imageURL")):"";gallery_manager.add_image({largeImageURL:f,smallImageURL:l,originalImageURL:c,imageURL:s,thumbURL:u,title:e.children("title").text(),caption:e.children("caption").text(),linkURL:correct_path(e.attr("linkURL")),linkTarget:e.attr("linkTarget"),purchaseURL:a})});show_splash_page()}};var get_gallery_height=function(e){return sizing.get_gallery_height(context.config,context.features.fullscreen.switched_2_fullscreen()||is_full_screen_mode,context.features.fullscreen.switched_2_fullscreen(),e)};var get_gallery_width=function(){return sizing.get_gallery_width(context.config,context.features.fullscreen.switched_2_fullscreen()||is_full_screen_mode,context.features.fullscreen.switched_2_fullscreen())};var init_before_loading_gallery_html=function(e){if($.browser.msie&&$.browser.version<8){var t=document.getElementById(context.config.containerid);t.innerHTML="__"}if(!context.utils.is_ie8()){e.css({height:context.config.galleryheight,width:context.config.gallerywidth})}sizing=new juicebox_sizing_manager($,e,context.utils);if(!context.utils.is_ie8()){is_full_screen_mode=sizing.is_fullscreen_mode(context.config)}sizing.try_set_body_size(context.config,context.features.fullscreen.switched_2_fullscreen()||is_full_screen_mode);if(!sizing.force_height_calculation(context.config)&&(context.config.galleryheight+"").indexOf("%")>0){$("#"+context.config.containerid).css({height:get_gallery_height(),width:context.config.gallerywidth})}else{e.css({height:context.config.galleryheight,width:context.config.gallerywidth})}if(context.utils.is_ie8()){is_full_screen_mode=sizing.is_fullscreen_mode(context.config)}if(is_full_screen_mode){$("body").css({padding:"0",margin:"0"})}current_width=get_gallery_width();current_height=get_gallery_height()};var init_after_dom_loaded=function(){_(".jb-navigation.jb-classifier-detail-area").fadeOut(0);context.utils.init_components(context.features,"fullscreen");if(window.location.href.toLowerCase().indexOf("http")!==0){if(context.utils.is_chrome()||context.utils.is_opera()||context.utils.is_ie_after_11()){display_error_message(context.config.languagelistall.lcchm);return}}var e=correct_path(context.config.configurl);$.ajax({url:e,type:"GET",error:function(){$("#"+document_id).html(display_error_message(context.config.languagelistall.ae))},success:function(e){var t;if(typeof e==="string"){if($.browser.msie){t=new ActiveXObject("Microsoft.XMLDOM");t.async=false;t.loadXML(e);e=t}else{t=new DOMParser;e=t.parseFromString(e,"text/xml")}}if(!context.utils.is_new_expanded_window()){context.config_manager.sync_options(cnfg,e);context.config=context.config_manager.get_config();for(var n in context.features){context.features[n].setContext(context)}if(context.features.fullscreen.switched_2_fullscreen()){removeIgnoredOptions()}}image_change_speed=1e3*context.config.imagetransitiontime;if(image_change_speed<=0){image_change_speed=1e3}context.index_panel.synchronize_config(context.config);_("."+theme_cls).attr("style",get_background_style());if(context.config.showpreloader){window.setTimeout(function(){load_images(e)},300)}else{load_images(e)}}})};var display_error_message=function(e){var t;if(context.config.containerid){t=$("#"+context.config.containerid)}else{t=_("")}var n;if(t.height()<=0&&context.config.galleryheight.indexOf("%")>0){t.height($(window).height()*parseInt(context.config.galleryheight)/100)}if(t&&t.length>0){n="<table style='width:100%;height:100%;text-align:center;background-color:#777;'><tr><td><div class='jb-error-message' style='color:white;font-family:sans-serif;font-size:18px;'>"+e+"</div></td></tr></table>";t.html(n)}else{n="<table style='width:100%;height:100%;text-align:center;font-family:sans-serif;font-size:18px;background-color:#777;color:#FFF;'><tr><td>"+e+"</td></tr></table>";document.write(n)}};var get_badge_style_str=function(){return["st","yl","e","=","'","dis","pl","ay",":","bl","ock"," !","imp","ort","ant",";","width",":","9","0","px"," !im","port","ant;","height",":","2","4","px"," !","imp","ort","ant",";","overflow",":","hidden"," !","imp","ort","ant",";","position",":","absolute"," !","imp","ort","ant",";","z-index",":","3","0","0","0"].join("")};var add_css_link=function(e){var t=document.createElement("link");t.type="text/css";t.rel="stylesheet";var n=document.getElementsByTagName("head")[0]||document.documentElement;t.href=e;n.appendChild(t)};var init=function(){context.utils.init_components(context.features,"hashstatus");juicebox_instance_count++;if(context.config.themeurl){themeUrl=context.config.themeurl}else{if(context.config.theme){themeUrl=correct_path(context.config.jbcore)+"themes/"+context.config.theme+"/css/style.css"}}add_css_link(themeUrl);var e;if(context.config.containerid){var t=0;e=$("#"+context.config.containerid);if(e.length>0){init_before_loading_gallery_html(e);e.html(gallery_skeleton(document_id));init_after_dom_loaded()}else{t=window.setInterval(function(){var e=$("#"+context.config.containerid);if(e.length<=0){if($("body").length>0){display_error_message(context.config.languagelistall.noid01+context.config.containerid+context.config.languagelistall.noid02);if(t){window.clearInterval(t)}t=0;return}return}if(t){window.clearInterval(t)}t=0;init_before_loading_gallery_html(e);e.html(gallery_skeleton(document_id));init_after_dom_loaded()},200)}}else{document.write(get_container_html(document_id));e=_("");init_before_loading_gallery_html(e);e.html(get_gallery_frame_html());init_after_dom_loaded()}};var get_container_html=function(e,t){var n="";if($.browser.msie){n="jb-flag-msie jb-flag-msiever"+parseInt($.browser.version)+(context.utils.is_earlier_ie()?" jb-flag-msie-bf9":"")}else{if(context.utils.is_swipable_device()){n="jb-flag-touchable"}}return"<div id='"+e+"' tabindex='0' class='juicebox-gallery "+n+"' style='width:100%;height:100%;'>"+(t?t:"")+"</div>"};var get_autoplay_status_html=function(){if(!context.config.showautoplaystatus){return""}return"<div class='jb-status-message' style='position:absolute;display:none;"+(context.config.galleryfontface?"font-family:"+context.config.galleryfontface+";":"")+"'></div>"};var get_background_style=function(){var e="height:100%";var t=context.config.backgroundcolor;if(context.features.fullscreen.switched_2_fullscreen()||context.utils.is_new_expanded_window()){if(context.config.expandedbackgroundcolor){t=context.config.expandedbackgroundcolor}}var n=t?"background-color:"+context.utils.format_color(t)+";"+(context.utils.is_earlier_ie()?context.config.backgroundopacity+";":""):"";return"display:none;width:100%;"+e+";"+n};var get_badge_image_url=function(){if(context.utils.is_adobe_air()){return""}return["u","rl","(","ht","tp",":","/","/","j","ui","ce","b","o","x",".","n","e","t","/","i","m","g","/","jb","0","0","1",".","p","n","g",")"].join("")};var get_badge_link=function(){return["on","c","l","i","c","k","=",'"',"w","i","n","d","o","w",".","o","p","e","n","(","'","h","t","t","p",":","/","/","w","w","w",".","j","u","i","c","eb","ox",".","ne","t'",")",";","return ","false",';"'].join("")};var get_gallery_frame_html=function(){var e="";if(!context.utils.ship){e="<div "+get_badge_style_str()+($.browser.msie?"":" !important")+";background: "+get_badge_image_url()+" no-repeat 0 0 !important;cursor:pointer;margin:0 !important;padding:0 !important;bottom:0 !important;right:0 !important' "+get_badge_link()+"></div>"}if(context.utils.is_adobe_air()){e=e.replace("<div style=","<div class='"+["j","b","-","b","a","d","g","e"].join("")+"' style=").replace(";background: "+get_badge_image_url()+" no-repeat 0 0 !important;",";")}var t=context.config.captionposition.toUpperCase();return"<div class='"+theme_cls+"' style='"+get_background_style()+"'>"+context.features.backgroundimage.getHtml()+context.features.toppanel.getHtml()+"<div class='jb-panel-index jb-classifier-thumb-area' data-layer='300' style='display:none;position:absolute !important;z-index:300;'><div class='jb-idx-thumbnail-container' style='height:100% !important;width:100% !important;margin:0;padding:0;position:relative;'></div><div class='jb-navigation index-navigation jb-classifier-thumb-area'><div class='jbn-nav-button jbn-left-button jbn-nav-button-icon jb-classifier-layer' data-layer='1000' style='z-index:1000;display:none;"+context.utils.get_nav_icon_style(context.config)+"'>"+context.utils.add_font_icon_4_ie8(context.config,"&#xe000;")+"</div><div class='jbn-nav-button jbn-right-button jbn-nav-button-icon jb-classifier-layer' data-layer='1000' style='z-index:1000;display:none;"+context.utils.get_nav_icon_style(context.config)+"'>"+context.utils.add_font_icon_4_ie8(context.config,"&#xe001;")+"</div></div><div class='jb-idx-thumbnail-show-more' style='left:10px;bottom:10px;height:30px;width:100%;margin:0;padding:0;position:absolute;display:none;'><a href='#'>more...</a></div></div>"+context.features.backbutton.getHtml()+context.features.buttonbar.getHtml4IndexPage()+"<div class='jb-panel-detail jb-classifier-detail-area jb-classifier-layer' data-layer='50' style='position:absolute !important'></div>"+context.features.grytitle.getHtml()+context.features.buttonbar.getHtml()+e+(t!="NONE"&&t!="BELOW_THUMBS"?context.features.caption.getHtml():"")+"<div class='jb-navigation jb-classifier-detail-area jb-classifier-layer' data-layer='500' style='height:100%;z-index:500;'>"+get_autoplay_status_html()+"<div class='jbn-nav-touch-area jbn-nav-left-touch-area'>"+context.features.imagenav.getHtml(true)+"</div><div class='jbn-nav-touch-area jbn-nav-right-touch-area'>"+context.features.imagenav.getHtml()+"</div></div></div>"};var get_current_gallery_image_info=function(){var e;var t=context.detail_panel.get_current_photo();if(context.config.enabledirectlinks){e=window.location.href}else{e=context.features.hashstatus.getUrlWithImageHash(t.position)}var n=_(".jb-area-large-mode-title").text();var r=_(".caption_"+t.position+" .jb-caption .jb-caption-title").text();var i=_(".caption_"+t.position+" .jb-caption .jb-caption-desc").text();var s=n;if(s){if(r){s+=" | "+r}}else{if(r){s=r}}var o=s;if(s&&i){s+=" | "+i}if(!s){s=i}return{shareUrl:encodeURIComponent(e),imageUrl:encodeURIComponent(context.utils.convert_to_absolute_path(t.imageURL)),shareText:encodeURIComponent(s),caption:encodeURIComponent(i),title:encodeURIComponent(r),galleryTitle:encodeURIComponent(n),allTitles:encodeURIComponent(o)}};var gallery_skeleton=function(e){var t=get_gallery_frame_html();return get_container_html(e,t)};var lastPageEventIndex=-1;var after_page_changed=function(e){context.features.indexnav.repaint();if(!e&&context.config_manager.isp&&juicebox_instances[context.instance_id]&&typeof juicebox_instances[context.instance_id].onThumbPageChange==="function"){var t=parseInt(context.index_panel.get_index())+1;if(t!=lastPageEventIndex){lastPageEventIndex=t;var n=context.detail_panel.get_current_photo();var r={id:t,title:context.config.gallerytitle,caption:n.caption};juicebox_instances[context.instance_id].onThumbPageChange(r)}}};var show_thumbnails=function(e){var t=sizing.get_containers_size_and_position(current_width,current_height,context.index_panel.is_visible(),context.detail_panel.is_visible(),context.config_manager.isp,context.features.toppanel.isNeeded(),context.index_panel.get_thumb_height(),context.config,index_panel.getCurrentDisplayingThumbCount());context.index_panel.show_page_4_image_position(e,t.index_panel_width,t.index_panel_height);context.utils.reppaint_components(context.features,"indexnav,grytitle,showthumbsbutton");if(context.index_panel.is_visible()){set_containers_size_and_position(t);context.features.indexnav.setPosition(t)}};var need_jump_2_page=function(e){if(!context.utils.is_swipable_device()||!context.features.touchevent.isInTransitioning()){return false}var t=sizing.get_containers_size_and_position(current_width,current_height,context.index_panel.is_visible(),context.detail_panel.is_visible(),context.config_manager.isp,context.features.toppanel.isNeeded(),context.index_panel.get_thumb_height(),context.config,index_panel.getCurrentDisplayingThumbCount());context.index_panel.show_page_4_image_position(e,t.index_panel_width,t.index_panel_height);return true};var before_show_main_image=function(e){if(!context.features.autoplay.isPlaying()||context.config.autoplaythumbs){context.index_panel.set_thumbnail_visited(e);if(context.index_panel.is_visible()){var t=context.index_panel.get_image_index_range();var n=t.to-t.from+1;if(e<t.from-n){return}if(e>t.to+n){return}if(e<t.from&&e===0){if(!need_jump_2_page(e)){context.index_panel.move_to_next_page()}}else{if(e>t.to){if(!need_jump_2_page(e)){context.index_panel.move_to_next_page()}}else{if(e<t.from){if(!need_jump_2_page(e)){context.index_panel.move_to_prev_page()}}}}}}};var after_show_main_image=function(e,t){is_switching_image=false;context.features.grytitle.repaint();if(!t||window.location.href.split("#").length<2||!window.location.href.split("#")[1]){context.features.hashstatus.setImageHash(e)}if(!context.features.autoplay.isPlaying()||context.config.autoplaythumbs){var n=context.index_panel.get_image_index_range();if(n.from>e||n.to<e){show_thumbnails(e)}}context.utils.reppaint_components(context.features,"buttonbar,backbutton");set_caption_height_mode();if(overlay_visible||context.config.imagenavposition.toUpperCase()!="STAGE"){context.features.imagenav.repaint()}context.features.showthumbsbutton.repaint();if(context.utils.is_swipable_device()&&overlay_visible){context.features.showinfo.showInfoCtrls(overlay_visible)}if(context.config_manager.isp&&juicebox_instances[context.instance_id]&&typeof juicebox_instances[context.instance_id].onImageChange==="function"){needImageEventOnFirstLoad=false;var r=context.detail_panel.get_current_photo();var i=parseInt(r.position)+1;var s={id:i,title:context.config.gallerytitle,caption:r.caption};if(i!=lastImageEventIndex){lastImageEventIndex=i;juicebox_instances[context.instance_id].onImageChange(s)}}handle_image_preload();if(context.utils.is_chrome()){_(" *").disableSelection()}else{_(".jb-dt-main-image-"+e+" img").disableSelection();_(".table_page_"+context.index_panel.get_index()+" img").disableSelection();if($.browser.mozilla){_(".jb-navigation.jb-classifier-detail-area *").disableSelection()}}if($.browser.msie&&$.browser.version>=8&&context.config.firstimageindex>0){context.index_panel.set_thumbnail_visited(e);window.setTimeout(function(){context.index_panel.set_thumbnail_visited(e)},200)}};var needImageEventOnFirstLoad=true;var lastImageEventIndex=-1;var show_main_image=function(e,t,n,r,i,s){context.features.touchevent.resetFlags();if(!t&&$.browser.msie){window.setTimeout(function(){context.index_panel.set_thumbnail_visited(e)},100)}else{context.index_panel.set_thumbnail_visited(e)}if(!context.utils.is_large_screen_mode(context.config)){context.features.buttonbar.setPosition()}if(n){context.detail_panel.populate_photo_html(e,t,function(){after_show_main_image(e,needImageEventOnFirstLoad);needImageEventOnFirstLoad=false},context.features.caption.isVisible(),false,i,s);return}if(t){is_switching_image=true;context.detail_panel.change_2_photo(false,0,context.features.caption.isVisible(),e)}else{context.detail_panel.populate_photo_html(e,0,null,context.features.caption.isVisible(),false,i,s);after_show_main_image(e,r)}needImageEventOnFirstLoad=false};var handle_image_preload=function(){var e;var t=context.config.imagepreloading.toUpperCase();if(t==="ALL"){e={from:0,to:gallery_manager.length()-1}}else{if(t==="NEXT"){e=context.index_panel.get_image_index_range(2)}else{if(t==="NONE"){e={from:context.detail_panel.get_current_photo().position,to:context.detail_panel.get_current_photo().position}}else{e=context.index_panel.get_image_index_range()}}}if(flickr_loader){flickr_loader.load_flickr_images_detail(gallery_manager.get_images(),e,update_flickr_image_details)}if(context.utils.is_large_screen_mode(context.config)){context.detail_panel.preload_images(e.from,e.to+1)}};var set_touch_component_height=function(e){var t=sizing.get_containers_size_and_position(current_width,current_height,context.index_panel.is_visible(),context.detail_panel.is_visible(),context.config_manager.isp,context.features.toppanel.isNeeded(),context.index_panel.get_thumb_height(),context.config,index_panel.getCurrentDisplayingThumbCount());set_touch_component_size(t.detail_panel_top,t.detail_panel_left,t.detail_panel_width,e)};var set_touch_component_size=function(e,t,n,r){_(".jb-navigation.jb-classifier-detail-area").css({top:e,left:t,width:n,height:r})};var switch_2_main_image=function(e,t){context.features.autoplay.stop();if(context.index_panel.is_visible()&&context.detail_panel.is_visible()){show_main_image(e,image_change_speed);return}context.detail_panel.set_visible_flag(true);context.index_panel.set_visible_flag(false);var n=function(){if(!context.utils.is_large_screen_mode(context.config)){if(context.config_manager.isp&&juicebox_instances[context.instance_id]&&typeof juicebox_instances[context.instance_id].onShowThumbs==="function"){juicebox_instances[context.instance_id].onShowThumbs(false)}}};if(_(".jb-panel-index").is(":visible")){var r=_(".jb-panel-index img");if(!r.length){_(".jb-classifier-thumb-area").hide();_(".jb-classifier-detail-area, .jb-area-caption").show();show_main_image(e);if(t){t()}}else{var i=1e3*context.config.imagetransitiontime;r.stop();context.utils.fade_out(context.config,r,i);window.setTimeout(function(){_(".jb-classifier-thumb-area").hide();var r=_(".jb-classifier-detail-area, .jb-area-caption");r.stop();_(".jb-area-caption").html("");if(context.utils.is_firefox3()){r.css({opacity:1,display:"none"})}r.children(".jb-dt-main-frame").remove();context.utils.fade_in(context.config,r,i);window.setTimeout(function(){show_main_image(e,i);n();if(t){t()}},20)},i>50?i-50:i)}}else{show_main_image(e);if(t){t()}}};var set_caption_height_mode=function(){if(context.config_manager.isp||!context.detail_panel.is_visible()){return}var e=true;if(context.index_panel.is_visible()&&context.config.captionposition.toUpperCase()!=="BOTTOM"&&context.config.captionposition.toUpperCase()!=="BELOW_THUMBS"){e=false}context.detail_panel.set_caption_height_mode(e)};var repaint_timer=0;var repaint=function(e,t,n,r,i){sizing.try_set_body_size(context.config,context.features.fullscreen.switched_2_fullscreen()||is_full_screen_mode);var s=n?current_height:get_gallery_height(r);var o=n?current_width:get_gallery_width();var u;if(!sizing.force_height_calculation(context.config)&&(context.config.galleryheight+"").indexOf("%")>0){var a=s;var f=$("#"+context.config.containerid).length>0?$("#"+context.config.containerid):_("").parent();var l=0;if(context.features.fullscreen.switched_2_fullscreen()&&context.config.autofullscreenexpand){l=3}f.height(a+l)}if($("#jb-glry-dlg:visible").length>0&&_("").parent().attr("id")!="jb-glry-dlg"){return}if(right_button_offset==null){right_button_offset=_(".jbn-right-button").width()+parseInt(_(".jbn-right-button").css("margin-right"))}context.index_panel.cleanup_initial_load_flag();if(e||current_width!=o||current_height!=s){current_width=o;current_height=s;a=s;if(context.features.fullscreen.switched_2_fullscreen()){_("").css({width:o,height:a})}else{if(sizing.force_height_calculation(context.config)){_("").css({height:a})}if(sizing.force_width_calculation(context.config)){_("").css({width:o})}}setup_layout(o,s,context.detail_panel.is_visible());u=sizing.get_containers_size_and_position(o,s,context.index_panel.is_visible(),context.detail_panel.is_visible(),context.config_manager.isp,context.features.toppanel.isNeeded(),context.index_panel.get_thumb_height(),context.config,index_panel.getCurrentDisplayingThumbCount());set_containers_size_and_position(u,i);if(!i){if(context.detail_panel.is_visible()){var c=context.utils.is_swipable_device()||context.config.buttonbarposition.toUpperCase()==="OVERLAY_IMAGE"?":not(.jb-classifier-link-wrapper)":"";var h=overlay_visible?"":":not(.jb-classifier-show-on-over)";var p=overlay_visible&&context.utils.is_swipable_device()?".jb-classifier-detail-area"+h+c+", .jb-area-caption":".jb-classifier-detail-area"+h+c;var d;if(context.utils.is_earlier_ie()){_(p).fadeIn(100);d=_(".jb-panel-detail img");d.fadeIn(100);_(".jb-panel-detail").fadeIn(100)}else{_(p).css("opacity",1).show();d=_(".jb-panel-detail img");d.css("opacity",1).show();_(".jb-panel-detail").css("opacity",1)}if(_(".jb-panel-detail").html()){context.detail_panel.repaint(u.detail_panel_width,u.detail_panel_height)}else{show_main_image(context.detail_panel.get_photo_position(),0,false,true,u.detail_panel_width,u.detail_panel_height)}context.features.caption.setMaxHeight(u)}else{context.detail_panel.repaint(u.detail_panel_width,u.detail_panel_height);_(".jb-classifier-detail-area, .jb-area-caption, .jb-classifier-link-wrapper.jb-classifier-detail-area").hide()}}if(context.index_panel.is_visible()&&!t){_(".jb-classifier-thumb-area").show();_(".jb-panel-index").show();var v=context.detail_panel.get_photo_position();context.index_panel.show_page_4_image_position(v,u.index_panel_width,u.index_panel_height,true)}else{_(".jb-panel-index").hide()}context.features.showthumbsbutton.repaint();context.index_panel.set_thumbnail_visited(context.detail_panel.get_photo_position());set_caption_height_mode();context.utils.set_components_position(context.features,"imagenav,indexnav,grytitle,buttonbar",u)}if(context.utils.ios_version()>=7&&current_width>current_height){window.scrollTo(0,-40)}if(!r){if(context.features.fullscreen.switched_2_fullscreen()){if(!context.utils.is_android()&&!$.browser.msie){var m=_("").offset();if(m){window.scrollTo(m.left,m.top)}}}else{if(is_full_screen_mode){if(context.utils.is_iphone()){window.scrollTo(0,1);if(repaint_timer){window.clearTimeout(repaint_timer);repaint_timer=0}repaint_timer=window.setTimeout(function(){window.scrollTo(0,1)},1e3)}}}}context.utils.reppaint_components(context.features,"backgroundimage")};var hide_url_bar=function(){if(context.utils.is_iphone()){window.scrollTo(0,1)}};if(context.config.css!=null){document.write("<style id='"+document_id+"_style'>"+context.config.css.replace(/\}\s/g,"} #"+document_id+" ").replace(/^/,"#"+document_id+" ")+"</style>");init()}else{init()}var next_page=function(){if(!can_page_move(true)){return false}context.index_panel.move_to_next_page(0,context.features.indexnav.repaint);handle_image_preload();return false};var previous_page=function(){if(!can_page_move(false)){return false}context.index_panel.move_to_prev_page(0,context.features.indexnav.repaint);handle_image_preload();return false};var next_image=function(e){if(!can_image_move(true)||!context.detail_panel.is_visible()){return false}context.detail_panel.move_2_next_photo(e,context.features.caption.isVisible());return false};var previous_image=function(e){if(!can_image_move(false)||!context.detail_panel.is_visible()){return false}context.detail_panel.move_2_previous_photo(e,context.features.caption.isVisible());return false};var set_containers_size_and_position=function(e,t){var n=function(e,t){var n=t.detail_panel_height/2+parseInt(_(".jbn-right-button").height()/2);var r=_(".jb-cap-frame.caption_"+e+" a");var i=context.config.captionposition.toUpperCase();var s=i!="BOTTOM"&&i!="NONE"&&i!="BELOW_IMAGE"&&i!="BELOW_THUMBS";set_touch_component_size(t.detail_panel_top,t.detail_panel_left,t.detail_panel_width,t.detail_panel_height-(!s||r.length<=0?0:n>context.config.maxcaptionheight?context.config.maxcaptionheight:n))};var r=context.detail_panel.get_current_photo().position;n(r,e);context.index_panel.set_container_size(e.index_panel_width,e.index_panel_height,e.index_panel_top,e.index_panel_left);context.detail_panel.set_container_size(e.detail_panel_width,e.detail_panel_height,e.detail_panel_top,e.detail_panel_left);var i=context.config.captionposition.toUpperCase();var s=!context.utils.is_earlier_ie()&&i!="NONE"&&i!="BOTTOM"&&i!="BELOW_IMAGE"&&i!="BELOW_THUMBS";var o=e.caption_panel_height;if(!($.browser.msie&&$.browser.version<=8)&&(context.utils.is_large_screen_mode(context.config)&&(context.features.showthumbsbutton.isThumbsHidden()||s)||!context.utils.is_large_screen_mode(context.config))){o="100%"}var u=e.caption_panel_top;if(i==="BELOW_THUMBS"){o="auto"}if(!t){context.features.caption.setAreaStyle({width:e.caption_panel_width,height:o,top:u,left:e.caption_panel_left,bottom:e.caption_panel_bottom});context.features.caption.setMaxHeight(e)}context.features.toppanel.setAreaStyle({width:e.top_panel_width,height:e.top_panel_height,top:e.top_panel_top,left:e.top_panel_left})};context.utils.init_components(context.features,"api");juicebox_instances[context.instance_id].debug=function(script){context.config.debugmode=true;eval(script)};return juicebox_instances[context.instance_id]}}juicebox_registered_components.api=function(){var e,t;var n=function(n){e=n;t=e._};var r=function(){var n={sendMessage:function(){if(e.config_manager.isp&&juicebox_instances[e.instance_id]&&typeof juicebox_instances[e.instance_id].onExpand==="function"){juicebox_instances[e.instance_id].onExpand(false)}},restore:function(n,r){e.features.hashstatus.setExpanded(false);e.features.hashstatus.enableHashEvent(true);e.setExtendedGlry(null);if(e.features.splash.isSet()){return}if(typeof r!="undefined"){window.setTimeout(function(){e.showOverlayWithSetting(e.isOverlayVisible(),0);e.features.showinfo.showInfoCtrls(e.isOverlayVisible());if(!e.detail_panel.is_visible()){t(".jb-area-caption").hide()}$('.jb-dt-main-frame[style*="opacity: 0.01"]').fadeIn()},100)}e.features.showthumbsbutton.toggle_index_panel_4_lsm(true,n)},setGallerySize:function(n,r){if(e.features.fullscreen.switched_2_fullscreen()){return}var i=$("#"+e.config.containerid);if(i.length<=0){return}var s=parseInt(n)+"px";var o=parseInt(r)+"px";e.turnOffFullscreen();e.config.gallerywidth=s;e.config.galleryheight=o;i.css({height:o,width:s});t("").height(o);e.glryRepaint(true)},getScreenMode:function(){return e.utils.is_large_screen_mode(e.config)?"LARGE":"SMALL"}};var r=function(t,n){if(e.features.splash.visible()){return false}var r=e.index_panel.is_visible();if(e.getExtendedGlry()){r=e.getExtendedGlry().isIndexVisible()}if(e.utils.is_large_screen_mode(e.config)||!r){if(n){n()}return false}var i=e.detail_panel.get_photo_position()+t;if(i<0){if(e.config.enablelooping){i=e.gallery_manager().length()-1}else{i=0}}if(i>=e.gallery_manager().length()){if(e.config.enablelooping){i=0}else{i=e.gallery_manager().length()-1}}if(e.getExtendedGlry()){e.getExtendedGlry().switch2MainE(i)}else{e.switch2Main(i,n)}return true};var i=e.config_manager.isp?{showGallery:function(n){if(!n){e.features.audio.stop();e.features.autoplay.stop()}n?t("").show():t("").hide()},showImage:function(t){if(e.getExtendedGlry()){e.getExtendedGlry().showImageE(t);return}var n=e.gallery_manager().length();t--;if(t<0||t>=n){return}e.showImage(t)},showNextImage:function(){if(r(1)){return}if(e.getExtendedGlry()){e.getExtendedGlry().showNextImageE();return}e.nextImage()},showPreviousImage:function(){if(r(-1)){return}if(e.getExtendedGlry()){e.getExtendedGlry().showPreviousImageE();return}e.previousImage()},showIndexByImage:function(){if(e.getExtendedGlry()){e.getExtendedGlry().showIndexByImageE();return}e.redrawIndexPanel()},toggleAutoPlay:function(t){r(0,function(){if(e.getExtendedGlry()){e.getExtendedGlry().toggleAutoPlayE(false,t);return}e.features.autoplay.toggleAutoPlay(false,t)})},toggleThumbs:function(){if(r(0)){return}if(e.getExtendedGlry()){e.getExtendedGlry().toggleThumbsE();return}e.features.showthumbsbutton.indexButtonClicked(true)},toggleAudio:function(){if(e.getExtendedGlry()){e.getExtendedGlry().toggleAudioE();return}e.features.audio.toggleAudioPlay()},toggleExpand:function(){if(e.getExtendedGlry()){e.getExtendedGlry().toggleExpandE();return}e.features.fullscreen.full_screen()},toggleOverlay:function(){if(e.features.splash.visible()){return}e.setOverlay(!e.isOverlayVisible(),250)},openImageLink:function(){e.features.openurl.open_url()},showThumbPage:function(t){t--;e.index_panel.show_page_by_page_index(t)},getImageInfo:function(t){t--;var n=e.gallery_manager().length();if(t<0||t>=n){return null}var r=e.gallery_manager().get_image(t);return{id:parseInt(r.position)+1,imageURL:r.originalImageURL,largeImageURL:r.largeImageURL,smallImageURL:r.smallImageURL,displayingImageURL:r.imageURL,thumbURL:r.thumbURL,caption:r.caption,title:r.title,linkURL:r.linkURL,linkTarget:r.linkTarget}},getImageCount:function(){return e.gallery_manager().length()},getThumbPageIndex:function(){return parseInt(e.index_panel.get_index())+1},getImageIndex:function(){return parseInt(e.detail_panel.get_current_photo().position)+1}}:{};if(e.config_manager.isp&&e.features.fullscreen.getPersistor().parent_gallery){i={showImageE:function(t){var n=e.gallery_manager().length();t--;if(t<0||t>=n){return}e.showImage(t)},showNextImageE:e.nextImage,showPreviousImageE:e.previousImage,showIndexByImageE:e.redrawIndexPanel,toggleAutoPlayE:e.features.autoplay.toggleAutoPlay,toggleThumbsE:e.features.showthumbsbutton.indexButtonClicked,toggleAudioE:e.features.audio.toggleAudioPlay,toggleExpandE:e.features.fullscreen.full_screen,switch2MainE:e.switch2Main,isIndexVisible:e.index_panel.is_visible}}juicebox_instances[e.instance_id]=juicebox_lib.jQuery.extend(n,i)};return{setContext:n,init:r}};juicebox_registered_components.touchevent=function(){var e,t;var n=juicebox_lib.jQuery;var r=false,i=false,s=0,o,u,a,f,l,c;var h=function(n){e=n;t=e._};var p=function(){A()};var d=function(){};var v=function(){return{x:a,y:c}};var m=function(){r=false;i=false;if(s){window.clearTimeout(s);s=0}};var g=function(){return r};var y=function(){return i};var b=function(e){return r=e};var w=function(e){return i=e};var E=function(e){if(t(".jb-area-caption").is(":visible")){t(".jb-area-caption").addClass("jb-status-cap-hide-4-move").fadeOut(e)}};var S=function(e){t(".jb-area-caption.jb-status-cap-hide-4-move").removeClass("jb-status-cap-hide-4-move").fadeIn(e)};var x=function(n){if(e.config.imagenavposition.toUpperCase()!="IMAGE"){return}t(".jb-classifier-detail-area .jbn-nav-button div").fadeOut(n)};var T=function(){if(e.config.imagenavposition.toUpperCase()!="IMAGE"){return}set_image_nav()};var N=function(n){if(e.config.buttonbarposition.toUpperCase()!="OVERLAY_IMAGE"){return}t(".jb-classifier-link-wrapper.jb-classifier-detail-area, .jb-classifier-link-wrapper.jb-classifier-detail-area .jb-bb-bar").fadeOut(n)};var C=function(n){if(e.config.buttonbarposition.toUpperCase()!="OVERLAY_IMAGE"){return}if(e.utils.is_buttonbarposition_default(e.config)&&!e.isOverlayVisible()){return}if(!e.detail_panel.is_visible()){return}if(!n){n=0}t(".jb-classifier-link-wrapper.jb-classifier-detail-area, .jb-classifier-link-wrapper.jb-classifier-detail-area .jb-bb-bar").fadeIn(n)};var k=function(t,n){e.detail_panel.move_back(t);if(e.config.imagenavposition.toUpperCase()=="IMAGE"){window.setTimeout(function(){T()},500*e.config.imagetransitiontime)}if(e.utils.is_buttonbarposition_default(e.config)||e.config.buttonbarposition.toUpperCase()=="OVERLAY_IMAGE"){window.setTimeout(function(){C()},500*e.config.imagetransitiontime)}window.setTimeout(function(){S()},500*e.config.imagetransitiontime);if(n){window.setTimeout(function(){n()},1e3*e.config.imagetransitiontime+100)}};var L=function(){e.setOverlay(!e.isOverlayVisible(),250)};var A=function(){var h=function(n,o){r=false;i=true;var u=parseInt(1e3*e.config.imagetransitiontime*(e.glryWidth()-a)/e.glryWidth());if(o>10){e.features.autoplay.stop();if(!e.canImageMove(false)){k(o,function(){e.glryRepaint(true,false,true,true)})}else{e.detail_panel.move_2_previous_photo(Math.abs(o),e.config.captionposition.toUpperCase()==="BELOW_THUMBS"&&!e.index_panel.is_visible()?false:e.isOverlayVisible())}n.preventDefault()}else{if(o<-10){e.features.autoplay.stop();if(!e.canImageMove(true)){k(o)}else{e.detail_panel.move_2_next_photo(Math.abs(o),e.config.captionposition.toUpperCase()==="BELOW_THUMBS"&&!e.index_panel.is_visible()?false:e.isOverlayVisible())}n.preventDefault()}else{var f=e.config.imageclickmode.toUpperCase();if(f==="OPEN_URL"){e.features.openurl.open_url();s=0;i=false;T();C();S();return}if(!e.config.showinfobutton){if(!e.utils.is_touchable_desktop()||!e.isOverlayVisible()){e.detail_panel.move_back(a);if(e.config.showimageoverlay.toUpperCase()!=="NEVER"){L()}if(e.config.captionposition.toUpperCase()==="BELOW_IMAGE"){t(".jb-area-caption").fadeIn()}}else{k(o)}u=310}else{k(o);s=0;i=false;return}}}e.index_panel.yield_4_transition(u);if(e.utils.is_large_screen_mode(e.config)){s=window.setTimeout(function(){s=0;i=false},u)}else{i=false}};var p=function(t){if(e.features.fullscreen.switched_2_fullscreen()){t.preventDefault()}if(r){return}if(i){i=false}a=0;c=0;if(!r){r=true;if(e.utils.is_touchable_desktop()){var n=e.utils.getMsPointerXy(t);o=n.x;f=n.y}else{o=t.originalEvent.touches[0].pageX;f=t.originalEvent.touches[0].pageY}u=o;l=f;x(0);N(0)}};var d=0;var v=function(n){var s=0;var h=0;if(e.features.fullscreen.switched_2_fullscreen()||e.isFullScreenMode()||Math.abs(s-o)>Math.abs(h-f)){n.preventDefault()}if(e.utils.is_touchable_desktop()){var p=e.utils.getMsPointerXy(n);s=p.x;h=p.y}else{s=n.originalEvent.touches[0].pageX;h=n.originalEvent.touches[0].pageY}if(i){return}if(!r){return}E(0);a=s-o;c=h-f;if(Math.abs(a)>10){e.features.autoplay.stop()}var v=t(" .jb-panel-detail .jb-dt-main-frame");e.utils.clean_up_transition(v);v.animate({left:"+="+(s-u),avoidTransforms:!e.config.use_webkit_transform,useTranslate3d:e.config.use_3d_transform},0);u=s;l=h;if(e.utils.is_android()){if(d){window.clearTimeout(d)}d=window.setTimeout(function(){d=0;m(n)},1e3)}};var m=function(t){if(e.config.autofullscreenexpand){e.utils.show_real_fullscreen(e.config.containerid)}if(d){window.clearTimeout(d);d=0}var n=Math.abs(a)>Math.abs(c);if(e.features.fullscreen.switched_2_fullscreen()||e.isFullScreenMode()||n){t.preventDefault()}if(i||!r){a=0;c=0;r=false;return}if(n){h(t,a)}else{if(Math.abs(c)>10){k(a);if(!e.isFullScreenMode()&&!e.features.fullscreen.switched_2_fullscreen()){window.scrollBy(0,-1*c)}r=false}else{h(t,0)}}};if(e.utils.is_touchable_desktop()){var g=document.getElementsByClassName("jb-navigation jb-classifier-detail-area");for(var y=0;y<g.length;y++){var b=g[y];b.addEventListener("touchstart",p,false);b.addEventListener("touchmove",v,false);b.addEventListener("touchend",m,false);b.addEventListener("gesturestart",p,false);b.addEventListener("gesturechange",v,false);b.addEventListener("gestureend",m,false)}}else{if(!n.browser.msie&&!document.msFullscreenEnabled){t(".jb-navigation.jb-classifier-detail-area").bind("touchstart",p).bind("touchmove",v).bind("touchend",m)}}if(!(n.browser.msie||document.msFullscreenEnabled)||e.utils.is_touchable_desktop()){t(".jb-classifier-detail-area .jbn-right-button, jb-classifier-detail-area .jbn-left-button").bind("touchstart",function(e){e.preventDefault()}).bind("touchmove",function(e){e.preventDefault()}).bind("touchend",function(e){e.preventDefault()});t(".jb-area-caption, .jb-classifier-link-wrapper, .jb-area-large-mode-title").bind("touchmove",function(e){e.preventDefault()});t(".jb-panel-detail").nextAll('div[onclick*="window.open"]').bind("touchmove",function(e){e.preventDefault()}).bind("touchend",function(e){window.open("http://www."+["ju","ice","b","ox",".n","et"].join(""));e.preventDefault()})}if(e.config.forcetouchmode&&!e.utils.is_touchable_desktop()){t(".jb-classifier-detail-area .jbn-left-button, .jb-classifier-detail-area .jbn-right-button").mouseup(function(e){e.preventDefault();r=false}).mousedown(function(e){e.preventDefault()}).mousemove(function(e){e.preventDefault()});t(".jb-navigation.jb-classifier-detail-area").mousedown(function(e){if(e.which!==1){return}var t={originalEvent:{touches:[{}]}};e.preventDefault();t.preventDefault=function(){};t.originalEvent.touches[0].pageX=e.screenX;t.originalEvent.touches[0].pageY=e.screenY;p(t)}).mousemove(function(e){if(e.which!==1){r=false;return}if(!r){return}var t={originalEvent:{touches:[{}]}};t.preventDefault=function(){};t.originalEvent.touches[0].pageX=e.screenX;t.originalEvent.touches[0].pageY=e.screenY;v(t)}).mouseup(function(){if(!r){return}var e={};e.preventDefault=function(){};m(e)}).mouseout(function(){if(!r){return}var e={};e.preventDefault=function(){};m(e)})}};return{setContext:h,setEvent:p,init:d,isInNavigation:g,isInTransitioning:y,resetFlags:m,setNavigation:b,setTransitioning:w,getDelta:v}};juicebox_registered_components.caption=function(){var e,t;var n=function(n){e=n;t=e._};var r=function(){var t=e.config.captionposition.toUpperCase();if(t==="NONE"){return""}var n;if(t==="BELOW_IMAGE"||t==="BOTTOM"||t==="BELOW_THUMBS"){n="jb-flag-size-fixed"}else{n="jb-classifier-show-on-over"}var r=e.config.thumbsposition.toUpperCase();var i=(t==="BOTTOM"||t==="BELOW_THUMBS")&&r!="LEFT"&&r!="RIGHT"?400:200;return"<div class='jb-area-caption jb-classifier-layer "+n+"' data-layer='200' style='display:none; position:absolute !important;overflow:hidden; bottom: 0; z-index:"+i+"; max-height:"+e.config.maxcaptionheight+"px;"+(e.config.galleryfontface?"font-family:"+e.config.galleryfontface+";":"")+"'></div>"};var i=function(){return t(".jb-area-caption")};var s=function(e){t(".jb-area-caption").css(e)};var o=function(e){e.html(r());return true};var u=function(){};var a=function(){};var f=function(e){if(!l()){return}var n=t(".jb-area-caption");if(e){n.fadeIn(e)}else{n.show()}};var l=function(){var t=e.config.captionposition.toUpperCase();if(t==="NONE"){return false}if(e.config.captionposition.toUpperCase()==="BELOW_THUMBS"&&!e.index_panel.is_visible()){return false}if(t==="BELOW_IMAGE"||t==="BOTTOM"||t==="BELOW_THUMBS"){return true}return e.syncOverlayVisibility()};var c=function(t){var n=",BOTTOM,NONE,BELOW_IMAGE,BELOW_THUMBS,";var r=","+e.config.captionposition.toUpperCase()+",";if(!t||!t.detail_panel_top&&!t.detail_panel_height){return}var i=e.config.maxcaptionheight>t.detail_panel_height&&n.indexOf(r)<0?t.detail_panel_height:e.config.maxcaptionheight;if(i<=0){i=0}s({"max-height":i})};return{setContext:n,getHtml:r,draw:o,setEvent:u,init:a,repaint:f,isVisible:l,setAreaStyle:s,getArea:i,setMaxHeight:c}};juicebox_registered_components.splash=function(){var e,t,n,r,i=false,s=false;var o=function(n){e=n;t=e._};var u=function(){if(!r){r=e.config.splashimageurl?e.correctPath(e.config.splashimageurl):e.gallery_manager().get_image(0).imageURL}var t=e.config.galleryfontface?"font-family:"+e.config.galleryfontface+";":"";var n="style='display:none;position:absolute;left:0;top:0;width:"+e.glryWidth()+"px;height:"+e.glryHeight()+"px;"+t+"'";return"<table><tr><td class='jb-splash-holder'><img src='"+r+"' "+n+"/>                     <div class='jb-splash-background' "+n+"></div>                     <div class='jb-splash'>                     <div class='jb-splash-info jb-layer' data-layer='100' style='z-index:100;'>                         <h3 style='"+t+"'>"+(e.config.splashtitle?e.config.splashtitle:e.config.gallerytitle)+"</h3>                         "+(e.config.splashshowimagecount?"<p class='jb-splash-cnt' style='"+t+"'>"+e.gallery_manager().length()+" "+e.config.languagelistall.splimgs+"</p>":"")+a()+"<a class='jb-splash-view-glry' href='#' style='"+t+"'>"+e.config.splashbuttontext+"</a>                     </div>                 </div></td></tr></table>"};var a=function(){if(!e.config.gallerydescription){return""}return"<p class='jb-splash-desc'>"+e.config.gallerydescription+"</p>"};var f=function(e){if(!e.playaudioonload){return false}if(!s){return false}return true};var l=function(){return s};var c=function(r){i=true;s=true;n=r;r.html(u());d();e.features.audio.init(true);if(e.config.autoplayonload){e.features.autoplay.set_autoplay_flag(1)}e.setOverlayFlag(e.config.showoverlayonload);e.features.showinfo.showInfoCtrls(e.config.showoverlayonload);if(e.config.firstimageindex>0&&e.config.firstimageindex<=e.gallery_manager().length()){e.detail_panel.set_photo_position(e.config.firstimageindex-1)}t(".jb-splash-view-glry, .jb-splash, .jb-splash-background").click(function(){i=false;e.features.fullscreen.full_screen();return false})};var h=function(){return i};var p=function(){};var d=function(){var n=e.sizing();var i=n.get_gallery_width(e.config,false);var s=n.get_gallery_height(e.config,false);e.sizing().position_2_fill_image(i,s,r,function(n){t(".jb-splash-holder img").css({top:n.imageTop,left:n.imageLeft,width:n.imageWidth,height:n.imageHeight}).show();var r={height:s};t(".jb-splash-background").css(r);juicebox_lib.jQuery("#"+e.config.containerid).css(r)},true);if(e.utils.is_iphone()){window.scrollTo(0,1)}};var v=function(){if(e.features.fullscreen.switched_2_fullscreen()||e.utils.is_new_expanded_window()){return false}return m()};var m=function(){var t=e.config.showsplashpage.toUpperCase();if(t==="NEVER"){return false}else{if(t==="ALWAYS"){return true}else{if(!e.utils.is_large_screen_mode(e.config)&&!e.isFullScreenMode()){return true}}}return false};return{setContext:o,getHtml:u,draw:c,setEvent:p,repaint:d,isNeeded:v,isSet:m,visible:h,need2PlayAudioAfterSplash:f,opendFromSplash:l}};juicebox_registered_components.hashstatus=function(){var e="expanded";var t,n,r=false;var i=juicebox_lib.jQuery;var s=function(e){t=e;n=t._};var o=function(){};var u=function(){if(!t.features.fullscreen.switched_2_fullscreen()&&t.instance_id>0){e="expand"+(t.instance_id+1)}};var a=function(){return e};var f=function(n){if(t.utils.need_new_window(t.config)){return}i(window).unbind("hashchange");if(c){window.clearTimeout(c)}c=window.setTimeout(function(){c=0;m()},100);var r=window.location.href.split("#");if(!n){if(r.length<=1){return}var s=r[1].replace(e,"").replace(/expand\d+/g,"");if(s==r[1]){return}window.location.href=r[0]+"#"+s;return}else{if(r.length==1){window.location.href=r[0]+"#"+e;return}var o=r[1].replace("expanded","").replace(e,"").replace(/expand\d+/g,"")+e;if(o==r[1]){return}window.location.href=r[0]+"#"+o;return}};var l=false;var c=0;var h=function(n){l=true;var r=window.location.href.split("#");var i="";if(r.length==2&&r[1].indexOf(e)>-1){i=e}var s=t.gallery_manager().get_image(n).original_position;return r[0]+"#"+(parseInt(s)+1)+i};var p=function(e){if(!t.config.enabledirectlinks){return}var n=window.location.href.split("#");var r=t.gallery_manager().get_image(e).original_position;if(n.length>=2&&r===parseInt(n[1])-1){return}i(window).unbind("hashchange");window.location.href=h(e);if(c){window.clearTimeout(c)}c=window.setTimeout(function(){c=0;m()},100)};var d=0;var v;var m=function(e){if(e){v=e}if(i.browser.msie&&i.browser.version<8){if(d){window.clearInterval(d)}d=0;if(!v){return}d=window.setInterval(function(){if(r||!v){return}v()},800)}else{i(window).bind("hashchange",function(){if(r||!v){return}v()})}};var g=function(e){r=!e};var y=function(){var n=window.location.href.split("#");var r=n.length>=2?parseInt(n[1])-1:-1;r=t.gallery_manager().get_current_position(r);if(r>=0&&r<t.gallery_manager().length()){}else{r=-1}return{hasExpHash:n.length==2&&n[1].indexOf(e)>=0,directPicIdx:r,hasSet:l,hasExpHashPrefix:n.length==2&&n[1].indexOf("expand")>=0}};return{setContext:s,setEvent:o,init:u,setExpanded:f,getUrlWithImageHash:h,setImageHash:p,setHashChangedEvent:m,getHashStatus:y,enableHashEvent:g,getExpendedHash:a}};juicebox_registered_components.backgroundimage=function(){var e,t;var n=function(n){e=n;t=e._};var r=0;var i=0;var s=function(){var n=e.correctPath(e.config.backgroundurl);t(".jb-panel-background").remove();if(!n){return""}if(e.features.fullscreen.switched_2_fullscreen()){r=e.features.fullscreen.getPersistor().parent_gallery_param.background_image_width;i=e.features.fullscreen.getPersistor().parent_gallery_param.background_image_height;var s=l(true);var o="";if(typeof s!="undefined"&&s){if(typeof s.imageTop!="undefined"){o+="top:"+s.imageTop+"px;"}if(typeof s.imageLeft!="undefined"){o+="left:"+s.imageLeft+"px;"}if(s.imageWidth){o+="width:"+s.imageWidth+"px;"}if(s.imageHeight){o+="height:"+s.imageHeight+"px;"}}return"<img class='jb-panel-background' src='"+n+"' style='position:absolute;"+o+"'/>"}else{var u=new Image;u.onload=function(){r=u.width;i=u.height;l();t(".jb-panel-background").attr("src",n).show()};u.src=n;return"<img class='jb-panel-background' style='display:none;position:absolute;'/>"}};var o=function(e){e.html(s());return true};var u=function(){t(".jb-bb-btn-de-show-list").click(a)};var a=function(){return false};var f=function(){};var l=function(n){if(!e.config.backgroundurl){return null}if(!r||!i){return null}var s={};var o=e.config.backgroundscale.toUpperCase();var u=t(".jb-panel-background");var a=e.glryHeight();var f=e.glryWidth();if(n){if(e.config.usefullscreenexpand&&e.utils.support_real_fullscreen&&screen.height&&screen.width){a=parseInt(screen.height);f=parseInt(screen.width)}else{a=$(window).height();f=$(window).width()}}if(o==="FILL"){s=e.sizing().get_image_display_size({width:r,height:i},f,a,e.config,"FILL",true);u.css({top:s.unadjtop,left:s.unadjleft,width:s.width,height:s.height})}else{if(o==="NONE"){}else{u.css({width:f,height:a});s={imageTop:0,imageLeft:0,imageWidth:f,imageHeight:a}}}return s};var c=function(){l()};var h=function(){return{width:r,height:i}};return{setContext:n,getHtml:s,draw:o,setEvent:u,init:f,repaint:c,getSizingInfo:h}};juicebox_registered_components.grytitle=function(){var e,t;var n=function(n){e=n;t=e._};var r=function(e){return e?"jb-idx-title":"jb-area-large-mode-title"};var i=function(t){if(!e.config.gallerytitle){return""}var n=e.config.gallerytitleposition.toUpperCase();if(n==="NONE"){return""}var i=e.utils.is_large_screen_mode(e.config);if(i&&t){return""}var s;var o=r(t);if(n!="TOP"&&!t){o+=" jb-classifier-show-on-over"}if(i||e.config.gallerytitle.indexOf("<")>-1){s=e.config.gallerytitle}else{s='<textarea rows="1" class="jb-idx-ssm-title-wrapper" readonly="true" style="background:transparent;border:none;overflow:hidden;resize: none;">'+e.config.gallerytitle+"</textarea>"}if(e.config.gallerytitleposition.toUpperCase()!="ABOVE_THUMBS"){return"<div class='"+o+"' style='position: absolute;display:none;'>"+s+"</div>"}return"<div class='"+o+"jb-classifier-layer' data-layer='600' style='position:absolute;display:none;z-index:600'>"+s+"</div>"};var s=function(e){e.html(i());return true};var o=function(){};var u=function(){};var a=function(t){f(t);if(e.config.galleryfontface){e._("."+r(true)+", ."+r()).css("font-family",e.config.galleryfontface)}};var f=function(n){var r=t(".jb-area-large-mode-title");var i;if(e.utils.is_large_screen_mode(e.config)){e.index_panel.display_gallery_top(false);if(e.config.gallerytitle){var s=e.config.showimageoverlay.toUpperCase();var o=e.config.gallerytitleposition.toUpperCase();if(e.config.textcolor){r.css({color:e.utils.format_color(e.config.textcolor)})}if(e.config.textshadowcolor){r.css({"text-shadow":e.utils.get_text_shadow_style(e.config.textshadowcolor,e.config.textshadowcolora,true)})}if(o=="TOP"){i=r.html(e.config.gallerytitle)}else{if(o==="ABOVE_THUMBS"){if(e.index_panel.is_visible()){i=r.html(e.config.gallerytitle).css({height:"auto",overflow:"visible","white-space":"normal"}).removeClass("jb-classifier-show-on-over")}else{r.hide()}}else{var u=t(".jb-area-large-mode-title.jb-classifier-show-on-over");if(e.config.showinfobutton&&!e.features.showinfo.visible()){i=null}else{if(e.isOverlayVisible()||s==="ALWAYS"){i=u.html(e.config.gallerytitle)}else{if(s==="NEVER"){u.html(e.config.gallerytitle).hide()}}}}}if(i){if(n){e.utils.fade_in(e.config,i,n,false,null,"title")}else{i.show()}}}}else{r.remove();if(e.index_panel.is_visible()){e.index_panel.display_gallery_top(e.index_panel.is_visible())}}};var l=function(n){var r=e.config.gallerytitleposition.toUpperCase();var i=e.glryStagPadding();var s=10+i;var o=10;var u=n?n:e.glrySizePosition();var a=s;var f=a,l=a;var c=e.config.gallerytitlehalign.toUpperCase();var h=true;var p=0;if(c==="RIGHT"){h=false}p=o+u.detail_panel_top;if(r==="TOP"){p=o+1+u.top_panel_top}else{if(r==="ABOVE_THUMBS"){var d=e.index_panel.get_show_area_position();var v=parseInt(e._(".jb-area-large-mode-title").css("font-size"));if(u.is_sideway_layout){p=parseInt(d.top-v-e.config.thumbpadding)}else{p=parseInt(u.index_panel_top-e.sizing().constTitleHeight4AboveThumbs+d.top)}if(p<0){p=0}if(c==="CENTER"){f=u.index_panel_left+e.config.thumbhseparation-e.config.thumbpadding+(u.index_panel_width-t(".jb-area-large-mode-title").width())/2;l="auto"}else{if(c==="RIGHT"){l=e.glryWidth()-u.index_panel_left-d.left-d.width;f="auto"}else{f=d.left+u.index_panel_left;l="auto"}}}}var m="auto";var g=e.config.buttonbarposition.toUpperCase();var y=g==="OVERLAY"&&r==="OVERLAY"||g==="TOP"&&r==="TOP"?true:false;if(e.utils.is_large_screen_mode(e.config)&&y){var b=e.config.buttonbarhalign.toUpperCase();var w=parseInt(t(".jb-bb-bar").parent().width());var E=e._(".jb-area-large-mode-title").width();var S=e.glryWidth()-2*e.config.stagepadding-w-30;var x=E>S-50;if(x){if(b==="LEFT"&&c==="RIGHT"||b==="RIGHT"&&c==="LEFT"){m=S;if(m<250){m=250}}}}var T=e.config.thumbsposition.toUpperCase();var N=r==="ABOVE_THUMBS"&&(T==="LEFT"||T==="RIGHT")?true:false;var C=t(".jb-area-large-mode-title a").length>0?600:200;var k;if(c==="CENTER"){if(N){if(r!="ABOVE_THUMBS"){f=i-parseInt(t(".jb-area-large-mode-title").css("padding-left"));l=i+(T==="RIGHT"?0:u.detail_panle_left)}else{if(r==="ABOVE_THUMBS"){}}}if(e.index_panel.is_visible()){k={left:f,top:p,right:l,height:"auto","text-align":"center",overflow:"visible","white-space":"normal","z-index":C}}else{k={left:f,top:p,right:l,height:"auto","text-align":"center",overflow:"hidden","white-space":"nowrap","z-index":C}}}else{if(h){if(N){if(T==="RIGHT"){if(r!="ABOVE_THUMBS"){f=u.index_panel_left}}}if(e.index_panel.is_visible()){k={left:f,right:"auto",height:"auto",width:m,top:p,"text-align":"left",overflow:"visible","white-space":"normal","z-index":C}}else{k={left:f,right:"auto",height:"auto",width:m,top:p,"text-align":"left",overflow:"hidden","white-space":"nowrap","z-index":C}}}else{if(N&&r!="ABOVE_THUMBS"){if(T==="LEFT"){l+=current_width-u.detail_panel_left}else{l-=10}}if(e.index_panel.is_visible()){k={left:"auto",right:l,top:p,height:"auto",width:m,"text-align":"right",overflow:"visible","white-space":"normal","z-index":C}}else{k={left:"auto",right:l,top:p,height:"auto",width:m,"text-align":"right",overflow:"hidden","white-space":"nowrap","z-index":C}}}}e._(".jb-area-large-mode-title").css(k)};return{setContext:n,getHtml:i,draw:s,setEvent:o,init:u,repaint:a,setPosition:l}};juicebox_registered_components.toppanel=function(e){var t=e;var n=function(e){t=e};var r=function(){if(!l()){return""}return"<div class='jb-panel-top' style='position:absolute;background-color:"+t.utils.format_color(t.config.topbackcolor)+(t.utils.is_earlier_ie()?";"+t.config.topbackopacity+";":"")+"'> </div>"};var i=function(e){e.html(r());return true};var s=function(e){t._(".jb-panel-top").css(e)};var o=function(){t._(".jb-bb-btn-de-show-list").click(u)};var u=function(){return false};var a=function(){};var f=function(){};var l=function(){if(!t.utils.is_large_screen_mode(t.config)){return false}var e=t.config.backbuttonposition.toUpperCase();if(t.config.gallerytitleposition.toUpperCase()==="TOP"||t.config.buttonbarposition.toUpperCase()==="TOP"||e==="TOP"){return true}return false};return{setContext:n,getHtml:r,draw:i,setEvent:o,init:a,repaint:f,isNeeded:l,setAreaStyle:s}};juicebox_registered_components.backbutton=function(){var e,t;var n=juicebox_lib.jQuery;var r=function(n){e=n;t=e._};var i=function(){if(e.config.backbuttonposition.toUpperCase()==="TOP"){return 6}return 10};var s=function(){if(!c()){return""}var t=e.config.backbuttonposition.toUpperCase();var n="";if(t==="OVERLAY"){n=" jb-classifier-show-on-over"}if(e.config.showsmallbackbutton){n+=" jb-classifier-detail-area"}if(e.config.backbuttonuseicon){n+=" jb-go-back-icon-frame"}return"<div class='jb-go-back jb-classifier-layer"+n+"' data-layer='600' style='position:absolute !important;z-index:600; top: "+i()+"px; left: 10px; display:none;"+(c()&&e.config.backbuttonuseicon?e.utils.get_button_bar_style(e.config,true):"")+"'>"+h()+"</div>"};var o=function(e){e.html(s());return true};var u=function(){t(".jb-bb-btn-de-show-list").click(a)};var a=function(){return false};var f=function(){};var l=function(n){if(!c()){return}e.utils.fade_in(e.config,t(".jb-go-back"),n,false,null,"backbtn")};var c=function(){if(e.config.showsmallbackbutton){return true}var t=e.config.backbuttonposition.toUpperCase();if(t==="TOP"||t==="OVERLAY"){return true}return false};var h=function(){if(!e.features.backbutton.isNeeded()){return""}var t;var r=e.config.backbuttonuseicon?"jb-go-back-icon":"";var i=e.config.backbuttonuseicon&&n.browser.msie&&n.browser.version<9?"&#xe014;":e.config.backbuttonuseicon?"":e.config.backbuttontext;var s=e.config.backbuttonuseicon?" title='"+e.config.languagelistall.gobk+"'":"";var o=n.browser.msie&&n.browser.version<8?"padding-top:"+parseInt(e.utils.get_button_bar_button_size(e.config).buttonWidth/4)+"px;":"";r+=e.config.backbuttonuseicon?" jb-go-back-icon":"";if(e.config.backbuttonurl){t="<a href='"+e.config.backbuttonurl+"'"+(e.config.showsmallbackbutton?" class='jb-classifier-show-on-over "+r+"'":"class='"+r+"'")+" style='"+o+(e.config.backbuttonuseicon?e.utils.get_button_bar_icon_style(e.config,true):"")+"'"+s+">"+i+"</a>"}else{t="<a href='#' onclick='history.back(); return false;'"+(e.config.showsmallbackbutton?" class='jb-classifier-show-on-over "+r+"'":"class='"+r+"'")+" style='"+o+(e.config.backbuttonuseicon?e.utils.get_button_bar_icon_style(e.config,true):"")+"'"+s+">"+i+"</a>"}return t};var p=function(){if(!e.features.backbutton.isNeeded()){t(".jb-go-back").remove();return}var n=i()+e.glryStagPadding();var r=e.glrySizePosition(true,true);var s=n;var o=e.config.backbuttonposition.toUpperCase()!="OVERLAY"?n:r.detail_panel_top+10;var u=e.config.backbuttonhalign.toUpperCase();var a;if(u==="CENTER"){a={top:o,left:s,right:s,"text-align":"center","z-index":550};if(e.config.backbuttonuseicon){a.left=parseInt((current_width-38)/2);a.right="auto";a.padding=0;a.width="auto"}}else{if(u==="RIGHT"){a={top:o,left:"auto",right:s,"z-index":650}}else{a={top:o,left:s,right:"auto","z-index":650}}}if(!e.config.showsmallbackbutton){t(".jb-go-back").html(h()).css(a).show()}else{t(".jb-go-back").html(h()).css(a)}if(e.config.textcolor){t(".jb-go-back a").css({color:e.utils.format_color(e.config.textcolor)})}if(e.config.textshadowcolor){t(".jb-go-back a").css({"text-shadow":e.utils.get_text_shadow_style(e.config.textshadowcolor,e.config.textshadowcolora,true)})}if(e.config.galleryfontface){t(".jb-go-back a").css("font-family",e.config.galleryfontface)}};return{setContext:r,getHtml:s,draw:o,setEvent:u,init:f,repaint:l,isNeeded:c,setPosition:p}};juicebox_registered_components.buttonbar=function(){var e=juicebox_lib.jQuery;var t,n;var r=function(e){t=e;n=t._};var i=function(){if(t.utils.is_large_screen_mode(t.config)){return""}return"<div class='jb-classifier-link-wrapper jb-classifier-thumb-area jb-classifier-layer' data-layer='3000' style='z-index:3000;right:10px;top:10px;'><div class='jb-bb-bar' style='"+t.utils.get_button_bar_style(t.config)+"'><div class='jb-bb-button jb-bb-btn-full-screen"+(t.features.fullscreen.switched_2_fullscreen()||t.utils.is_new_expanded_window()?" jb-bb-btn-de-full-screen":"")+"' title='"+(t.features.fullscreen.switched_2_fullscreen()||t.utils.is_new_expanded_window()?t.config.languagelistall.ef:t.config.languagelistall.gf)+"' style='"+t.utils.get_button_bar_icon_style(t.config)+"'>"+t.utils.add_font_icon_4_ie8(t.config,t.features.fullscreen.switched_2_fullscreen()||t.utils.is_new_expanded_window()?"&#xe006;":"&#xe005;",true)+"</div></div></div>"};var s=function(){var e=t.config.buttonbarposition.toUpperCase();if(e==="NONE"){return""}var n="",r="display:none;";if(e!="TOP"&&e!="OVERLAY_IMAGE"&&!t.config.showinfobutton){n="jb-classifier-show-on-over"}return"<div class='jb-classifier-link-wrapper jb-classifier-detail-area jb-classifier-layer "+n+"' data-layer='3000' style='z-index:3000;"+r+"'>"+(p()?"<div class='jb-bb-bar' style='"+t.utils.get_button_bar_style(t.config)+"background-color:"+t.utils.format_color(t.config.buttonbarbackcolor)+"'>"+u()+d("jb-bb-splitter-1")+a()+d("jb-bb-splitter-2")+f()+d("jb-bb-splitter-3")+l()+"</div>":"")+"</div>"};var o=function(e){e.html(s());return true};var u=function(){var e=t.features.fullscreen.getPersistor();return c("jb-bb-btn-de-show-list",t.config.languagelistall.st,t.utils.is_large_screen_mode(t.config)?"&#xe002;":"&#xe003;")+c("jb-bb-btn-open-url",t.config.languagelistall.oiinw,"&#xe004;")+c("jb-bb-btn-full-screen"+(e.is_full_screen||t.utils.is_new_expanded_window()?" jb-bb-btn-de-full-screen":""),e.is_full_screen||t.utils.is_new_expanded_window()?t.config.languagelistall.ef:t.config.languagelistall.gf,e.is_full_screen||t.utils.is_new_expanded_window()?"&#xe006;":"&#xe005;")};var a=function(){return c("jb-bb-btn-top-nav jb-bb-btn-top-nav-left",t.config.languagelistall.goprv,"&#xe007;")+c("jb-bb-btn-auto-play",t.config.languagelistall.strta,"&#xe009;")+c("jb-bb-btn-top-nav jb-bb-btn-top-nav-right",t.config.languagelistall.gonxt,"&#xe008;")};var f=function(){return c("jb-bb-btn-show-info",t.config.languagelistall.hdinfo,"&#xe00b;")+c("jb-bb-btn-audio",t.config.languagelistall.plya,"&#xe00c;")};var l=function(){return c("jb-bb-btn-fotomoto",t.config.languagelistall.fotomoto,"&#xe00e;",t.config.fotomotostoreid?false:true)+(t.config.sharefacebook?c("jb-bb-btn-facebook",t.config.languagelistall.facebook,"&#xe00f;"):"")+(t.config.sharetwitter?c("jb-bb-btn-twitter",t.config.languagelistall.twitter,"&#xe010;"):"")+(t.config.sharegplus?c("jb-bb-btn-gplus",t.config.languagelistall.gplus,"&#xe011;"):"")+(t.config.sharepinterest?c("jb-bb-btn-printerest",t.config.languagelistall.printerest,"&#xe012;"):"")+(t.config.sharetumblr?c("jb-bb-btn-tumblr",t.config.languagelistall.tumblr,"&#xe013;"):"")};var c=function(e,n,r,i){return"<div class='jb-bb-button "+e+"' title='"+n+"' style='"+t.utils.get_button_bar_icon_style(t.config)+(i?";display:none;":"")+"'>"+t.utils.add_font_icon_4_ie8(t.config,r,true)+"</div>"};var h=function(){t.utils.init_components(t.features,"audio");t.utils.setup_components_event(t.features,"showthumbsbutton,openurl,fullscreen,topnavleft,autoplay,topnavright,showinfo,audio,fotomoto,facebook,twitter,gplus,printerest,tumblr");if(t.config.buttonbariconhovercolor){var r="";var i=".jb-bb-button";if(t.features.backbutton.isNeeded()&&t.config.backbuttonuseicon){i+=", .jb-go-back-icon"}n(i).hover(function(){r=e(this).attr("style");e(this).css({color:t.utils.format_color(t.config.buttonbariconhovercolor)})},function(){if(e.browser.msie&&e.browser.version<10){e(this).css({color:t.utils.format_color(t.config.buttonbariconcolor)})}else{e(this).attr("style",r)}})}n(".jb-bb-btn-top-nav.jb-bb-btn-top-nav-left").click(function(){t.features.autoplay.stop();return t.previousImage(0)});n(".jb-bb-btn-top-nav.jb-bb-btn-top-nav-right").click(function(){t.features.autoplay.stop();return t.nextImage(0)})};var p=function(){if(t.config.buttonbarposition.toUpperCase()==="NONE"){return false}return true};var d=function(e){var n=0;var r="";if(t.config.buttonbariconrealsize&&parseInt(t.config.buttonbariconrealsize)){n=parseInt(t.config.buttonbariconrealsize)}if(t.config.buttonbariconcolor){r="border-color:"+t.config.buttonbariconcolor+";"}var i=parseInt(n/2)-1;return"<div class='jb-bb-splitter "+e+"' style='"+(n?"height:"+n+"px;margin:"+i+"px 2px "+i+"px 2px;":"")+r+"'></div>"};var v=function(){};var m=function(e){if(e){if(t.config.showimageoverlay.toUpperCase()==="NEVER"){return}var r=n(".jb-classifier-link-wrapper.jb-classifier-detail-area");t.utils.fade_in(t.config,r,e,false,null,"btnbar")}else{b()}};var g=function(){var e=b(true);var n=t.utils.get_button_bar_button_size(t.config);return n.buttonWidth*e.detailButtonCount+n.padding+4*e.separatorCount};var y=function(){return b(true)};var b=function(e){var r=false;var i=false;var s=0;var o=0;var u=false;var a=false;var f=false;var l=false;if(!t.features.showthumbsbutton.isVisible()){n(".jb-bb-btn-de-show-list").hide()}else{i=true;u=true;s++}if(!t.config.showcaption){n(".jb-caption").hide()}if(!t.config.showopenbutton){n(".jb-bb-btn-open-url").hide()}else{i=true;u=true;s++}if(!t.config.showautoplaybutton){n(".jb-bb-btn-auto-play").hide()}else{i=true;a=true;s++}if(!E()){n(".jb-bb-btn-audio").hide()}else{i=true;f=true;s++}if(!w()){n(".jb-bb-btn-full-screen").hide()}else{u=true;if(t.index_panel.is_visible()&&!t.utils.is_large_screen_mode(t.config)){r=true;o++}else{i=true;s++}}if(!t.config.showinfobutton){n(".jb-bb-btn-show-info").hide()}else{i=true;f=true;s++}if(!t.config.shownavbuttons){n(".jb-bb-btn-top-nav").hide()}else{i=true;a=true;s+=2}if(!t.features.fotomoto.isVisible()){if(!e){var c=n(".jb-bb-btn-fotomoto").is(":visible");n(".jb-bb-btn-fotomoto").hide();if(c){S()}}}else{if(!e&&!n(".jb-bb-btn-fotomoto").is(":visible")){n(".jb-bb-btn-fotomoto").show();S()}i=true;l=true;s++}if(!t.config.sharefacebook){n(".jb-bb-btn-facebook").hide()}else{i=true;l=true;s++}if(!t.config.sharetwitter){n(".jb-bb-btn-twitter").hide()}else{i=true;l=true;s++}if(!t.config.sharegplus){n(".jb-bb-btn-gplus").hide()}else{i=true;l=true;s++}if(!t.config.sharepinterest){n(".jb-bb-btn-printerest").hide()}else{i=true;l=true;s++}if(!t.config.sharetumblr){n(".jb-bb-btn-tumblr").hide()}else{i=true;l=true;s++}var h=0;if(u&&a){n(".jb-bb-splitter-1").show();h++}else{n(".jb-bb-splitter-1").hide()}if(f&&(a||u)){n(".jb-bb-splitter-2").show();h++}else{n(".jb-bb-splitter-2").hide()}if(l&&(f||a||u)){n(".jb-bb-splitter-3").show();h++}else{n(".jb-bb-splitter-3").hide()}if(e){return{detailButtonCount:s,indexButtonCount:o,separatorCount:h}}var p=t.config.showimageoverlay.toUpperCase();var d=t.config.buttonbarposition.toUpperCase();if(d==="NONE"){n(".jb-classifier-link-wrapper.jb-classifier-detail-area").remove()}else{if(t.config.showinfobutton||t.isOverlayVisible()||d==="TOP"||p==="ALWAYS"){if(t.detail_panel.is_visible()&&d!="OVERLAY_IMAGE"){n(".jb-classifier-link-wrapper.jb-classifier-detail-area").show()}}else{n(".jb-classifier-link-wrapper.jb-classifier-detail-area").hide()}}if(i){n(".jb-classifier-link-wrapper.jb-classifier-detail-area .jb-bb-bar").show()}else{n(".jb-classifier-link-wrapper.jb-classifier-detail-area .jb-bb-bar").hide()}if(!r){n(".jb-classifier-link-wrapper.jb-classifier-thumb-area").hide()}else{n(".jb-classifier-link-wrapper.jb-classifier-thumb-area").show()}return null};var w=function(){if(!t.utils.is_in_iframe()&&t.config.usefullscreenexpand&&t.utils.exit_support_real_fullscreen()){return true}if(!t.utils.is_in_iframe()&&(t.features.fullscreen.switched_2_fullscreen()||t.utils.is_new_expanded_window())){return true}if(t.config.showexpandbutton&&!t.isFullScreenMode()&&!t.utils.is_in_iframe()){return true}return false};var E=function(){if(!t.config.showaudiobutton||t.utils.is_earlier_ie()){return false}return true};var S=function(){var r=t.config.buttonbarposition.toUpperCase();if(r!="OVERLAY_IMAGE"&&r!="NONE"){var i,s=t.config.buttonbarhalign.toUpperCase();var o=0;var u=r==t.config.backbuttonposition.toUpperCase()||!t.utils.is_large_screen_mode(t.config)&&t.config.showsmallbackbutton;if(t.detail_panel.is_visible()&&t.features.backbutton.isNeeded()&&u){var a=t.config.backbuttonhalign.toUpperCase();if(a==="LEFT"&&s=="RIGHT"||a==="RIGHT"&&s=="LEFT"){o=e(".jb-go-back").width()+20}}var f=false;var l=t.glrySizePosition();var c=10;var h=t.glryStagPadding();var p=h;i=g();if(s==="CENTER"){f=true;p=parseInt((t.glryWidth()-i)/2)}else{if(s==="LEFT"){f=true}}var d=c+l.detail_panel_top;if(r==="TOP"){d=c-4+l.top_panel_top}i+=30;if(i>t.glryWidth()-2*t.config.stagepadding-o-20){i=t.glryWidth()-2*t.config.stagepadding-o}var v=i+"";var m=v[v.length-1];if(i>17*t.config.buttonbariconsize){if(m==="8"||m==="9"||m==="0"||m==="1"||m==="2"){i-=5}}else{if(i>10*t.config.buttonbariconsize){if(m==="3"||m==="4"||m==="5"||m==="6"||m==="7"){i-=5}}else{if(i>102){if(m==="2"||m==="1"||m==="0"||m==="9"||m==="8"){i-=5}}}}if(f){n(".jb-classifier-link-wrapper.jb-classifier-detail-area").css({left:p,top:d,width:i})}else{n(".jb-classifier-link-wrapper.jb-classifier-detail-area").css({right:p,top:d,width:i})}}};return{setContext:r,getHtml:s,draw:o,setEvent:h,init:v,repaint:m,setPosition:S,getVisibleBtnCount:y,getButtonbarWidth:g,getHtml4IndexPage:i}};juicebox_registered_components.imagenav=function(){var e,t;var n=juicebox_lib.jQuery;var r=function(n){e=n;t=e._};var i=function(t){if(!f()){return""}var n=t?"left":"right";return"<div class='jbn-nav-button jb-classifier-show-on-over jb-classifier-layer' data-layer='1000' style='z-index:1000;position:absolute;"+n+":"+(e.glryStagPadding()+10)+"px;"+e.utils.get_nav_btn_size_style(e.config,false)+"'><div class='jbn-"+n+"-button jbn-nav-button-icon' style='display:none;"+e.utils.get_nav_icon_style(e.config)+"'>"+e.utils.add_font_icon_4_ie8(e.config,t?"&#xe000;":"&#xe001;")+"</div></div>"};var s=function(e){e.html(i());return true};var o=function(){};var u=function(){};var a=function(n){var r=e.sizing();var i=parseInt(e.config.navbuttoniconrealsize);if(!i){i=18}var s=e.utils.get_nav_btn_size(e.config);var o=s/2;if(e.config.imagenavposition.toUpperCase()!="IMAGE"){e._(".jb-navigation.jb-classifier-detail-area .jbn-nav-button").css("top",parseInt(n.detail_panel_height/2-o)+"px")}var u=e.config.thumbnavposition.toUpperCase();var a=!n.is_sideway_layout&&e.config.gallerytitleposition.toUpperCase()==="ABOVE_THUMBS"&&u!="BOTTOM"?r.constTitleHeight4AboveThumbs:0;if(e.utils.is_large_screen_mode(e.config)){var f=e.index_panel.get_thumb_height()/2-o;var l=e.index_panel.get_show_area_position();var c=e.glryStagPadding();var h=e.config.captionposition.toUpperCase();if(u==="BOTTOM"){var p=l.top+e.index_panel.get_thumb_height();if(h==="BELOW_THUMBS"){f=p+parseInt((n.caption_panel_top-p-i-e.config.thumbpadding)/2)}else{f=p+r.padding_bottom_index_nav(e.config)}var d=p+parseInt((n.index_panel_height-e.index_panel.get_thumb_height())/2)-o;if(f<p){f=p}if(n.is_sideway_layout&&e.config.showpagingtext){if(f+2*e.config.thumbpadding<d){f+=e.config.thumbpadding}}if(f>d){f=d}}else{if(n.is_sideway_layout){f=(e.glryHeight()-n.top_panel_height-2*c-(h==="BOTTOM"?n.caption_panel_height:0))/2-o+(h==="BOTTOM"?c:0);var v=e.config.thumbsvalign.toUpperCase();if(v==="TOP"||v==="BOTTOM"){f=l.top+parseInt((e.index_panel.get_thumb_height()-s+e.config.thumbpadding)/2)}}}if(e.config.usethumbdots){var m=e.config.thumbnavposition.toUpperCase();if(e.config.showpagingtext&&m==="BOTTOM"){a+=10}if(f<0){a+=7+(i<=20?(22-i)/2:0)}if(!e.config_manager.isp){a+=11}}else{}t(".jb-navigation.jb-classifier-thumb-area .jbn-nav-button").css("top",parseInt(f+a)+"px")}else{t(".jb-navigation.jb-classifier-thumb-area .jbn-nav-button").css("top",parseInt(n.index_panel_height/2-o+a)+"px")}};var f=function(){if(e.utils.is_large_screen_mode(e.config)){return true}if(!e.config.showimagenav){return false}return true};var l=function(r){if(!e.detail_panel.isImageShowed()&&e.config.imagenavposition.toUpperCase()==="IMAGE"){return}var i=!e.config.showimagenav||e.config.showimageoverlay.toUpperCase()==="NEVER"&&!(e.config.showinfobutton&&e.features.showinfo.visible())?true:false;var s=t(".jb-classifier-detail-area .jbn-left-button");var o=t(".jb-classifier-detail-area .jbn-nav-left-touch-area");var u=t(".jb-bb-button.jb-bb-btn-top-nav.jb-bb-btn-top-nav-left");if(i){s.hide()}else{if(!e.canImageMove()){s.hide();if(!e.utils.is_large_screen_mode(e.config)){window.setTimeout(function(){s.hide()},50)}u.css({opacity:.5});o.addClass("dt-nav-disabled")}else{if(!r){if(!i){if(e.utils.is_earlier_ie()&&e.config.navbuttoniconopacity){s.show().css({filter:e.config.navbuttonbackcoloropacity.replace("filter:","")})}else{s.show().css({opacity:1})}}}else{if(n.browser.msie||document.msFullscreenEnabled){s.fadeOut();window.setTimeout(function(){s.fadeIn(r)},100)}else{s.fadeIn(r)}}u.css({opacity:1});o.removeClass("dt-nav-disabled")}}var a=t(".jb-classifier-detail-area .jbn-right-button");var f=t(".jb-classifier-detail-area .jbn-nav-right-touch-area");var l=t(".jb-bb-button.jb-bb-btn-top-nav.jb-bb-btn-top-nav-right");if(i){a.hide()}else{if(!e.canImageMove(true)){a.hide();if(!e.utils.is_large_screen_mode(e.config)){window.setTimeout(function(){a.hide()},50)}l.css({opacity:.5});f.addClass("dt-nav-disabled")}else{if(!r){if(!i){a.show().css({opacity:1})}}else{e.utils.fade_in(e.config,a,r,false,null,"imgnavs")}l.css({opacity:1});f.removeClass("dt-nav-disabled")}}};return{setContext:r,getHtml:i,draw:s,setEvent:o,init:u,repaint:l,setPosition:a,isNeeded:f}};juicebox_registered_components.indexnav=function(){var e,t;var n=function(n){e=n;t=e._};var r=function(){return""};var i=function(e){e.html(r());return true};var s=function(){};var o=function(){};var u=function(n){var r=e.utils.is_large_screen_mode(e.config);var i=t(".jb-classifier-thumb-area .jbn-left-button");if(!r&&!e.config.showsmallthumbnav){i.hide()}else{if(!e.canPageMove()){i.hide();if(!e.utils.is_large_screen_mode(e.config)){window.setTimeout(function(){i.hide()},50)}}else{if(!n){i.show()}else{i.fadeIn(n)}}}var s=t(".jb-classifier-thumb-area .jbn-right-button");if(!r&&!e.config.showsmallthumbnav){s.hide()}else{if(!e.canPageMove(true)){s.hide();if(!e.utils.is_large_screen_mode(e.config)){window.setTimeout(function(){s.hide()},50)}}else{if(!n){s.show()}else{e.utils.fade_in(e.config,s,n,false,null,"idxnavs")}}}};var a=function(n){var r=e.index_panel.get_thumblist_size();var i=e.utils.get_nav_btn_size(e.config);var s=parseInt((n.index_panel_width-r.width)/2-i-i/3);if(i/3>10&&s<5){s=5}var o=n.index_panel_width-r.width-2*i;if(e.utils.is_large_screen_mode(e.config)){if(e.config.thumbnavposition.toUpperCase()==="BOTTOM"){s=parseInt((n.index_panel_width-r.width)/2+(e.config.thumbwidth-i+e.config.thumbpadding)/2);if(parseInt(e.config.maxthumbcolumns)<=1){s-=parseInt(e.config.thumbwidth/2-12)}}if(e.config.thumbnavposition.toUpperCase()==="BOTTOM"&&e.config.usethumbdots){if(e.config.maxthumbcolumns<=4){s-=11}else{s-=3}}}var u=e.config.thumbshalign.toUpperCase();var a=5;if(u==="LEFT"){t(".index-navigation .jbn-left-button").css("left",a+"px");t(".index-navigation .jbn-right-button").css("right",o-a+"px")}else{if(u==="RIGHT"){t(".index-navigation .jbn-left-button").css("left",o-a+"px");t(".index-navigation .jbn-right-button").css("right",a+"px")}else{t(".index-navigation .jbn-left-button").css("left",s+"px");t(".index-navigation .jbn-right-button").css("right",s+"px")}}};return{setContext:n,getHtml:r,draw:i,setEvent:s,init:o,repaint:u,setPosition:a}};juicebox_registered_components.showthumbsbutton=function(e){var t=e;var n=null;var r=false;var i=false;var s=function(e){t=e;n=t._};var o=function(){n(".jb-bb-btn-de-show-list").click(function(){return u()})};var u=function(e){var n=function(){a()};if(!t.utils.is_large_screen_mode(t.config)){if(t.config_manager.isp&&juicebox_instances[t.instance_id]&&typeof juicebox_instances[t.instance_id].onShowThumbs==="function"){juicebox_instances[t.instance_id].onShowThumbs(true)}n();return false}return f(e)};var a=function(e){t.features.autoplay.stop();var r=e?e:0;if(t.detail_panel.get_photo_position()>0){r=t.detail_panel.get_photo_position()}if(t.index_panel.is_visible()&&t.detail_panel.is_visible()){t.redrawIndexPanel(r);return false}t.detail_panel.set_visible_flag(false);t.index_panel.set_visible_flag(true);var s=n(" .jb-panel-detail, .jb-area-caption");if(s.is(":visible")){i=true;var o=n(" .jb-panel-detail img");if(o.length>0){o.fadeOut(250)}if(t.utils.is_android()){s.fadeOut(250);window.setTimeout(function(){n(" .jb-classifier-detail-area, .jb-area-caption").hide();n(".jb-classifier-thumb-area").show().fadeIn(200);t.redrawIndexPanel(r);i=false},250)}else{s.fadeOut(250);window.setTimeout(function(){n(" .jb-classifier-detail-area, .jb-area-caption").hide();n(".jb-classifier-thumb-area").show().fadeIn(200);t.redrawIndexPanel(r);i=false},250)}}else{t.redrawIndexPanel()}if(t.config.enabledirectlinks){var u=t.features.hashstatus.getExpendedHash();var a=window.location.href.split("#");var f="";if(a.length==2&&a[1].indexOf(u)>=0){f=u}window.location.href=window.location.href.split("#")[0]+"#"+f}return false};var f=function(e,i,s){var o,u;var a=n(".jb-panel-index");if(typeof i=="boolean"){r=i}else{r=!r}a.stop();if(r){var f=function(){t.index_panel.set_visible_flag(false);a.hide();t.features.grytitle.setPosition();t.features.buttonbar.setPosition();if(!s){t.glryRepaint(true,false,true)}};if(!e){var l=parseInt(a.height());var c=parseInt(a.width());u=t.config.thumbsposition.toUpperCase();n(".jb-panel-index .jb-area-large-mode-title").css({overflow:"hidden","white-space":"nowrap"});if(u==="TOP"){a.animate({top:"-="+l,height:"-="+l,avoidTransforms:true},500,"easeInOutQuart",f)}else{if(u==="LEFT"){n(".index-navigation .jbn-nav-button").hide();a.animate({left:"-="+c,width:"-="+c,avoidTransforms:true},500,"easeInOutQuart",f)}else{if(u==="RIGHT"){n(".index-navigation .jbn-nav-button").hide();a.animate({left:"+="+c,width:"-="+c,avoidTransforms:true},500,"easeInOutQuart",f)}else{a.animate({top:"+="+l,height:"-="+l,avoidTransforms:true},500,"easeInOutQuart",f)}}}}else{f()}}else{o=t.glrySizePosition(true,true);t.glryRepaint(true,true,true);u=t.config.thumbsposition.toUpperCase();var h=o.index_panel_top;var p=o.index_panel_left;var d=o.index_panel_height;var v=o.index_panel_width;if(u==="TOP"){d=0;h=o.index_panel_top-o.index_panel_height}else{if(u==="LEFT"){v=0;p=o.index_panel_left-o.index_panel_width}else{if(u==="RIGHT"){v=0;p=o.index_panel_left+o.index_panel_width}else{d=0;h=o.index_panel_top+o.index_panel_height}}}a.css({top:h,height:d,left:p,width:v});a.show();if(n(".jb-idx-show-area table").length<=0){t.index_panel.show_current_page()}n(".jb-panel-index .jb-area-caption").show();if(t.config.gallerytitleposition.toUpperCase()==="ABOVE_THUMBS"){n(".jb-panel-index .jb-area-large-mode-title").show()}var m=function(){t.index_panel.set_visible_flag(true);a.hide();if(!s){t.glryRepaint(true,false,true)}};if(!e){n(".jb-panel-index .jb-area-large-mode-title").css({overflow:"hidden","white-space":"nowrap"});if(u==="TOP"){a.animate({top:"-="+ -o.index_panel_height,height:"+="+o.index_panel_height,avoidTransforms:true},500,"easeInOutQuart",m)}else{if(u==="LEFT"){a.animate({left:"+="+o.index_panel_width,width:"+="+o.index_panel_width,avoidTransforms:true},500,"easeInOutQuart",m)}else{if(u==="RIGHT"){a.animate({left:"-="+o.index_panel_width,width:"+="+o.index_panel_width,avoidTransforms:true},500,"easeInOutQuart",m)}else{a.animate({top:"+="+ -o.index_panel_height,height:"+="+o.index_panel_height,avoidTransforms:true},500,"easeInOutQuart",m)}}}}else{m()}}if(t.config_manager.isp&&juicebox_instances[t.instance_id]&&typeof juicebox_instances[t.instance_id].onShowThumbs==="function"){juicebox_instances[t.instance_id].onShowThumbs(!r)}if(t.utils.is_touchable_desktop()){t.features.touchevent.setTransitioning(true);window.setTimeout(function(){t.features.touchevent.setTransitioning(false)},50)}return false};var l=function(){};var c=function(){return r};var h=function(e){r=!e};var p=function(){return i};var d=function(){if(!t.config.showsmallthumbsbutton||!t.config.showthumbsbutton||!t.utils.is_large_screen_mode(t.config)&&t.index_panel.is_visible()){return false}if(!t.config.showsmallthumbsbutton||!t.config.showthumbsbutton&&t.utils.is_large_screen_mode(t.config)){return false}return true};var v=function(){var e=n(".jb-bb-btn-de-show-list");if(t.utils.is_large_screen_mode(t.config)){if(t.index_panel.is_visible()){e.attr("title",t.config.languagelistall.htlsm)}else{e.attr("title",t.config.languagelistall.stlsm)}}else{e.attr("title",t.config.languagelistall.st);if(d()){e.show()}else{e.hide();if(n(".jb-bb-bar>div:visible").length<=0&&t.isFullScreenMode()){n(".jb-bb-bar").hide()}}if(t.detail_panel.is_visible()){t.index_panel.display_gallery_top(false)}else{}}};return{setContext:s,setEvent:o,init:l,isThumbsHidden:c,switch2Thumbnails:a,isSwitching:p,toggle_index_panel_4_lsm:f,setIndexVisibleFlag:h,repaint:v,indexButtonClicked:u,isVisible:d}};juicebox_registered_components.openurl=function(){var e,t;var n=function(n){e=n;t=e._};var r=function(){e._(".jb-bb-btn-open-url").click(i)};var i=function(){var t=e.detail_panel.get_current_photo();if(e.config.useflickr){if(t.imageFullURL){window.open(t.imageFullURL);return false}}var n;if(t.linkURL){n=t.linkURL}else{n=t.imageURL;if(t.largeImageURL){n=t.largeImageURL}}var r=t.linkTarget?t.linkTarget.toLowerCase():"";if(r==="_self"){window.location.href=n}else{window.open(n,r)}return false};var s=function(){};var o=function(){};return{setContext:n,setEvent:r,init:s,repaint:o,open_url:i}};juicebox_registered_components.fullscreen=function(){var e,t,n;var r=juicebox_lib.jQuery;var i=null;var s=function(r){e=r;t=e._;var i=e.config;n={parent_gallery_param:i.persistor_param,is_full_screen:i.fullscreen_displaying_mode?true:false,parent_gallery:i.parent_gallery,initial_body_css_inline_style:i.initial_body_css_inline_style?i.initial_body_css_inline_style:"",scroll_position:i.scroll_position?i.scroll_position:{},initial_height:0,initial_width:0}};var o=function(){t(".jb-bb-btn-full-screen").click(f)};var u=function(){i=new juicebox_gallery_dialog({jquery:r})};var a=function(){};var f=function(){if(navigator.userAgent.match(/Safari/i)){l()}else{return l()}return false};var l=function(){if(!n.is_full_screen){if(e.utils.is_new_expanded_window()){window.history.back();return false}if(e.config_manager.isp&&juicebox_instances[e.instance_id]&&typeof juicebox_instances[e.instance_id].onExpand==="function"){juicebox_instances[e.instance_id].onExpand(true)}e.features.hashstatus.enableHashEvent(false);e.features.hashstatus.setExpanded(true);if(!e.utils.is_in_iframe()&&e.utils.need_new_window(e.config)){var s;if(r.browser.msie&&r.browser.version<8&&r.browser.version>=7){s={configurl:e.utils.convert_to_absolute_path(e.correctPath(e.config.configurl)),themeurl:e.utils.convert_to_absolute_path(e.config.themeurl),hide_thumbnails_in_lsm:e.features.showthumbsbutton.isThumbsHidden(),backgroundurl:e.utils.convert_to_absolute_path(e.correctPath(e.config.backgroundurl)),firstimageindex:e.detail_panel.get_current_photo()?e.detail_panel.get_current_photo().position+1:0,baseurl:e.utils.convert_to_absolute_path(e.config.baseurl)}}else{if(e.features.splash.isNeeded()){e.detail_panel.set_visible_flag(true);e.index_panel.set_visible_flag(false)}s={showsplashpage:"NEVER",configurl:e.utils.convert_to_absolute_path(e.correctPath(e.config.configurl)),themeurl:e.utils.convert_to_absolute_path(e.config.themeurl),baseurl:e.utils.convert_to_absolute_path(e.config.baseurl),backbuttonurl:e.utils.convert_to_absolute_path(e.config.backbuttonurl),audiourlmp3:e.config.audiourlmp3?e.utils.convert_to_absolute_path(e.config.audiourlmp3):"",audiourlogg:e.config.audiourlogg?e.utils.convert_to_absolute_path(e.config.audiourlogg):"",backgroundurl:e.utils.convert_to_absolute_path(e.correctPath(e.config.backgroundurl)),firstimageindex:e.detail_panel.get_current_photo()?e.detail_panel.get_current_photo().position+1:0,hide_thumbnails_in_lsm:e.features.showthumbsbutton.isThumbsHidden(),is_detail_visible:e.detail_panel.is_visible(),is_index_visible:e.index_panel.is_visible(),maxthumbcolumns:e.config.maxthumbcolumns,maxthumbrows:e.config.maxthumbrows,languagelist:e.config.languagelistbak,pageTitle:e.config.gallerytitle?e.config.gallerytitle:r("head > title").text()}}e.config_manager.get_cookie_manager().saveConfig({skip:"gallerywidth,galleryheight,containerid,enabledirectlinks,usefullscreenexpand,expandinnewpage,languagelistall,splashtitle,splashimageurl,splashshowimagecount,gallerydescription,thumb_load_placeholder,main_load_placeholder,showthumbsonload",config:s});if(e.features.audio.isPlaying()){e.features.audio.toggleAudioPlay()}document.location.href=e.utils.get_js_folder_url()+"full.html";return false}var o=e.utils.get_viewport_meta_content();e.utils.set_viewport_meta(true);var u=r.extend({},e.config);var a=e.getIgnoredOptions4New().split(",");for(var f=0;f<a.length;f++){if(a[f].length<=0){continue}delete u[a[f]]}u.containerid=i.get_id();u.parent_gallery=juicebox_instances[e.instance_id];u.gallerywidth="100%";u.galleryheight="100%";u.fullscreen_displaying_mode=true;u.parent_gallery=juicebox_instances[e.instance_id];u.initial_body_css_inline_style=r("body").attr("style");u.scroll_position={};u.scroll_position.scrollTop=r(window).scrollTop();u.scroll_position.scrollLeft=r(window).scrollLeft();window.scroll(0,0);u.persistor_param={};u.persistor_param.viewportContent=o;var l=r(window);var c=e.utils.is_large_screen_mode(e.config);u.persistor_param.max_side_length=Math.max(l.width(),l.height());u.persistor_param.restore_viewport=function(t,n){e.utils.set_viewport_value(t,n)};u.persistor_param.is_index_visible=e.features.splash.isSet()?false:e.index_panel.is_visible();u.persistor_param.is_detail_visible=e.features.splash.isSet()?true:e.detail_panel.is_visible();u.persistor_param.current_image_index=e.detail_panel.get_photo_position();u.persistor_param.restore_image=function(t){e.setImageEventIndex(t+1);if(c){e.showImage(t)}else{e.switch2Main(t)}};u.persistor_param.restore_index=c?e.redrawIndexPanel:e.features.showthumbsbutton.switch2Thumbnails;u.persistor_param.splash_is_set=e.features.splash.isSet();u.persistor_param.background_image_width=e.features.backgroundimage.getSizingInfo().width;u.persistor_param.background_image_height=e.features.backgroundimage.getSizingInfo().height;u.persistor_param.gallery_manager=e.gallery_manager;u.persistor_param.hide_thumbnails_in_lsm=e.features.showthumbsbutton.isThumbsHidden();u.persistor_param.last_image_event_index=(e.detail_panel.get_current_photo()?e.detail_panel.get_current_photo().position:0)+1;u.persistor_param.overlay_info_visible=e.features.showinfo.visible();u.persistor_param.openedFromSplash=e.features.splash.opendFromSplash;if(e.features.audio.isNeeded()){u.persistor_param.is_audio_playing=e.features.audio.isPlaying();u.persistor_param.parent_toggle_audio_play=e.features.audio.toggleAudioPlay;u.persistor_param.need2PlayAudioAfterSplash=e.features.splash.need2PlayAudioAfterSplash;u.persistor_param.stopAudioPlay=e.features.audio.stop}u.persistor_param.parent_set_info_visible=e.features.showinfo.showInfoCtrls;u.persistor_param.different_size_images_in_config=e.hasMultipleSizeImages;var h=e.features.autoplay.isPlaying();e.features.autoplay.stop(false,true);u.persistor_param.is_autoplaying=h;u.persistor_param.restore_autoplay=function(t){if(t!=e.features.autoplay.isPlaying()){e.features.autoplay.toggleAutoPlay(false,true)}};if(!(e.utils.is_swipable_device()||e.config.forcetouchmode||e.config.showinfobutton)){e.setOverlay(false,0)}r("body").css({overflow:"hidden"});var p=c?false:true;if(e.config.backgroundopacity===1||e.config.backgroundopacity==="1"||typeof e.config.backgroundopacity==="string"&&e.config.backgroundopacity.indexOf("filter")===0&&e.config.backgroundopacity.indexOf("100")>0){p=true}else{u.persistor_param.restore_zindex=function(){t("").show();t("").focus()};t("").hide()}i.fadein_dialog(false,e.config.backgroundcolor,300,function(){e.setExtendedGlry(new juicebox(u))});if(e.config.usefullscreenexpand){e.utils.show_real_fullscreen("jb-glry-dlg")}}else{var v=r(window);if(e.utils.need_viewport_meta()){if(n.parent_gallery_param.viewportContent){e.utils.set_viewport_meta_content(n.parent_gallery_param.viewportContent)}else{if(e.utils.is_android()&&e.utils.get_android_ver()>=4){n.parent_gallery_param.restore_viewport(320,true)}else{if(e.utils.is_iphone()){n.parent_gallery_param.restore_viewport(.4,true)}else{if(e.utils.is_ipad()){}else{n.parent_gallery_param.restore_viewport(160*n.parent_gallery_param.max_side_length/Math.max(v.width(),v.height()),true)}}}}}if(!n.parent_gallery_param.splash_is_set){n.parent_gallery_param.parent_set_info_visible(e.features.showinfo.visible());var m=e.detail_panel.get_photo_position();if(e.detail_panel.is_visible()){n.parent_gallery_param.restore_image(m)}if(e.index_panel.is_visible()){n.parent_gallery_param.restore_index(m)}}window.setTimeout(function(){r("body").css({overflow:"auto"});window.setTimeout(function(){if(juicebox_instances.length>1){n.initial_body_css_inline_style=n.initial_body_css_inline_style.replace(/ /g,"").replace("overflow:hidden;")}r("body").attr("style",n.initial_body_css_inline_style);window.setTimeout(function(){window.scroll(n.scroll_position.scrollLeft,n.scroll_position.scrollTop)},100)},100)},100);if(n.parent_gallery_param.restore_zindex){n.parent_gallery_param.restore_zindex()}var g=function(){i.cleanup_dialog();e.unbindResize();n.parent_gallery.restore(e.features.showthumbsbutton.isThumbsHidden(),e.isOverlayVisible())};if(e.config.usefullscreenexpand||e.config.autofullscreenexpand){e.utils.exit_fullscreen()}var y=e.features.autoplay.isPlaying();g();if(e.features.fullscreen.switched_2_fullscreen()){if(e.features.fullscreen.getPersistor().parent_gallery_param.openedFromSplash()){if(e.features.fullscreen.getPersistor().parent_gallery_param.stopAudioPlay){e.features.fullscreen.getPersistor().parent_gallery_param.stopAudioPlay()}y=e.config.autoplayonload?true:false}}n.parent_gallery_param.restore_autoplay(y);e.features.hashstatus.enableHashEvent(false);if(!e.features.splash.isSet()){n.parent_gallery.sendMessage()}}return false};var c=function(){return n.is_full_screen};var h=function(){return n.is_full_screen?n.parent_gallery:null};var p=function(){return n};return{setContext:s,setEvent:o,init:u,repaint:a,switched_2_fullscreen:c,full_screen:f,parentGallery:h,getPersistor:p}};juicebox_registered_components.autoplay=function(){var e,t,n=0,r;var i=function(n){e=n;t=e._;r=1e3*e.config.imagetransitiontime};var s=function(){return"<div class='' title='"+e.config.languagelistall.st+"' style='"+e.utils.get_button_bar_icon_style(config)+"'>"+e.utils.add_font_icon_4_ie8(config,utils.is_large_screen_mode(config)?"&#xe002;":"&#xe003;",true)+"</div>"};var o=function(t){if(!e.config.showthumbsbutton){return false}if(!e.allowDisplay()){return false}t.html(s());return true};var u=function(){t(".jb-bb-btn-auto-play").click(function(){l();return false})};var a=function(){};var f=function(){};var l=function(t,r){if(!e.config.showautoplaybutton&&!e.config.enableautoplay&&!e.config.autoplayonload){return false}if(n){window.clearInterval(n);n=0;c(r);return false}if(e.detail_panel.is_visible()){if(e.config.gonextonautoplay&&!t){e.nextImage(0)}else{}}p();c(r);return false};var c=function(i){var s=e.config.languagelistall.aon;if(n){t(".jb-bb-btn-auto-play").toggleClass("jb-status-playing").attr("title",e.config.languagelistall.stpa).html(e.utils.add_font_icon_4_ie8(e.config,"&#xe00a;"))}else{s=e.config.languagelistall.aoff;t(".jb-bb-btn-auto-play").toggleClass("jb-status-playing").attr("title",e.config.languagelistall.strta).html(e.utils.add_font_icon_4_ie8(e.config,"&#xe009;"))}if(e.config.showautoplaystatus&&!i){var o=t(".jb-status-message");var u=e.glrySizePosition(e.index_panel.is_visible(),e.detail_panel.is_visible(),e.config_manager.isp,e.features.toppanel.isNeeded(),e.index_panel.get_thumb_height(),e.config);var a=u.detail_panel_height/2-18;var f=u.detail_panel_width/2-60;o.css({top:a,left:f,width:"115px"});o.html(s).fadeIn(300);window.setTimeout(function(){o.hide().fadeOut(r);o.fadeOut(300)},1e3)}};var h=function(e){n=e};var p=function(){n=window.setInterval(function(){if(!e.canImageMove(true)){e.features.autoplay.toggleAutoPlay();return}var n=e.gallery_manager().get_next_image(e.detail_panel.get_photo_position()).position;var r=t(".jb-dt-main-image-"+n+" .jb-status-loading");if(r.length<=0&&e.config.main_load_placeholder.indexOf("jb-status-")>0){e.nextImage(0)}},1e3*e.config.displaytime+r)};var d=function(){if(n){l()}};var v=function(){return n!=0};return{setContext:i,getHtml:s,draw:o,setEvent:u,init:a,repaint:f,toggleAutoPlay:l,stop:d,isPlaying:v,set_autoplay_flag:h}};juicebox_registered_components.showinfo=function(){var e,t,n=true;var r=juicebox_lib.jQuery;var i=function(n){e=n;t=e._};var s=function(){if(!e.config.showinfobutton){return}t(".jb-bb-btn-show-info").click(function(){o();return false})};var o=function(){n=!n;e.setOverlayFlag(n);a(n,250,false)};var u=function(){return n};var a=function(i,s,o){n=i;if(!e.detail_panel.is_visible()){return}var u=!e.detail_panel.isImageShowed()&&e.config.buttonbarposition.toUpperCase()==="OVERLAY_IMAGE"?":not(.jb-classifier-link-wrapper)":"";if(o){u+=":not(.jb-area-caption)"}e.utils.show_hide_controls(t(".jb-classifier-show-on-over"+u),i,r.browser.msie&&r.browser.version>=7&&r.browser.version<8?0:s);if(!o){t(".jb-area-caption table").css({display:""})}if(e.config.imagetransitiontype.toUpperCase()==="CROSS_FADE"&&!(r.browser.msie||e.utils.is_firefox3())){var a=s?s:50;window.setTimeout(function(){t(".jb-area-caption table").css({opacity:1})},a)}var f=i?e.config.languagelistall.hdinfo:e.config.languagelistall.sinfo;t(".jb-bb-button.jb-bb-btn-show-info").attr("title",f)};return{setContext:i,setEvent:s,showInfoCtrls:a,visible:u}};juicebox_registered_components.audio=function(){var e,t,n,r;var i=function(n){e=n;t=e._};var s=function(){t(".jb-bb-btn-audio").click(function(){o();return false})};var o=function(){var i=false;if(e.features.fullscreen.switched_2_fullscreen()&&e.features.fullscreen.getPersistor().parent_gallery_param.parent_toggle_audio_play){n=!e.features.fullscreen.getPersistor().parent_gallery_param.parent_toggle_audio_play();i=true}else{if(!r){return n}}if(e.utils.is_earlier_ie()){return n}if(n){if(!i){if(r){r.pause()}}n=false;t(".jb-bb-btn-audio").removeClass("jb-status-playing").attr("title",e.config.languagelistall.plya)}else{if(!i){if(r){r.play()}if(r.paused){return n}}n=true;t(".jb-bb-btn-audio").addClass("jb-status-playing").attr("title",e.config.languagelistall.psa)}return n};var u=function(i){var s;if(e.utils.is_firefox()||e.utils.is_opera()){s=e.config.audiourlogg}else{if(e.config.audiourlmp3){s=e.config.audiourlmp3}else{s=e.config.audiourlogg}}if(e.features.fullscreen.switched_2_fullscreen()&&e.features.fullscreen.getPersistor().parent_gallery_param.parent_toggle_audio_play){if(e.features.fullscreen.getPersistor().parent_gallery_param.need2PlayAudioAfterSplash&&e.features.fullscreen.getPersistor().parent_gallery_param.need2PlayAudioAfterSplash(e.config)){o()}else{n=e.features.fullscreen.getPersistor().parent_gallery_param.is_audio_playing;if(e.features.fullscreen.getPersistor().parent_gallery_param.is_audio_playing){t(".jb-bb-btn-audio").addClass("jb-status-playing").attr("title",e.config.languagelistall.psa)}else{t(".jb-bb-btn-audio").removeClass("jb-status-playing").attr("title",e.config.languagelistall.plya)}}}else{if(s&&!e.utils.is_earlier_ie()&&!e.utils.is_adobe_air()){try{r=new Audio(s);r.addEventListener("ended",function(){this.currentTime=0;if(e.config.loopaudio){this.play()}else{o()}},false);r.volume=e.config.audiovolume;if(!i&&e.config.playaudioonload){o()}}catch(u){console.error("cannot handle audio")}}}};var a=function(){return r!=null};var f=function(){return n};var l=function(){};var c=function(e,t){if(n){o(e,t)}};var h=function(){if(r){r.pause()}r=null};return{setContext:i,setEvent:s,init:u,repaint:l,toggleAudioPlay:o,isNeeded:a,isPlaying:f,stop:c,remove:h}};juicebox_registered_components.fotomoto=function(){var e,t;var n=function(n){e=n;t=e._};var r=function(){t(".jb-bb-btn-fotomoto").click(i)};var i=function(){if(e.config.fotomotostoreid){FOTOMOTO.API.showWindow(10,e.detail_panel.get_current_photo().imageURL)}else{var t=e.detail_panel.get_current_photo();if(t.purchaseURL){window.open(t.purchaseURL,"_blank")}}return false};var s=function(){if(e.utils.is_in_iframe()){return false}if(!e.utils.is_large_screen_mode(e.config)){return false}if(e.config.fotomotostoreid){return true}var t=e.detail_panel.get_current_photo();if(t.purchaseURL){return true}return false};return{setContext:n,setEvent:r,isVisible:s}};juicebox_registered_components.facebook=function(){var e,t;var n=function(n){e=n;t=e._};var r=function(){t(".jb-bb-btn-facebook").click(i)};var i=function(){var t=e.getGalleryInfo();window.open("http://www.facebook.com/sharer.php?u="+t.shareUrl,"","menubar=no,toolbar=no,resizable=yes,"+e.utils.get_popup_position_string(560,420));return false};return{setContext:n,setEvent:r}};juicebox_registered_components.twitter=function(){var e,t;var n=function(n){e=n;t=e._};var r=function(){t(".jb-bb-btn-twitter").click(i)};var i=function(){var t=e.getGalleryInfo();window.open("https://twitter.com/intent/tweet?text="+t.shareText+"&url="+t.shareUrl,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,"+e.utils.get_popup_position_string(600,420));return false};return{setContext:n,setEvent:r}};juicebox_registered_components.gplus=function(){var e,t;var n=function(n){e=n;t=e._};var r=function(){t(".jb-bb-btn-gplus").click(i)};var i=function(){var t=e.getGalleryInfo();window.open("https://plus.google.com/share?url="+t.shareUrl,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,"+e.utils.get_popup_position_string(600,420));return false};return{setContext:n,setEvent:r}};juicebox_registered_components.printerest=function(){var e,t;var n=function(n){e=n;t=e._};var r=function(){t(".jb-bb-btn-printerest").click(i)};var i=function(){var t=e.getGalleryInfo();window.open("https://pinterest.com/login/?next=/pin/create/bookmarklet/%3Fmedia%3D"+t.imageUrl+"%26description%3D"+t.shareText+"%26is_video%3Dfalse%26url%3D"+t.shareUrl,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,"+e.utils.get_popup_position_string(600,420));return false};return{setContext:n,setEvent:r}};juicebox_registered_components.tumblr=function(){var e,t;var n=function(n){e=n;t=e._};var r=function(){t(".jb-bb-btn-tumblr").click(i)};var i=function(){var t=e.getGalleryInfo();window.open("http://www.tumblr.com/share/photo?source="+t.imageUrl+"&caption="+t.shareText+"&click_thru="+t.shareUrl,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,"+e.utils.get_popup_position_string(600,420));return false};return{setContext:n,setEvent:r}}