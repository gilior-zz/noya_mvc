(function () {
    function g() { } function h(a, b) { for (var d = a.length; d--;) if (a[d].listener === b) return d; return -1 } function e(a) { return function () { return this[a].apply(this, arguments) } } var c = g.prototype, l = this, f = l.EventEmitter; c.getListeners = function (a) { var b = this._getEvents(), d, k; if ("object" === typeof a) for (k in d = {}, b) b.hasOwnProperty(k) && a.test(k) && (d[k] = b[k]); else d = b[a] || (b[a] = []); return d }; c.flattenListeners = function (a) { var b = [], d; for (d = 0; d < a.length; d += 1) b.push(a[d].listener); return b }; c.getListenersAsObject =
    function (a) { var b = this.getListeners(a), d; b instanceof Array && (d = {}, d[a] = b); return d || b }; c.addListener = function (a, b) { var d = this.getListenersAsObject(a), k = "object" === typeof b, c; for (c in d) d.hasOwnProperty(c) && -1 === h(d[c], b) && d[c].push(k ? b : { listener: b, once: !1 }); return this }; c.on = e("addListener"); c.addOnceListener = function (a, b) { return this.addListener(a, { listener: b, once: !0 }) }; c.once = e("addOnceListener"); c.defineEvent = function (a) { this.getListeners(a); return this }; c.defineEvents = function (a) {
        for (var b = 0; b <
        a.length; b += 1) this.defineEvent(a[b]); return this
    }; c.removeListener = function (a, b) { var d = this.getListenersAsObject(a), c, f; for (f in d) d.hasOwnProperty(f) && (c = h(d[f], b), -1 !== c && d[f].splice(c, 1)); return this }; c.off = e("removeListener"); c.addListeners = function (a, b) { return this.manipulateListeners(!1, a, b) }; c.removeListeners = function (a, b) { return this.manipulateListeners(!0, a, b) }; c.manipulateListeners = function (a, b, d) {
        var c, f, e = a ? this.removeListener : this.addListener; a = a ? this.removeListeners : this.addListeners;
        if ("object" !== typeof b || b instanceof RegExp) for (c = d.length; c--;) e.call(this, b, d[c]); else for (c in b) b.hasOwnProperty(c) && (f = b[c]) && ("function" === typeof f ? e.call(this, c, f) : a.call(this, c, f)); return this
    }; c.removeEvent = function (a) { var b = typeof a, d = this._getEvents(), c; if ("string" === b) delete d[a]; else if ("object" === b) for (c in d) d.hasOwnProperty(c) && a.test(c) && delete d[c]; else delete this._events; return this }; c.removeAllListeners = e("removeEvent"); c.emitEvent = function (a, b) {
        var c = this.getListenersAsObject(a),
        f, e, g, h; for (g in c) if (c.hasOwnProperty(g)) for (e = c[g].length; e--;) f = c[g][e], !0 === f.once && this.removeListener(a, f.listener), h = f.listener.apply(this, b || []), h === this._getOnceReturnValue() && this.removeListener(a, f.listener); return this
    }; c.trigger = e("emitEvent"); c.emit = function (a) { var b = Array.prototype.slice.call(arguments, 1); return this.emitEvent(a, b) }; c.setOnceReturnValue = function (a) { this._onceReturnValue = a; return this }; c._getOnceReturnValue = function () {
        return this.hasOwnProperty("_onceReturnValue") ? this._onceReturnValue :
        !0
    }; c._getEvents = function () { return this._events || (this._events = {}) }; g.noConflict = function () { l.EventEmitter = f; return g }; "function" === typeof define && define.amd ? define("eventEmitter/EventEmitter", [], function () { return g }) : "object" === typeof module && module.exports ? module.exports = g : this.EventEmitter = g
}).call(this);
(function (g) {
    function h(c) { var a = g.event; a.target = a.target || a.srcElement || c; return a } var e = document.documentElement, c = function () { }; e.addEventListener ? c = function (c, a, b) { c.addEventListener(a, b, !1) } : e.attachEvent && (c = function (c, a, b) { c[a + b] = b.handleEvent ? function () { var a = h(c); b.handleEvent.call(b, a) } : function () { var a = h(c); b.call(c, a) }; c.attachEvent("on" + a, c[a + b]) }); var l = function () { }; e.removeEventListener ? l = function (c, a, b) { c.removeEventListener(a, b, !1) } : e.detachEvent && (l = function (c, a, b) {
        c.detachEvent("on" +
        a, c[a + b]); try { delete c[a + b] } catch (d) { c[a + b] = void 0 }
    }); e = { bind: c, unbind: l }; "function" === typeof define && define.amd ? define("eventie/eventie", e) : g.eventie = e
})(this);
(function (g, h) { "function" === typeof define && define.amd ? define(["eventEmitter/EventEmitter", "eventie/eventie"], function (e, c) { return h(g, e, c) }) : "object" === typeof exports ? module.exports = h(g, require("wolfy87-eventemitter"), require("eventie")) : g.imagesLoaded = h(g, g.EventEmitter, g.eventie) })(window, function (g, h, e) {
    function c(c, a) { for (var b in a) c[b] = a[b]; return c } function l(c) {
        var a = []; if ("[object Array]" === p.call(c)) a = c; else if ("number" === typeof c.length) for (var b = 0, d = c.length; b < d; b++) a.push(c[b]); else a.push(c);
        return a
    } function f(a, b, e) { if (!(this instanceof f)) return new f(a, b); "string" === typeof a && (a = document.querySelectorAll(a)); this.elements = l(a); this.options = c({}, this.options); "function" === typeof b ? e = b : c(this.options, b); if (e) this.on("always", e); this.getImages(); d && (this.jqDeferred = new d.Deferred); var g = this; setTimeout(function () { g.check() }) } function a(a) { this.img = a } function b(a) { this.src = a; m[a] = this } var d = g.jQuery, k = g.console, n = "undefined" !== typeof k, p = Object.prototype.toString; f.prototype = new h; f.prototype.options =
    {}; f.prototype.getImages = function () { this.images = []; for (var a = 0, c = this.elements.length; a < c; a++) { var b = this.elements[a]; "IMG" === b.nodeName && this.addImage(b); var d = b.nodeType; if (d && (1 === d || 9 === d || 11 === d)) for (var b = b.querySelectorAll("img"), d = 0, e = b.length; d < e; d++) this.addImage(b[d]) } }; f.prototype.addImage = function (b) { b = new a(b); this.images.push(b) }; f.prototype.check = function () {
        function a(e, f) { b.options.debug && n && k.log("confirm", e, f); b.progress(e); c++; c === d && b.complete(); return !0 } var b = this, c = 0, d = this.images.length;
        this.hasAnyBroken = !1; if (d) for (var e = 0; e < d; e++) { var f = this.images[e]; f.on("confirm", a); f.check() } else this.complete()
    }; f.prototype.progress = function (a) { this.hasAnyBroken = this.hasAnyBroken || !a.isLoaded; var b = this; setTimeout(function () { b.emit("progress", b, a); b.jqDeferred && b.jqDeferred.notify && b.jqDeferred.notify(b, a) }) }; f.prototype.complete = function () {
        var b = this.hasAnyBroken ? "fail" : "done"; this.isComplete = !0; var a = this; setTimeout(function () {
            a.emit(b, a); a.emit("always", a); if (a.jqDeferred) a.jqDeferred[a.hasAnyBroken ?
            "reject" : "resolve"](a)
        })
    }; d && (d.fn.imagesLoaded = function (a, b) { return (new f(this, a, b)).jqDeferred.promise(d(this)) }); a.prototype = new h; a.prototype.check = function () { var a = m[this.img.src] || new b(this.img.src); if (a.isConfirmed) this.confirm(a.isLoaded, "cached was confirmed"); else if (this.img.complete && void 0 !== this.img.naturalWidth) this.confirm(0 !== this.img.naturalWidth, "naturalWidth"); else { var c = this; a.on("confirm", function (a, b) { c.confirm(a.isLoaded, b); return !0 }); a.check() } }; a.prototype.confirm = function (a,
    b) { this.isLoaded = a; this.emit("confirm", this, b) }; var m = {}; b.prototype = new h; b.prototype.check = function () { if (!this.isChecked) { var a = new Image; e.bind(a, "load", this); e.bind(a, "error", this); a.src = this.src; this.isChecked = !0 } }; b.prototype.handleEvent = function (a) { var b = "on" + a.type; if (this[b]) this[b](a) }; b.prototype.onload = function (a) { this.confirm(!0, "onload"); this.unbindProxyEvents(a) }; b.prototype.onerror = function (a) { this.confirm(!1, "onerror"); this.unbindProxyEvents(a) }; b.prototype.confirm = function (a, b) {
        this.isConfirmed =
        !0; this.isLoaded = a; this.emit("confirm", this, b)
    }; b.prototype.unbindProxyEvents = function (a) { e.unbind(a.target, "load", this); e.unbind(a.target, "error", this) }; return f
});
